{
    "sourceFile": "src/components/common/search_form.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1713876366958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1713876366958,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\n// import FilterJson from \"../json/filterjson\";\n// import Select from \"react-select\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport Filterbox from \"./filterbox\";\nimport states from \"../json/states\";\nimport { getJson } from \"../../api/api\";\nfunction SearchForm() {\n  const location = useLocation();\n  const path = location.pathname;\n  const searchParams = new URLSearchParams(location.search);\n  const search = searchParams.get(\"search\");\n  const country = searchParams.get(\"country\");\n  const user_type = localStorage.getItem(\"userType\");\n  let [Json, setJson] = useState([]);\n  let [state, setState] = useState({\n    search: search ? search : \"\",\n    country: \"\",\n    country_value: country ? country : \"\",\n  });\n  /*Function to get the jSon */\n  const JsonData = async () => {\n    try {\n      let Json = await getJson();\n      setJson(Json);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  let navigate = useNavigate();\n  /*Function to set data to the search job by country */\n  const onSelectChange = (option) => {\n    setState({\n      ...state,\n      country_value: option.target.value,\n    });\n  };\n\n  /*Function to redender the data in the option of the select box*/\n  useEffect(() => {\n    JsonData();\n    const options = (Object.keys(states) || []).map((option) => ({\n      value: option,\n      label: option,\n    }));\n    setState({\n      ...state,\n      country: options,\n    });\n    // eslint-disable-next-line\n  }, [states]);\n\n  /*Onclick Function to search */\n  const Onsearch = () => {\n    if (user_type === \"company\") {\n      navigate(`/empsearch?search=${state.search}`);\n      setState({\n        ...state,\n        search: \"\",\n      });\n    } else {\n      navigate(`/jobs?search=${state.search}&country=${state.country_value}`);\n      setState({\n        ...state,\n        search: \"\",\n        country: \"\",\n      });\n    }\n  };\n  return (\n    <form // action={user_type === \"company\" ? \"/managejobs\" : \"/jobs\"}\n      className=\"search-form\"\n      data-aos=\"fade-up\"\n      data-aos-duration=\"800\"\n      data-aos-once=\"true\"\n    >\n      <div className=\" bg-white job_search_main_form rounded-70 shadow-7 pr-15 py-7 pl-12\">\n        <div className=\"filter-search-form-2\">\n          <div className=\"filter-inputs\">\n            <div className=\"form-group position-relative\">\n              <input\n                className=\"form-control focus-reset pl-13\"\n                type=\"text\"\n                id=\"keyword\"\n                name=\"search\"\n                value={state.search}\n                onChange={(e) =>\n                  setState({\n                    ...state,\n                    search: e.target.value,\n                  })\n                }\n                placeholder=\"Type Job title, keywords\"\n              />\n              <span className=\"h-100 w-px-50 pos-abs-tl d-flex align-items-center justify-content-center font-size-6\">\n                <i className=\"icon icon-zoom-2 text-primary font-weight-bold\"></i>\n              </span>\n            </div>\n            {/* <!-- select-city starts --> */}\n            {user_type === \"company\" ? null : (\n              <div className=\"form-group position-relative\">\n                {/* <Select\n                  options={\"\" || state.country}\n                  name=\"country\"\n                  id=\"country\"\n                  onChange={onSelectChange}\n                  className=\"bg-white pl-13\"\n                />\n\n                <span className=\"h-100 w-px-50 pos-abs-tl d-flex align-items-center justify-content-center font-size-6\">\n                  <i className=\"icon icon-pin-3 text-primary font-weight-bold\"></i>\n                </span> */}\n                <select className=\"form-control\" onChange={onSelectChange}>\n                  <option value=\"\">Select location</option>\n                  {(state.country || []).map((item, index) => {\n                    return (\n                      <option value={item.value} key={index}>\n                        {item.label}\n                      </option>\n                    );\n                  })}{\" \"}\n                </select>\n              </div>\n            )}{\" \"}\n          </div>\n          {/* <!-- ./select-city ends --> */}\n          <button\n            onClick={\n              /*path === \"/jobs\" ? null :*/\n              Onsearch\n            }\n            className=\"btn btn-primary line-height-reset text-uppercase main_search_button_home\"\n            type=\"button\"\n          >\n            Search\n          </button>\n        </div>\n        {path === \"/jobs\" ||\n        path === \"/managejobs\" ||\n        path === \"/response\" ||\n        user_type === \"company\" ? null : (\n          <div className=\"row m-0 job_filter_block mt-5\">\n            {/* <Filterbox\n            name=\"country\"\n            filterheading=\" Jobs by Location\"\n            filterjson={filterjson.location}\n            type={\"location\"}\n          /> */}\n            <Filterbox\n              name=\"category\"\n              filterheading=\" Jobs by Category\"\n              filterjson={Json.Category}\n              type={\"category\"}\n            />\n          </div>\n        )}{\" \"}\n      </div>\n    </form>\n  );\n}\nexport default SearchForm;\n"
        }
    ]
}
{
    "sourceFile": "src/components/common/employerTable.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1693486956901,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1693486991198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -120,9 +120,12 @@\n   async function deleteEmployer(e) {\n     try {\n       const responseData = await DeleteEmployer(e);\n       if (responseData.message === \"company has been deleted\") {\n-        toast.error(\"Employer deleted Successfully\", \n+        toast.error(\"Employer deleted Successfully\", {\n+          position: toast.POSITION.TOP_RIGHT,\n+          autoClose: 1000,\n+        });\n         setDeleteAlert(false);\n         setApiCall(true)\n       }\n     } catch (err) {\n"
                }
            ],
            "date": 1693486956901,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport CompanyDetails from \"../forms/employer/companyDetail\";\nimport ContactInfo from \"../forms/employer/contactInfo\";\nimport KycComplianceDetails from \"../forms/employer/kyc\";\nimport { getAllEmployer, DeleteEmployer } from \"../../api/api\";\nimport { toast } from \"react-toastify\";\nimport SAlert from \"../common/sweetAlert\";\nimport Pagination from \"../common/pagination\";\nimport Loader from '../common/loader';\nimport { LiaEdit } from \"react-icons/lia\"\nimport { RiDeleteBin5Line } from \"react-icons/ri\"\nimport { PiAddressBookLight } from \"react-icons/pi\"\nimport { PiBriefcaseLight } from \"react-icons/pi\"\nimport { AiOutlineFileZip } from \"react-icons/ai\"\nexport default function EmployerTable(props) {\n  /*show modal and data , id state */\n  let [apiCall, setApiCall] = useState(false);\n  let [showAddEmployerModal, setShowEmployerMOdal] = useState(false);\n  let [showKycModal, setShowkycMOdal] = useState(false);\n  let [showContactModal, setShowContactMOdal] = useState(false);\n  const [employerData, setemployerData] = useState([]);\n  const [employerId, setEmployerID] = useState();\n  let [isLoading, setIsLoading] = useState(true);\n\n  /*delete state */\n  const [deleteAlert, setDeleteAlert] = useState(false);\n  const [deleteId, setDeleteID] = useState();\n  const [deleteName, setDeleteName] = useState(\"\");\n  /*Pagination states */\n  const [totalData, setTotalData] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [recordsPerPage] = useState(10);\n  /*Shorting states */\n  const [columnName, setcolumnName] = useState(\"company_id\");\n  const [sortOrder, setSortOrder] = useState(\"\");\n\n  /* Function to get Employer data*/\n  const EmployerData = async () => {\n    setIsLoading(true)\n    try {\n      const userData = await getAllEmployer(\n        props.industryFilterValue,\n        props.corporationFilterValue,\n        props.search,\n        props.filter_by_time ||\n          props.industryFilterValue ||\n          props.corporationFilterValue ||\n          props.search ||\n          sortOrder ? 1 : currentPage,\n        recordsPerPage,\n        columnName,\n        sortOrder,\n        props.filter_by_time\n      );\n      if (userData.data.length === 0) {\n        setemployerData([]);\n        setIsLoading(false)\n      } else {\n        setemployerData(userData.data);\n        setTotalData(userData.total_rows);\n        setIsLoading(false)\n      }\n    } catch (err) {\n      console.log(err)\n      setIsLoading(false)\n    }\n  };\n\n  /*Render function to get the employer*/\n  useEffect(() => {\n    EmployerData();\n    if (apiCall === true || props.apiCall === true) {\n      props.setApiCall(false)\n      setApiCall(false)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    props.industryFilterValue,\n    props.corporationFilterValue,\n    props.search,\n    deleteAlert,\n    currentPage,\n    recordsPerPage,\n    columnName,\n    sortOrder,\n    props.filter_by_time,\n    apiCall,\n    props.apiCall,\n    props.showEmployerDetails\n  ]);\n  /* Function to show the single data to update Employer */\n  const editEmployer = (e) => {\n    setShowEmployerMOdal(true);\n    setEmployerID(e);\n  };\n  /* Function to show the single data to update Employer Contact*/\n  const editEmployerContact = (e) => {\n    setShowContactMOdal(true);\n    setEmployerID(e);\n  };\n  /* Function to show the single data to update Kyc*/\n  const editEmployerKyc = (e) => {\n    setShowkycMOdal(true);\n    setEmployerID(e);\n  };\n\n  /*To Show the delete alert box */\n  const ShowDeleteAlert = (e) => {\n    setDeleteID(e.company_id);\n    setDeleteName(e.company_name);\n    setDeleteAlert(true);\n  };\n\n  /*To cancel the delete alert box */\n  const CancelDelete = () => {\n    setDeleteAlert(false);\n  };\n  /*To call Api to delete Employer */\n  async function deleteEmployer(e) {\n    try {\n      const responseData = await DeleteEmployer(e);\n      if (responseData.message === \"company has been deleted\") {\n        toast.error(\"Employer deleted Successfully\", \n        setDeleteAlert(false);\n        setApiCall(true)\n      }\n    } catch (err) {\n      console.log(err)\n    }\n  }\n  /*Pagination Calculation */\n  const nPages = Math.ceil(totalData / recordsPerPage);\n\n  /*Sorting Function */\n  const handleSort = (columnName) => {\n    setSortOrder(sortOrder === \"DESC\" ? \"ASC\" : \"DESC\");\n    setcolumnName(columnName);\n  };\n  /* Function to show the Job detail data */\n  const EmployerDetail = (e) => {\n    props.EmployerDetail(e);\n  };\n\n  return (\n    <>\n\n      <div className=\"bg-white shadow-8 datatable_div  pt-7 rounded pb-8 px-11\">\n        <div className=\"table-responsive main_table_div\">\n          {isLoading ?\n            <Loader /> : <table className=\"table table-striped main_data_table\">\n              <thead>\n                <tr>\n                  <th\n                    scope=\"col\"\n                    className=\"border-0 font-size-4 font-weight-normal\"\n                  >\n                    <Link\n                      to={\"\"}\n                      onClick={() => { handleSort(\"company_name\"); setCurrentPage(1) }}\n                      className=\"text-gray\"\n                      title=\"Sort by Company Name\"\n                    >\n                      Company name\n                    </Link>\n                  </th>\n                  {props.heading === \"Dashboard\" ? (\n                    \"\"\n                  ) : (\n                    <th\n                      scope=\"col\"\n                      className=\" border-0 font-size-4 font-weight-normal\"\n                    >\n                      <Link\n                        to={\"\"}\n                        onClick={() => { handleSort(\"contact_person_name\"); setCurrentPage(1) }}\n                        className=\"text-gray\"\n                        title=\"Sort by Name\"\n                      >\n                        Name\n                      </Link>\n                    </th>\n                  )}\n                  {props.heading === \"Dashboard\" ? (\n                    \"\"\n                  ) : (\n                    <th\n                      scope=\"col\"\n                      className=\"border-0 font-size-4 font-weight-normal\"\n                    >\n                      <Link\n                        to={\"\"}\n                        onClick={() => { handleSort(\"address\"); setCurrentPage(1) }}\n                        className=\"text-gray\"\n                        title=\"Sort by Location\"\n                      >\n                        Location\n                      </Link>\n                    </th>\n                  )}\n                  {props.heading === \"Dashboard\" ? (\n                    \"\"\n                  ) : (\n                    <th\n                      scope=\"col\"\n                      className=\"border-0 font-size-4 font-weight-normal\"\n                    >\n                      <Link\n                        to={\"\"}\n                        onClick={() => { handleSort(\"contact_no\"); setCurrentPage(1) }}\n                        className=\"text-gray\"\n                        title=\"Sort by Contact\"\n                      >\n                        Contact Info\n                      </Link>\n                    </th>\n                  )}\n                  <th\n                    scope=\"col\"\n                    className=\"border-0 font-size-4 font-weight-normal\"\n                  >\n                    <Link\n                      to={\"\"}\n                      onClick={() => { handleSort(\"vacancy_for_post\"); setCurrentPage(1) }}\n                      className=\"text-gray\"\n                      title=\"Sort by jobs\"\n                    >\n                      Jobs\n                    </Link>\n                  </th>\n                  {props.heading === \"Dashboard\" ? (\n                    \"\"\n                  ) : (\n                    <th\n                      scope=\"col\"\n                      className=\"border-0 font-size-4 font-weight-normal\"\n                    >\n                      Profile\n                    </th>\n                  )}\n                  {props.heading === \"Dashboard\" ? (\n                    \"\"\n                  ) : (\n                    <th\n                      scope=\"col\"\n                      className=\"border-0 font-size-4 font-weight-normal\"\n                    >\n                      Action\n                    </th>\n                  )}\n                </tr>\n              </thead>\n              <tbody>\n                {/* Map function to show the data in the list*/}\n                {totalData === 0 || employerData.length === 0 ? (\n                  <tr>\n                    <th className=\"bg-white\"></th>\n                    <th className=\"bg-white\"></th>\n                    {props.heading === \"Dashboard\" ? (\n                      <th className=\"bg-white\">No Data Found</th>\n                    ) : (\n                      <th className=\"bg-white\"></th>\n                    )}\n                    <th className=\"bg-white\">No Data Found</th>\n                    <th className=\"bg-white\"></th>\n                    {props.heading !== \"Dashboard\" ? (\n                      <>\n                        <th className=\"bg-white\"></th>\n                        <th className=\"bg-white\"></th>\n                      </>\n                    ) : (\n                      \"\"\n                    )}\n                  </tr>\n                ) : (\n                  (employerData || []).map((empdata) => (\n                    <tr className=\"text-capitalize\" key={empdata.company_id}>\n                      <th scope=\"row\" className=\"pl-5 py-5 pr-0   \">\n                        <Link\n                          to={`/company_detail`}\n                          title=\"Company Details\"\n                          onClick={() => localStorage.setItem(\"company_id\", empdata.company_id)}\n                        >\n                          <div className=\"d-flex profile_box gx-2\">\n                            <div className=\"media  align-items-center\">\n                              <div className=\"circle-36 mx-auto\">\n                                {empdata.logo === null ? (\n                                  <img\n                                    src=\"https://cdn.logo.com/hotlink-ok/logo-social-sq.png\"\n                                    alt=\"\"\n                                    className=\"w-100\"\n                                  />\n                                ) : (\n                                  <img\n                                    src={empdata.logo}\n                                    alt=\"\"\n                                    className=\"w-100\"\n                                  />\n                                )}\n                              </div>\n                            </div>\n                            {empdata.company_name === null ? (\n                              <p className=\"m-0 text-black-2 font-weight-bold text-capitalize\">\n                                Unavailable\n                              </p>\n                            ) : (\n\n                              <div className=\"company_profile\">\n                                <p className=\"m-0 text-black-2 font-weight-bold text-capitalize\">\n                                  {empdata.company_name}\n                                </p>\n                                <p className=\"font-size-3 font-weight-normal mb-0\">\n                                  {empdata.industry}\n                                </p>\n                              </div>\n\n                            )}\n                          </div>\n                        </Link>\n                      </th>\n                      {props.heading === \"Dashboard\" ? (\n                        \"\"\n                      ) : (\n                        <th className=\"py-5 pr-0\">\n                          <Link\n                            to={\"\"}\n                            title=\"Company Details\"\n                            onClick={() => EmployerDetail(empdata.company_id)}\n                          >\n                            <p className=\"m-0 font-weight-normal text-capitalize\">\n                              {empdata.contact_person_name === null\n                                ? \"Unavailable\"\n                                : empdata.contact_person_name}\n                            </p>\n                          </Link>\n                        </th>\n                      )}\n                      {props.heading === \"Dashboard\" ? (\n                        \"\"\n                      ) : (\n                        <th className=\" py-5  pr-0\">\n                          {empdata.address === null ? (\n                            <p className=\"font-size-3 font-weight-bold  mb-0\">\n                              Unavailable\n                            </p>\n                          ) : (\n                            <p className=\"font-size-3 font-weight-normal mb-0\">\n                              {empdata.address} {empdata.city} ({empdata.pin_code}\n                              ) {empdata.state} {empdata.country}\n                            </p>\n                          )}\n                        </th>\n                      )}\n                      {props.heading === \"Dashboard\" ? (\n                        \"\"\n                      ) : (\n                        <th className=\" py-5  pr-0\">\n                          {empdata.contact_no === null ? (\n                            <p className=\"font-size-3 font-weight-bold  mb-0\">\n                              Unavailable\n                            </p>\n                          ) : (\n                            <>\n                              <div className=\"font-size-3 font-weight-normal mb-0\">\n                                + <Link className=\"text-dark\" to={`tel:${empdata.contact_no}`}>{empdata.contact_no}</Link>\n                              </div>\n                              <div className=\"font-size-3 font-weight-normal mb-0\">\n                                {empdata.contact_no_other === null ||\n                                  empdata.contact_no_other === undefined ||\n                                  empdata.contact_no_other === \"\"\n                                  ? \"\"\n                                  : <><Link className=\"text-dark\" to={`tel:${empdata.contact_no_other}`}>{empdata.contact_no_other}</Link></>}\n                              </div>\n                              <p className=\"text-gray font-size-2 font-weight-normal m-0\">\n                                <Link className=\"text-dark\" to={`mailto:${empdata.email}`}>\n                                  {empdata.email}\n                                </Link>\n                              </p>\n                            </>\n                          )}\n                        </th>\n                      )}\n                      <th className=\"py-5 \">\n                        {empdata.vacancy_for_post === null ? (\n                          <p className=\"font-size-3 font-weight-bold  mb-0\">\n                            Unavailable\n                          </p>\n                        ) : (\n                          <p className=\"font-size-3 font-weight-normal mb-0\">\n                            {empdata.vacancy_for_post} ({empdata.vacancies})\n                          </p>\n                        )}\n                      </th>\n                      {props.heading === \"Dashboard\" ? (\n                        \"\"\n                      ) : (\n                        <th className=\"  py-5 \">\n                          <p className=\"font-size-2 font-weight-normal text-black-2 mb-0\">\n                            {empdata.profile_complete >= 99.00 ? (\n                              <span className=\"p-1 bg-primary-opacity-8 text-white text-center w-100 border rounded-pill\">\n                                Complete\n                              </span>\n\n                            ) : (\n                              <span className=\"p-1 bg-warning text-white text-center w-100 border rounded-pill\">\n                                Incompelete\n                              </span>\n                            )}</p>\n                        </th>\n                      )}\n                      {props.heading === \"Dashboard\" ? (\n                        \"\"\n                      ) : (\n                        <th className=\"py-5 min-width-px-100\">\n                          <div className=\"btn-group button_group\" role=\"group\">\n                            <button\n                              className=\"btn btn-outline-info action_btn\"\n                              onClick={() =>\n                                editEmployerContact(empdata.company_id)\n                              }\n                              title=\"Contact\"\n                            >\n                              <span className=\"text-gray px-1\"><PiAddressBookLight /></span>\n                              {/* <span className=\"fa fa-address-book text-gray px-1\"></span> */}\n                            </button>\n                            <button\n                              className=\"btn btn-outline-info action_btn\"\n                            >\n                              <Link\n                                // onClick={() => Joblist(empdata.company_name)}\n                                to=\"/job\"\n                                state={{ company_name: empdata.company_name }}\n                                title=\"Jobs\"\n                              >\n                                <span className=\"text-gray px-1\"><PiBriefcaseLight />\n                                </span>\n                                {/* <span className=\"fas fa-briefcase text-gray  \"></span> */}\n                              </Link>\n                            </button>\n                            <button\n                              className=\"btn btn-outline-info action_btn\"\n                              onClick={() => editEmployerKyc(empdata.company_id)}\n                              title=\"KYC\"\n                            >\n                              <span className=\"text-gray px-1\">\n                                <AiOutlineFileZip />\n                              </span>\n                              {/* <span className=\"fa fa-file text-gray px-1 \"></span> */}\n                            </button>\n                            <button\n                              className=\"btn btn-outline-info action_btn\"\n                              onClick={() => editEmployer(empdata.company_id)}\n                              title=\"Edit Employer\"\n                            >\n                              <span className=\"text-gray px-1\"><LiaEdit /></span>\n                              {/* <span className=\" fas fa-edit text-gray px-1\"></span> */}\n                            </button>\n                            <button\n                              className=\"btn btn-outline-info action_btn\"\n                              onClick={() => ShowDeleteAlert(empdata)}\n                              title=\"Delete\"\n                            >\n                              <span className=\"text-danger px-1\">\n                                <RiDeleteBin5Line />\n                              </span>\n                              {/* <span className=\"fa fa-trash text-danger px-1\"></span> */}\n                            </button>\n                          </div>\n                        </th>\n                      )}\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>}\n        </div>\n        <div className=\"pt-2\">\n          <Pagination\n            nPages={nPages}\n            currentPage={currentPage}\n            setCurrentPage={setCurrentPage} total={totalData} count={employerData.length}\n          />\n        </div>\n      </div>\n      {showAddEmployerModal ? <CompanyDetails\n        show={showAddEmployerModal}\n        employerId={employerId}\n        setApiCall={setApiCall}\n        apiCall={apiCall}\n        close={() => setShowEmployerMOdal(false)}\n      /> : null}\n      {showContactModal ? <ContactInfo\n        show={showContactModal}\n        employerId={employerId}\n        setApiCall={setApiCall}\n        apiCall={apiCall}\n        close={() => setShowContactMOdal(false)}\n      /> : null}\n      {showKycModal ? <KycComplianceDetails\n        show={showKycModal}\n        employerId={employerId}\n        setApiCall={setApiCall}\n        apiCall={apiCall}\n        close={() => setShowkycMOdal(false)}\n      /> : null}\n      <SAlert\n        show={deleteAlert}\n        title={deleteName}\n        text=\"Are you Sure you want to delete !\"\n        onConfirm={() => deleteEmployer(deleteId)}\n        showCancelButton={true}\n        onCancel={CancelDelete}\n      />\n    </>\n  );\n}\n"
        }
    ]
}
{
    "sourceFile": "src/components/common/PartnerTAble.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1713876940329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1713876940329,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react'\r\nimport { GetAgent } from '../../api/api';\r\nimport Pagination from './pagination';\r\nimport { Link } from 'react-router-dom';\r\nimport Loader from './loader';\r\nimport { FaEdit } from \"react-icons/fa\";\r\nimport { RiDeleteBin5Line } from \"react-icons/ri\"\r\nexport default function PartnerTAble(props) {\r\n    const [prtnerData, setprtnerData] = useState([])\r\n    const [isLoading, setIsLoading] = useState(true)\r\n\r\n    /*Pagination states */\r\n    const [totalData, setTotalData] = useState(\"\");\r\n    // const [currentPage, setCurrentPage] = useState(1);\r\n    const [recordsPerPage] = useState(10);\r\n    /*Shorting states */\r\n    const [columnName, setcolumnName] = useState(\"\");\r\n    const [sortOrder, setSortOrder] = useState(\"\");\r\n    //   /* Function to get the intervew data*/\r\n    const PartnerData = async () => {\r\n        try {\r\n            const userData = await GetAgent(\r\n                \"\",\r\n                props.search,\r\n                props.pageNo,\r\n                recordsPerPage,\r\n                columnName,\r\n                sortOrder\r\n            );\r\n            if (userData.data.length === 0) {\r\n                setprtnerData([]);\r\n                setIsLoading(false);\r\n            } else {\r\n                setprtnerData(userData.data.data);\r\n                setTotalData(userData.data.total_rows);\r\n                setIsLoading(false);\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    /*Render function to get the interview*/\r\n    useEffect(() => {\r\n        PartnerData();\r\n        if (props.apiCall === true) {\r\n            props.setApiCall(false)\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [\r\n        props.search,\r\n        props.pageNo,\r\n        columnName,\r\n        recordsPerPage,\r\n        sortOrder,\r\n        // props.filter_by_time,\r\n        // props.statusFilterValue,\r\n        // props.openTable,\r\n        props.apiCall,\r\n    ]);\r\n\r\n    /*Pagination Calculation */\r\n    const nPages = Math.ceil(totalData / recordsPerPage);\r\n\r\n    /*Sorting Function */\r\n    const handleSort = (columnName) => {\r\n        setSortOrder(sortOrder === \"DESC\" ? \"ASC\" : \"DESC\");\r\n        setcolumnName(columnName);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"mb-18\">\r\n                <div className=\"mb-4 align-items-center\">\r\n                    <div className=\"page___heading\">\r\n                        <h3 className=\"font-size-6 mb-0\">Manage Partner </h3>\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className={\r\n                        props.heading === \"Dashboard\"\r\n                            ? \"\"\r\n                            : \"bg-white shadow-8 datatable_div  pt-7 rounded pb-9 px-5\"\r\n                    }\r\n                >\r\n                    <div className=\"table-responsive main_table_div\">\r\n                        {isLoading ? (\r\n                            <Loader />\r\n                        ) : (\r\n                            <table className=\"table table-striped main_data_table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th\r\n                                            scope=\"col\"\r\n                                            className=\"border-0 font-size-4 font-weight-normal\"\r\n                                        >\r\n                                            <Link\r\n                                                to={\"\"}\r\n                                                onClick={() => {\r\n                                                    handleSort(\"u_id\");\r\n                                                    props.setpageNo(1);\r\n                                                }}\r\n                                                className=\"text-gray\"\r\n                                                title=\"Sort by ID\"\r\n                                            > UID\r\n                                            </Link>\r\n\r\n                                        </th>\r\n                                        <th\r\n                                            scope=\"col\"\r\n                                            className=\"border-0 font-size-4 font-weight-normal\"\r\n                                        >\r\n                                            <Link\r\n                                                to={\"\"}\r\n                                                onClick={() => {\r\n                                                    handleSort(\"name\");\r\n                                                    props.setpageNo(1);\r\n                                                }}\r\n                                                className=\"text-gray\"\r\n                                                title=\"Sort by Name\"\r\n                                            >\r\n                                                Name\r\n                                            </Link>\r\n                                        </th>\r\n                                        <th\r\n                                            scope=\"col\"\r\n                                            className=\"border-0 font-size-4 font-weight-normal\"\r\n                                        >\r\n                                            <Link\r\n                                                to={\"\"}\r\n                                                onClick={() => {\r\n                                                    handleSort(\"address\");\r\n                                                    props.setpageNo(1);\r\n                                                }}\r\n                                                className=\"text-gray\"\r\n                                                title=\"Sort by Location\"\r\n                                            >\r\n                                                Location\r\n                                            </Link>\r\n                                        </th>\r\n\r\n                                        <th\r\n                                            scope=\"col\"\r\n                                            className=\"border-0 font-size-4 font-weight-normal\"\r\n                                        >\r\n                                            <Link\r\n                                                to={\"\"}\r\n                                                onClick={() => {\r\n                                                    handleSort(\"email\");\r\n                                                    props.setpageNo(1);\r\n                                                }}\r\n                                                className=\"text-gray\"\r\n                                                title=\"Sort by email\"\r\n                                            >\r\n                                                Contact Info\r\n                                            </Link>\r\n                                        </th>\r\n                                        <th\r\n                                            scope=\"col\"\r\n                                            className=\"border-0 font-size-4 font-weight-normal\"\r\n                                        >\r\n                                            <Link\r\n                                                to={\"\"}\r\n                                                onClick={() => {\r\n                                                    handleSort(\"agent_employee_count\");\r\n                                                    props.setpageNo(1);\r\n                                                }}\r\n                                                className=\"text-gray\"\r\n                                                title=\"Sort by Candidates\"\r\n                                            >\r\n                                                Total Candidates\r\n                                            </Link>\r\n                                        </th>\r\n                                        <th\r\n                                            scope=\"col\"\r\n                                            className=\" border-0 font-size-4 font-weight-normal\"\r\n                                        >\r\n                                            Action\r\n                                        </th>\r\n\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {/* Map function to show the data in the list*/}\r\n                                    {totalData === 0 || prtnerData.length === 0 ? (\r\n                                        <tr>\r\n                                            <th colSpan={7} className=\"bg-white text-center\">\r\n                                                No Data Found\r\n                                            </th>\r\n                                        </tr>\r\n                                    ) : (\r\n                                        (prtnerData || []).map((data) => (\r\n                                            <tr className=\"text-capitalize\" key={data.id}>\r\n                                                <td className=\"py-5 \">\r\n                                                    <Link\r\n                                                        to={`/partner_profile`}\r\n                                                        onClick={\r\n                                                            () =>\r\n                                                            localStorage.setItem(\"agent_id\", data.id)\r\n                                                        }\r\n                                                        title=\"Partner Profile\"\r\n                                                    >\r\n                                                        <p className=\"font-size-3 mb-0 font-weight-normal text-black-2\">\r\n                                                            {data.u_id}\r\n                                                        </p>\r\n                                                    </Link>\r\n                                                </td>\r\n                                                <td className=\"py-5 \">\r\n                                                    <Link\r\n                                                        to={`/partner_profile`}\r\n                                                        onClick={() =>\r\n                                                            localStorage.setItem(\"agent_id\", data.id)\r\n                                                        }\r\n                                                        title=\"Partner Profile\"\r\n                                                    >\r\n                                                        <div className=\"d-flex profile_box gx-2\">\r\n                                                            <div className=\"media  align-items-center\">\r\n                                                                <div className=\"circle-30 mx-auto overflow-hidden\">\r\n                                                                    {data.profile_image === null || !data.profile_image ? (\r\n                                                                        <img\r\n                                                                            src=\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\"\r\n                                                                            alt=\"\"\r\n                                                                            className=\"w-100\"\r\n                                                                        />\r\n                                                                    ) : (\r\n                                                                        <img\r\n                                                                            src={data.profile_image}\r\n                                                                            alt={data.name}\r\n                                                                            className=\"w-100\"\r\n                                                                        />\r\n                                                                    )}\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            <div className=\" mb-0\">\r\n                                                                {data.name === null ||\r\n                                                                    data.name === undefined ||\r\n                                                                    data.name === \"undefined\" ||\r\n                                                                    data.name === \"\" ? (\r\n                                                                    <p className=\"font-size-3  mb-0\">N/A</p>\r\n                                                                ) : (\r\n                                                                    <p\r\n                                                                        className=\"m-0 text-black-2 font-weight-bold text-capitalize text-truncate\"\r\n                                                                        title={data.name}\r\n                                                                    >\r\n                                                                        {data.name}\r\n                                                                    </p>\r\n                                                                )}\r\n\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Link>\r\n                                                </td>\r\n                                                <td className=\"py-5 \">\r\n                                                    {data.address === null || !data.address ? (\r\n                                                        <p className=\"font-size-3 font-weight-bold  mb-0\">\r\n                                                            N/A\r\n                                                        </p>\r\n                                                    ) : (\r\n                                                        <p\r\n                                                            className=\"font-size-3 font-weight-normal mb-0 text-truncate\"\r\n                                                            style={{ maxWidth: 200 }}\r\n                                                            title={`${data.address ? data.address : \"\"}${data.city ? \", \" + data.city : \"\"}${data.state ? \", \" + data.state : \"\"}${data.country ? \", \" + data.country : \"\"} `}\r\n                                                        >\r\n                                                            {`${data.address ? data.address : \"\"}${data.city ? \", \" + data.city : \"\"}${data.state ? \", \" + data.state : \"\"}${data.country ? \", \" + data.country : \"\"} `}\r\n                                                        </p>\r\n                                                    )}\r\n                                                </td>\r\n                                                <td className=\"py-5 \">\r\n                                                    {data.contact_no === null || !data.contact_no ? (\r\n                                                        <p className=\"font-size-3 font-weight-bold  mb-0\">\r\n                                                            N/A\r\n                                                        </p>\r\n                                                    ) : (\r\n                                                        <>\r\n                                                            <div className=\"font-size-3 font-weight-normal mb-0\">\r\n                                                                +\r\n                                                                <Link\r\n                                                                    className=\"text-dark\"\r\n                                                                    to={`tel:${data.contact_no}`}\r\n                                                                >\r\n                                                                    {data.contact_no}\r\n                                                                </Link>\r\n                                                            </div>\r\n                                                            <p className=\"text-gray font-size-2 font-weight-normal m-0\">\r\n                                                                <Link\r\n                                                                    className=\"text-dark\"\r\n                                                                    to={`mailto:${data.email}`}\r\n                                                                >\r\n                                                                    {data.email}\r\n                                                                </Link>\r\n                                                            </p>\r\n                                                        </>\r\n                                                    )}\r\n                                                </td>\r\n                                                <td className=\" py-5\">\r\n                                                    {data.agent_employee_count === null ||\r\n                                                        data.agent_employee_count === undefined ||\r\n                                                        data.agent_employee_count === \"undefined\" ||\r\n                                                        data.agent_employee_count === \"\" ||\r\n                                                        data.agent_employee_count === \"0\" || data.agent_employee_count === 0 ? (\r\n                                                        <p className=\"font-size-3  mb-0\">N/A</p>\r\n                                                    ) : (\r\n                                                        <h3 className=\"font-size-3 font-weight-normal text-black-2 mb-0\">\r\n                                                            {(data.agent_employee_count)}\r\n                                                        </h3>\r\n                                                    )}\r\n                                                </td>\r\n                                                <td\r\n                                                    className={\r\n                                                        props.heading === \"Dashboard\" ? \"d-none\" : \"py-5 \"\r\n                                                    }\r\n                                                >\r\n                                                    <div className=\"btn-group button_group\" role=\"group\">\r\n                                                        <button\r\n                                                            className=\"btn btn-outline-info action_btn \"\r\n                                                            style={{ fontSize: \"10px\" }}\r\n                                                            onClick={() => props.EditAgent(data.id)}\r\n                                                            title=\"Edit Partner\"\r\n                                                        >\r\n                                                            <FaEdit />\r\n                                                        </button>\r\n                                                        <button\r\n                                                            className={\r\n                                                                props.user === \"agent\"\r\n                                                                    ? \"d-none\"\r\n                                                                    : \"font-size-3 text-break btn btn-outline-danger btn-rounded action_btn \"\r\n                                                            }\r\n                                                            onClick={() => props.ShowDeleteAlert(data)}\r\n                                                            title=\"Delete Partner\"\r\n                                                        >\r\n                                                            <RiDeleteBin5Line />\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"pt-2\">\r\n                        <Pagination\r\n                            nPages={nPages}\r\n                            currentPage={props.pageNo}\r\n                            setCurrentPage={props.setpageNo}\r\n                            total={totalData}\r\n                            count={prtnerData.length}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"
        }
    ]
}
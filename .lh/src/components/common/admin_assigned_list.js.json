{
    "sourceFile": "src/components/common/admin_assigned_list.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1713876983702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1713876983702,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\n// import SAlert from \"../common/sweetAlert\";\r\n// import { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Pagination from \"../common/pagination\";\r\nimport Loader from \"../common/loader\";\r\n// import { LiaUserEditSolid } from \"react-icons/lia\";\r\n// import { RiDeleteBin5Line } from \"react-icons/ri\";\r\nimport { getallAdminData } from \"../../api/api\";\r\nimport { MdFormatListBulletedAdd } from \"react-icons/md\";\r\nimport AgentsEmployee from \"./AgentEmployee\";\r\n// import ActivityTable from \"./activity_table\";\r\n\r\nexport default function Admin_assigned_list(props) {\r\n\r\n    /*Show modal states */\r\n    let [apiCall, setApiCall] = useState(false);\r\n    let [isLoading, setIsLoading] = useState(true);\r\n    const [AdminId, setAdminId] = useState();\r\n    /*data and id states */\r\n    const [adminData, setAdminData] = useState([]);\r\n    /*delete state */\r\n    //   const [deleteAlert, setDeleteAlert] = useState(false);\r\n    //   const [deleteId, setDeleteID] = useState();\r\n    //   const [deleteName, setDeleteName] = useState(\"\");\r\n    /*Pagination states */\r\n    const [totalData, setTotalData] = useState(\"\");\r\n    const [recordsPerPage] = useState(10);\r\n    /*Shorting states */\r\n    const [columnName /*, setcolumnName*/] = useState(\"admin_id\");\r\n    const [sortOrder /*, setSortOrder*/] = useState(\"DESC\");\r\n    /* Function to get Employee data*/\r\n    const getAdminData = async () => {\r\n        // const params = useParams();\r\n        setIsLoading(true);\r\n        try {\r\n            const userData = await getallAdminData(\r\n                \"\",\r\n                props.search,\r\n                props.pageNo,\r\n                recordsPerPage,\r\n                columnName,\r\n                sortOrder\r\n            );\r\n            if (userData.data === undefined || userData.data.length === 0) {\r\n                setAdminData([]);\r\n                setIsLoading(false);\r\n                setTotalData(0);\r\n            } else {\r\n                setAdminData(userData.data);\r\n                setTotalData(userData.total_rows);\r\n                // setAdminId(userData.data[0].admin_id);\r\n                //Condition to get the Employee of Agent id\r\n                const filteredItems = userData.data.filter(\r\n                    (item) => item.admin_employee_count !== (0 || \"0\")\r\n                );\r\n\r\n                if (filteredItems.length === 0) {\r\n                    setAdminId();\r\n                } else {\r\n                    // setAdminId 4: Get the First Item\r\n                    setAdminId(filteredItems[0].admin_id);\r\n                }\r\n                setIsLoading(false);\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n    /*Render function to get the employer*/\r\n    useEffect(() => {\r\n        getAdminData();\r\n        if (props.apiCall === true || apiCall === true) {\r\n            props.setApiCall(false);\r\n            setApiCall(false);\r\n            //   if (props.user === \"agent\") {\r\n            //     setAdminId(localStorage.getItem(\"agent_id\"));\r\n            //   } else {\r\n            //     setAdminId(\"\");\r\n            //   }\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [\r\n        props.search,\r\n        props.pageNo,\r\n        recordsPerPage,\r\n        columnName,\r\n        sortOrder,\r\n        props.apiCall,\r\n        apiCall,\r\n    ]);\r\n    /*To Show the delete alert box */\r\n    //   const ShowDeleteAlert = (e) => {\r\n    //     setDeleteID(e.id);\r\n    //     setDeleteName(e.name);\r\n    //     setDeleteAlert(true);\r\n    //   };\r\n\r\n    //   /*To cancel the delete alert box */\r\n    //   const CancelDelete = () => {\r\n    //     setDeleteAlert(false);\r\n    //   };\r\n\r\n    /*Function to open add Document up modal */\r\n    // const AddDoucument = (e) => {\r\n    //   setDocumentModal(true);\r\n    //   setemployeeId(e);\r\n    // };\r\n    // /*\r\n    /*To call Api to delete employee */\r\n    //   async function OnDeleteAgent(e) {\r\n    //     try {\r\n    //       const responseData = await DeleteAgent(e);\r\n    //       if (responseData.message === \"successfully\") {\r\n    //         toast.error(\"Partner deleted Successfully\", {\r\n    //           position: toast.POSITION.TOP_RIGHT,\r\n    //           autoClose: 1000,\r\n    //         });\r\n    //         setDeleteAlert(false);\r\n    //         setApiCall(true);\r\n    //         props.setApiCall(true);\r\n    //       }\r\n    //     } catch (err) {\r\n    //       console.log(err);\r\n    //     }\r\n    //   }\r\n\r\n    /*Pagination Calculation */\r\n    const nPages = Math.ceil(totalData / recordsPerPage);\r\n\r\n    /*Sorting Function */\r\n    // const handleSort = (columnName) => {\r\n    //   setSortOrder(sortOrder === \"DESC\" ? \"ASC\" : \"DESC\");\r\n    //   setcolumnName(columnName);\r\n    // };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"bg-white rounded p-4\">\r\n                <div className=\"table-responsive main_table_div\">\r\n                    {isLoading ? (\r\n                        <Loader />\r\n                    ) : (\r\n                        <>\r\n                            {(adminData || []).map((data) => (\r\n                                <div className=\"rounded bg-light p-4 mb-1\">\r\n                                    <div\r\n                                        className=\"d-flex align-items-center position-relative\"\r\n                                        key={data.id}\r\n                                    >\r\n                                        {data.profile_image === null ? (\r\n                                            <img\r\n                                                src=\"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\"\r\n                                                alt=\"UserName\"\r\n                                                className=\"rounded\"\r\n                                                width=\"90px\"\r\n                                                height=\"90px\"\r\n                                            />\r\n                                        ) : (\r\n                                            <img\r\n                                                src={data.profile_image}\r\n                                                className=\"rounded\"\r\n                                                alt={data.name}\r\n                                                width=\"90px\"\r\n                                                height=\"90px\"\r\n                                            />\r\n                                        )}\r\n                                        <div className=\"ml-5 w-100\">\r\n                                            <h5 className=\"mb-0 text-capitalize line-height-1 text-break\">\r\n                                                {data.name === null ||\r\n                                                    data.name === undefined ||\r\n                                                    data.name === \"undefined\" ||\r\n                                                    data.name === \"\"\r\n                                                    ? \"N/A\"\r\n                                                    : data.name}\r\n                                            </h5>\r\n                                            <hr className=\"my-3\" />\r\n                                            <div className=\"m-0 age_gender d-flex align-items-center\">\r\n                                                <span className=\"bg-secondary rounded-pill font-size-3 px-3 py-2 text-white mr-2\">\r\n                                                    {data.admin_id}\r\n                                                </span>\r\n                                                <span className=\"bg-info rounded-pill font-size-3 px-3 py-2 text-white mr-2\">\r\n                                                    {data.contact_no}\r\n                                                </span>\r\n                                                <span className=\"bg-warning rounded-pill font-size-3 px-3 py-2 text-white mr-2\">\r\n                                                    {data.email}\r\n                                                </span>\r\n                                                <span className=\"bg-primary rounded-pill font-size-3 px-3 py-2 text-white mr-2 text-capitalize\">\r\n                                                    {` ${data.admin_type}`}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"partner_action_div ml-5 \">\r\n                                            <button\r\n                                                className=\"font-size-3 text-break btn btn-outline-secondary btn-rounded px-4 action_btn m-1\"\r\n                                                onClick={() => {\r\n                                                    setAdminId(data.admin_id);\r\n                                                }}\r\n                                                title=\"View Employees\"\r\n                                                disabled={data.admin_employee_count === \"0\" || 0}\r\n                                            >\r\n                                                <MdFormatListBulletedAdd /> {\"View Employees\"}\r\n                                                {/* <i className=\"fa fa-list\"></i> */}\r\n                                            </button>\r\n                                            {/* <button\r\n                      className=\"font-size-3 text-break btn btn-outline-secondary btn-rounded px-4 action_btn m-1\"\r\n                      onClick={() => props.EditAgent(data.id)}\r\n                      title=\"Edit Admin\"\r\n                    >\r\n                      <LiaUserEditSolid /> {\"Edit Admin\"}\r\n                    </button>\r\n                    <button\r\n                      className={ \"font-size-3 text-break btn btn-outline-secondary btn-rounded px-4 action_btn m-1\"\r\n                      }\r\n                      onClick={() => ShowDeleteAlert(data)}\r\n                      title=\"Delete Admin\"\r\n                    >\r\n                      <RiDeleteBin5Line /> {\"Delete Admin\"}\r\n                    </button> */}\r\n                                        </div>\r\n                                    </div>\r\n                                    {data.admin_id === AdminId\r\n                                        && data.admin_employee_count !== (0 || \"0\")\r\n                                        ? (\r\n                                            <div className=\"row\">\r\n                                                {/* <!-- Admin by emmployee --> */}\r\n                                                <div className=\"col-md-6\">\r\n                                                    <AgentsEmployee\r\n                                                        AdminId={AdminId}\r\n                                                        apiCall={apiCall}\r\n                                                        setApiCall={setApiCall}\r\n                                                        heading={\"Dashboard\"}\r\n                                                        user_of_page={\"assignedUser\"}\r\n                                                    />\r\n                                                </div>\r\n                                                {/* <div className=\"col-md-6\">\r\n                                                    <ActivityTable\r\n                                                        user_id={AdminId}\r\n                                                        user_type={data.admin_type}\r\n                                                        hide={true}\r\n                                                    />\r\n                                                </div> */}\r\n                                            </div>\r\n                                        ) : null}\r\n                                </div>\r\n                            ))}\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <div className=\"pt-2\">\r\n                    <Pagination\r\n                        nPages={nPages}\r\n                        currentPage={props.pageNo}\r\n                        setCurrentPage={props.setpageNo}\r\n                        total={totalData}\r\n                        count={adminData.length}\r\n                    />\r\n                </div>\r\n            </div>\r\n            {/* <SAlert\r\n      show={deleteAlert}\r\n      title={deleteName}\r\n      text=\"Are you Sure you want to delete !\"\r\n      onConfirm={() => OnDeleteAgent(deleteId)}\r\n      showCancelButton={true}\r\n      onCancel={CancelDelete}\r\n    /> */}\r\n        </>)\r\n}\r\n"
        }
    ]
}
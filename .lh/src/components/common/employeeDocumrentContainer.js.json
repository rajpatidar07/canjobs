{
    "sourceFile": "src/components/common/employeeDocumrentContainer.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1708929026448,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1708929032662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -525,9 +525,9 @@\n       });\r\n     } else {\r\n       // Check the number of files selected\r\n       if (files.length > 30) {\r\n-        toast.error(\"You can only upload a maximum of 15 files at a time\", {\r\n+        toast.error(\"You can only upload a maximum of 30 files at a time\", {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n         });\r\n         return;\r\n"
                },
                {
                    "date": 1709200794718,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -807,8 +807,10 @@\n       setShowSaveDoc(false);\r\n       setHide(false);\r\n       setBulkUpload(\"\");\r\n       setShowMoreDocType(false);\r\n+      setEditName(false)\r\n+\r\n     }\r\n   };\r\n   /*Fuinction to render image */\r\n   const RenderNewDocFile = () => {\r\n"
                },
                {
                    "date": 1709361195856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n   const [bulkUpload, setBulkUpload] = useState(\"\");\r\n   const [loading, setLoading] = useState(true);\r\n   // Notification states to send in notificaion component\r\n   const [notificationDoc, setNotificationDoc] = useState(props.docId ? 1 : 0);\r\n-  const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n+  // const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n   // let encoded;\r\n   let user_type = localStorage.getItem(\"userType\");\r\n   let admin_id = localStorage.getItem(\"admin_id\");\r\n   // Annotation State\r\n@@ -241,10 +241,10 @@\n         props.docId &&\r\n           localStorage.getItem(\"notificationUser\") === props.employee_id\r\n           ? \"\"\r\n           : selectDocTypeName\r\n-          ? selectDocTypeName\r\n-          : \"\"\r\n+            ? selectDocTypeName\r\n+            : \"\"\r\n       );\r\n \r\n       if (\r\n         response.data.data === undefined ||\r\n@@ -299,9 +299,9 @@\n               );\r\n               setDocFile(\r\n                 response.data.data.allData.find((item) => item.id === docId)\r\n                   .document_url +\r\n-                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+                `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n               );\r\n               setDocTypeName(\r\n                 response.data.data.allData.find((item) => item.id === docId)\r\n                   .type\r\n@@ -323,9 +323,9 @@\n               // eslint-disable-next-line\r\n               setDocTypData(response.data.data.allData[0]);\r\n               setDocFile(\r\n                 response.data.data.allData[0].document_url +\r\n-                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+                `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n               );\r\n               setDocName(response.data.data.allData[0].document_name);\r\n               setDocId(response.data.data.allData[0].id);\r\n               setDocTypeName(response.data.data.allData[0].type);\r\n@@ -362,9 +362,9 @@\n                 setDocFile(\r\n                   response.data.data.allData.find(\r\n                     (item) => item.document_name === docName\r\n                   ).document_url +\r\n-                    `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n                 );\r\n                 setDocTypeName(\r\n                   response.data.data.allData.find(\r\n                     (item) => item.document_name === docName\r\n@@ -383,9 +383,9 @@\n                 );\r\n                 setDocFile(\r\n                   response.data.data.allData.find((item) => item.id === docId)\r\n                     .document_url +\r\n-                    `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n                 );\r\n                 setDocName(\r\n                   response.data.data.allData.find((item) => item.id === docId)\r\n                     .document_name\r\n@@ -573,11 +573,10 @@\n         const encoded = await convertToBase64(file);\r\n         const base64Name = encoded.base64;\r\n \r\n         // Construct file object with base64 data\r\n-        const DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${\r\n-          base64Name.split(\";\")[1]\r\n-        }`;\r\n+        const DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${base64Name.split(\";\")[1]\r\n+          }`;\r\n \r\n         // Use DocRealName as the key for DocFile\r\n         DocRealName = file.name.split(\".\")[0].replace(/ /g, \"_\");\r\n         fileList.push({\r\n@@ -829,9 +828,9 @@\n                 debounce={false}\r\n               >\r\n                 {docTypData &&\r\n                   (docTypData.document_name &&\r\n-                  docTypData.document_name.toLowerCase().includes(\"imm\") ? (\r\n+                    docTypData.document_name.toLowerCase().includes(\"imm\") ? (\r\n                     <iframe\r\n                       src={docFile}\r\n                       style={{ height: \"calc(100vh - 200px)\" }}\r\n                       width={\"100%\"}\r\n@@ -844,10 +843,10 @@\n                         docFileExt\r\n                           ? docFileExt\r\n                           : docTypData.extension_type ===\r\n                             \"vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n-                          ? \"docx\"\r\n-                          : docTypData.extension_type\r\n+                            ? \"docx\"\r\n+                            : docTypData.extension_type\r\n                       }\r\n                       filePath={docFile}\r\n                       errorComponent={() => <div>Error loading document</div>}\r\n                     />\r\n@@ -921,34 +920,45 @@\n       console.log(err);\r\n     }\r\n   };\r\n   /*Type array */\r\n-  let DocTypeData = [\r\n-    \"passport\",\r\n-    \"drivers_license\",\r\n-    \"photograph\",\r\n-    \"immigration_status\",\r\n-    \"lmia\",\r\n-    \"job_offer_letter\",\r\n-    \"provincial_nominee_letter\",\r\n-    \"proof_of_funds\",\r\n-    \"proof_of_employment\",\r\n-    \"marriage_certificate\",\r\n-    \"education_metric\",\r\n-    \"education_higher_secondary\",\r\n-    \"education_graduation\",\r\n-    \"education_post_graduation\",\r\n-    \"resume_or_cv\",\r\n-    \"ielts\",\r\n-    \"medical\",\r\n-    \"police_clearance\",\r\n-    \"refusal_letter\",\r\n-    \"Employment Contract\",\r\n-    \"Reference Letters\",\r\n-    \"Client Info\",\r\n-    \"Representative Submission Letter\",\r\n-    \"Bank Statement\",\r\n-  ];\r\n+  let DocTypeData = props.emp_user_type === \"employer\" ?\r\n+    [\"Business T2\",\r\n+      \"Recent PD7A\",\r\n+      \"Business T4\",\r\n+      \"Business Incorporation Certificate\",\r\n+      \"Schedule A\",\r\n+      \"Provincial Business Certificate\",\r\n+      \"Representative Submission Letter\",\r\n+      \"Employment Contract\",\r\n+      \"Offer of Employment\",\r\n+      \"LMIA Summary\",\r\n+      \"LMIA Decision Letter\",] : [\r\n+      \"passport\",\r\n+      \"drivers_license\",\r\n+      \"photograph\",\r\n+      \"immigration_status\",\r\n+      \"lmia\",\r\n+      \"job_offer_letter\",\r\n+      \"provincial_nominee_letter\",\r\n+      \"proof_of_funds\",\r\n+      \"proof_of_employment\",\r\n+      \"marriage_certificate\",\r\n+      \"education_metric\",\r\n+      \"education_higher_secondary\",\r\n+      \"education_graduation\",\r\n+      \"education_post_graduation\",\r\n+      \"resume_or_cv\",\r\n+      \"ielts\",\r\n+      \"medical\",\r\n+      \"police_clearance\",\r\n+      \"refusal_letter\",\r\n+      \"Employment Contract\",\r\n+      \"Reference Letters\",\r\n+      \"Client Info\",\r\n+      \"Representative Submission Letter\",\r\n+      \"Bank Statement\",\r\n+    ];\r\n   //UseEfect for document\r\n   useEffect(() => {\r\n     GetDocument();\r\n     RenderNewDocFile();\r\n@@ -1052,27 +1062,27 @@\n     let assignedAdminName = allAdmin.filter((item) =>\r\n       selectedAdmin.includes(item.email)\r\n     )\r\n       ? allAdmin\r\n-          .filter((item) => selectedAdmin.includes(item.email))\r\n-          .map((admin) => admin.name)\r\n-          .join(\",\")\r\n+        .filter((item) => selectedAdmin.includes(item.email))\r\n+        .map((admin) => admin.name)\r\n+        .join(\",\")\r\n       : \"\";\r\n     const assignedUserId = allAdmin.filter((item) =>\r\n       selectedAdmin.includes(item.email)\r\n     )\r\n       ? allAdmin\r\n-          .filter((item) => selectedAdmin.includes(item.email))\r\n-          .map((admin) => admin.admin_id)\r\n-          .join(\",\")\r\n+        .filter((item) => selectedAdmin.includes(item.email))\r\n+        .map((admin) => admin.admin_id)\r\n+        .join(\",\")\r\n       : \"\";\r\n     const assignedUserType = allAdmin.filter((item) =>\r\n       selectedAdmin.includes(item.email)\r\n     )\r\n       ? allAdmin\r\n-          .filter((item) => selectedAdmin.includes(item.email))\r\n-          .map((admin) => admin.admin_type)\r\n-          .join(\",\")\r\n+        .filter((item) => selectedAdmin.includes(item.email))\r\n+        .map((admin) => admin.admin_type)\r\n+        .join(\",\")\r\n       : \"\";\r\n \r\n     // Send data to the API\r\n     if (comment === \"\" && email === \"\") {\r\n@@ -1240,26 +1250,26 @@\n     let assignedAdminName = allAdmin.filter((item) =>\r\n       selectedAdminReply.includes(item.email)\r\n     )\r\n       ? allAdmin\r\n-          .filter((item) => selectedAdminReply.includes(item.email))\r\n-          .map((admin) => admin.name)\r\n-          .join(\",\")\r\n+        .filter((item) => selectedAdminReply.includes(item.email))\r\n+        .map((admin) => admin.name)\r\n+        .join(\",\")\r\n       : \"\";\r\n     const assignedUserId = allAdmin.filter((item) =>\r\n       selectedAdminReply.includes(item.email)\r\n     )\r\n       ? allAdmin\r\n-          .filter((item) => selectedAdminReply.includes(item.email))\r\n-          .map((admin) => admin.admin_id)\r\n-          .join(\",\")\r\n+        .filter((item) => selectedAdminReply.includes(item.email))\r\n+        .map((admin) => admin.admin_id)\r\n+        .join(\",\")\r\n       : \"\";\r\n     const AdminType = //localStorage.getItem(\"admin_type\");\r\n       allAdmin.filter((item) => selectedAdminReply.includes(item.email))\r\n         ? allAdmin\r\n-            .filter((item) => selectedAdminReply.includes(item.email))\r\n-            .map((admin) => admin.admin_type)\r\n-            .join(\",\")\r\n+          .filter((item) => selectedAdminReply.includes(item.email))\r\n+          .map((admin) => admin.admin_type)\r\n+          .join(\",\")\r\n         : \"\";\r\n     if (replyComment === \"\" && email === \"\") {\r\n       toast.error(\"Comment or email cannot be empty!\", {\r\n         position: toast.POSITION.TOP_RIGHT,\r\n@@ -1340,11 +1350,11 @@\n           setSelecttDocTypeName={setSelecttDocTypeName}\r\n           docAllTypes={docAllTypes}\r\n           setDocTypeName={setDocTypeName}\r\n           userId={props.employee_id}\r\n-          // setNotificationDoc={setNotificationDoc}\r\n-          // notificationApiCall={notificationApiCall}\r\n-          // setNotificationApiCall={setNotificationApiCall}\r\n+        // setNotificationDoc={setNotificationDoc}\r\n+        // notificationApiCall={notificationApiCall}\r\n+        // setNotificationApiCall={setNotificationApiCall}\r\n         />\r\n         {/* Document view */}\r\n         <ViewDocument\r\n           handleBulkFileChange={handleBulkFileChange}\r\n@@ -1395,18 +1405,18 @@\n         {/* Annotation  */}\r\n         <div className=\"col-md-3 px-2 py-2 comments_and_replies\">\r\n           {/* Add Annotation form */}\r\n           {!hide &&\r\n-          docFile &&\r\n-          docName &&\r\n-          user_type === \"admin\" &&\r\n-          selectedAnnotation && //condition for imm pdf\r\n-          (docTypData.document_name &&\r\n-          docTypData.document_name.toLowerCase().includes(\"imm\")\r\n-            ? replyCommentClick === undefined ||\r\n+            docFile &&\r\n+            docName &&\r\n+            user_type === \"admin\" &&\r\n+            selectedAnnotation && //condition for imm pdf\r\n+            (docTypData.document_name &&\r\n+              docTypData.document_name.toLowerCase().includes(\"imm\")\r\n+              ? replyCommentClick === undefined ||\r\n               replyCommentClick === \"\" ||\r\n               replyCommentClick === null\r\n-            : addCommentFlag === true) ? (\r\n+              : addCommentFlag === true) ? (\r\n             <div\r\n               style={\r\n                 {\r\n                   // position: \"absolute\",\r\n"
                },
                {
                    "date": 1709361351785,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -925,15 +925,19 @@\n     [\"Business T2\",\r\n       \"Recent PD7A\",\r\n       \"Business T4\",\r\n       \"Business Incorporation Certificate\",\r\n+      \"Employment Contract\",\r\n       \"Schedule A\",\r\n-      \"Provincial Business Certificate\",\r\n-      \"Representative Submission Letter\",\r\n-      \"Employment Contract\",\r\n-      \"Offer of Employment\",\r\n-      \"LMIA Summary\",\r\n-      \"LMIA Decision Letter\",] : [\r\n+      \"Signed Job Offer\",\r\n+      \"PD7A of year\",\r\n+      \"T2 Schedule 100 and 125\",\r\n+      \"Certificate of incorporation, \",\r\n+      \"Business license\",\r\n+      \"T4 summary of year\",\r\n+      \"Request for Exception from English Language Requirement for LMIA Application\",\r\n+      \"CPA Attestation Letter\",\r\n+      \"Representative Submission Letter\",] : [\r\n       \"passport\",\r\n       \"drivers_license\",\r\n       \"photograph\",\r\n       \"immigration_status\",\r\n"
                },
                {
                    "date": 1710306217511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,8 +42,9 @@\n   const [showSaveDoc, setShowSaveDoc] = useState(false);\r\n   const [hide, setHide] = useState(false);\r\n   const [bulkUpload, setBulkUpload] = useState(\"\");\r\n   const [loading, setLoading] = useState(true);\r\n+  const [loadingBtn, setLoadingBtn] = useState(true);\r\n   // Notification states to send in notificaion component\r\n   const [notificationDoc, setNotificationDoc] = useState(props.docId ? 1 : 0);\r\n   // const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n   // let encoded;\r\n@@ -675,8 +676,9 @@\n   //   }\r\n   // };\r\n   /* Upload documents in bulk*/\r\n   let SaveBulkDocument = async () => {\r\n+    setLoadingBtn(true)\r\n     try {\r\n       let response = await UploadBulkDocument(\r\n         props.employee_id,\r\n         docFileBase,\r\n@@ -714,8 +716,9 @@\n             position: toast.POSITION.TOP_RIGHT,\r\n             autoClose: 2000,\r\n           });\r\n         }\r\n+        setLoadingBtn(false)\r\n         setShowMoreDocType(false);\r\n         setOtherDoc(false);\r\n         setDocName(docName);\r\n         setBulkUpload(\"\");\r\n@@ -731,8 +734,9 @@\n         toast.success(\"Document Updated Successfully\", {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n         });\r\n+        setLoadingBtn(false)\r\n         setEditName(false);\r\n         setDocId(docData[0] === docTypData ? docTypData.id : docId);\r\n         setShowMoreDocType(false);\r\n         setOtherDoc(false);\r\n@@ -767,8 +771,9 @@\n         toast.error(\"Document type is not valid\", {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n         });\r\n+        setLoadingBtn(false)\r\n         setApiCall(true);\r\n         setHide(false);\r\n         setBulkUpload(\"\");\r\n         setShowSaveDoc(false);\r\n@@ -780,8 +785,9 @@\n         toast.error(\"All fields are required !\", {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n         });\r\n+        setLoadingBtn(false)\r\n         setApiCall(true);\r\n         setShowSaveDoc(false);\r\n         setHide(false);\r\n         setBulkUpload(\"\");\r\n@@ -790,8 +796,9 @@\n         toast.error(\"Token expires, please log in again.\", {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n         });\r\n+        setLoadingBtn(false)\r\n         setApiCall(true);\r\n         setHide(false);\r\n         setShowSaveDoc(false);\r\n         setBulkUpload(\"\");\r\n@@ -801,8 +808,9 @@\n       toast.error(\"Something went wrong try again later!\", {\r\n         position: toast.POSITION.TOP_RIGHT,\r\n         autoClose: 1000,\r\n       });\r\n+      setLoadingBtn(false)\r\n       setApiCall(true);\r\n       setShowSaveDoc(false);\r\n       setHide(false);\r\n       setBulkUpload(\"\");\r\n"
                },
                {
                    "date": 1710306371696,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,1538 @@\n+import React, { useState, useRef } from \"react\";\r\n+// import { Form } from \"react-bootstrap\";\r\n+import Loader from \"./loader\";\r\n+import {\r\n+  // UploadDocument,\r\n+  UploadBulkDocument,\r\n+  GetEmployeeDocumentList,\r\n+  VarifyDocument,\r\n+  ADocAnnotation,\r\n+  GetCommentsAndAssign,\r\n+  getallAdminData,\r\n+  UpdateDocuentcommentAssign,\r\n+  // DeleteCommentsAndAssign,\r\n+  DeleteDocument,\r\n+  SendReplyCommit,\r\n+  GetReplyCommit,\r\n+} from \"../../api/api\";\r\n+import LazyLoad from \"react-lazy-load\";\r\n+import { toast } from \"react-toastify\";\r\n+import FileViewer from \"react-file-viewer\";\r\n+import { useEffect } from \"react\";\r\n+import Verified from \"../../media/verified.png\";\r\n+/*Annotation */\r\n+import CommentBox from \"./CommentBox\";\r\n+import DocumentList from \"./DocumentList\";\r\n+import ViewDocument from \"./ViewDocument\";\r\n+export default function DocumrentContainer(props) {\r\n+  const [otherDoc, setOtherDoc] = useState(false);\r\n+  const [docName, setDocName] = useState(\"\");\r\n+  const [editName, setEditName] = useState(false);\r\n+  const [docData, setDocData] = useState([]);\r\n+  const [docAllTypes, setDocAllTypes] = useState([]);\r\n+  const [docTypData, setDocTypData] = useState(\"\");\r\n+  const [apiCall, setApiCall] = useState(\"\");\r\n+  const [docFile, setDocFile] = useState(\"\");\r\n+  const [docFileBase, setDocFileBase] = useState(\"\");\r\n+  const [docFileExt, setDocFileExt] = useState(\"\");\r\n+  const [docId, setDocId] = useState(props.docId ? props.docId : \"\");\r\n+  const [docTypeName, setDocTypeName] = useState(\"\");\r\n+  const [selectDocTypeName, setSelecttDocTypeName] = useState(\"\");\r\n+  const [showMoreDocType, setShowMoreDocType] = useState(false);\r\n+  const [showSaveDoc, setShowSaveDoc] = useState(false);\r\n+  const [hide, setHide] = useState(false);\r\n+  const [bulkUpload, setBulkUpload] = useState(\"\");\r\n+  const [loading, setLoading] = useState(true);\r\n+  const [loadingBtn, setLoadingBtn] = useState(true);\r\n+  // Notification states to send in notificaion component\r\n+  const [notificationDoc, setNotificationDoc] = useState(props.docId ? 1 : 0);\r\n+  // const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n+  // let encoded;\r\n+  let user_type = localStorage.getItem(\"userType\");\r\n+  let admin_id = localStorage.getItem(\"admin_id\");\r\n+  // Annotation State\r\n+  const [commenAapiCall, setCommentApiCall] = useState(\"\");\r\n+  const [imageAnnotations, setImageAnnotations] = useState([]);\r\n+  const [comments, setComments] = useState(\"\");\r\n+  const [replyComment, setReplyComment] = useState(\"\");\r\n+  const [commentsList, setCommentsList] = useState([]);\r\n+  const [selectedAnnotation, setSelectedAnnotation] = useState(null);\r\n+  const [isAnnotationMode, setAnnotationMode] = useState(false);\r\n+  let [allAdmin, setAllAdmin] = useState([]);\r\n+  let [adminid, setAdminId] = useState();\r\n+  const [selectedAdmin, setSelectedAdmin] = useState(\"\");\r\n+  const [selectedAdminReply, setSelectedAdminReplye] = useState(\"\");\r\n+  const [addCommentFlag, setAddCommentFlag] = useState(false);\r\n+  const [filteredEmails, setFilteredEmails] = useState([]);\r\n+  const fileViewerRef = useRef(null);\r\n+  let [annotationStatus, setAnnotationStatus] = useState();\r\n+  let [replyCommentClick, setReplyCommentClick] = useState();\r\n+  const [commentsReplyList, setCommentsReplyList] = useState([]);\r\n+  /*Function to get admin list */\r\n+  const AdminData = async () => {\r\n+    try {\r\n+      const userData = await getallAdminData();\r\n+      if (userData.data.length === 0) {\r\n+        setAllAdmin([]);\r\n+      } else {\r\n+        // const filteredData = userData.data.filter(item => item.admin_type === \"manager\");\r\n+        setAllAdmin(userData.data);\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+\r\n+  /*onchange Function to set email or any other comment  */\r\n+  const handleInputChange = (event, type) => {\r\n+    // const value = event.target.value;\r\n+    // console.log(value.startsWith(\"@\"), value.includes(\" @\"));\r\n+    // if (value.startsWith(\"@\")) {\r\n+    // AdminData();\r\n+    // if (allAdmin) {\r\n+    //   // Filter admin emails based on input\r\n+    //   let filteredAdminEmails = allAdmin.filter((admin) =>\r\n+    //     admin.email.toLowerCase().includes(value.slice(1).toLowerCase())\r\n+    //   );\r\n+\r\n+    //   // Update the filtered emails\r\n+    //   setFilteredEmails(filteredAdminEmails);\r\n+    // }\r\n+    // } else {\r\n+    //   // Reset filtered emails if input doesn't start with '@'\r\n+    //   setFilteredEmails([]);\r\n+    // }\r\n+\r\n+    // // Update the input value\r\n+    // if (type === \"reply\") {\r\n+    //   setReplyComment(value);\r\n+    // } else {\r\n+    //   setComments(value);\r\n+    // }\r\n+    const inputValue = event.target.value;\r\n+    // Update the input value\r\n+    if (type === \"reply\") {\r\n+      setReplyComment(inputValue);\r\n+    } else {\r\n+      setComments(inputValue);\r\n+    }\r\n+\r\n+    let lastChar = inputValue.slice(-1);\r\n+    const atIndex = inputValue.indexOf(\"@\");\r\n+\r\n+    if (lastChar === \"@\" || inputValue.includes(\"@\")) {\r\n+      AdminData();\r\n+      if (allAdmin) {\r\n+        // Filter admin emails based on input\r\n+        let filteredAdminEmails = allAdmin.filter((admin) =>\r\n+          admin.email.toLowerCase().includes(\r\n+            String(inputValue)\r\n+              .substring(atIndex + 1)\r\n+              .toLowerCase()\r\n+          )\r\n+        );\r\n+\r\n+        // Update the filtered emails\r\n+        setFilteredEmails(filteredAdminEmails);\r\n+      }\r\n+    } else {\r\n+      setFilteredEmails([]);\r\n+    }\r\n+  };\r\n+  /*Function to get the email to assign */\r\n+  const handleEmailClick = (email, type) => {\r\n+    // Set the selected admin and update the input value\r\n+    if (type === \"reply\") {\r\n+      setSelectedAdminReplye((prevValue) => prevValue + email + \",\");\r\n+      setReplyComment((prevValue) => `${prevValue} ${email} `);\r\n+    } else {\r\n+      setSelectedAdmin((prevValue) => prevValue + email + \",\");\r\n+      setComments((prevValue) => `${prevValue} ${email} `);\r\n+    }\r\n+    setFilteredEmails([]);\r\n+  };\r\n+  /*Function to get the email to input on hover */\r\n+  const handleEmailMouseOver = (email, type) => {\r\n+    // Highlight the email on mouseover\r\n+    if (type === \"reply\") {\r\n+      setSelectedAdminReplye(email);\r\n+    } else {\r\n+      setSelectedAdmin(email);\r\n+    }\r\n+  };\r\n+  // Handle click event on the FileViewer to capture annotations\r\n+  const handleFileViewerClick = (e) => {\r\n+    if (isAnnotationMode) {\r\n+      const rect = fileViewerRef.current.getBoundingClientRect();\r\n+      const x_axis = e.clientX - rect.left;\r\n+      const y_axis = e.clientY - rect.top;\r\n+      handleFlagClick({ x_axis, y_axis });\r\n+      setImageAnnotations([...imageAnnotations, { x_axis, y_axis }]);\r\n+      setAddCommentFlag(true);\r\n+    }\r\n+  };\r\n+\r\n+  // Handle flag click to select the annotation and toggle the form visibility for image annotation\r\n+  const handleFlagClick = (annotation) => {\r\n+    // if (\r\n+    //   selectedAnnotation &&\r\n+    //   selectedAnnotation.x === annotation.x &&\r\n+    //   selectedAnnotation.y === annotation.y\r\n+    // ) {\r\n+    //   setSelectedAnnotation(null);\r\n+    // } else {\r\n+    setSelectedAnnotation(annotation);\r\n+    // }\r\n+  };\r\n+  // Generate a list of comments from the state for image annotation\r\n+  const getCommentsList = async () => {\r\n+    if (docId || (docData && docData.find((item) => item.type === docName))) {\r\n+      try {\r\n+        let res = await GetCommentsAndAssign(\r\n+          docId ? docId : docData.find((item) => item.type === docName).id,\r\n+          adminid,\r\n+          annotationStatus,\r\n+          \"document\"\r\n+        );\r\n+        if (res.data.status === (1 || \"1\")) {\r\n+          setCommentsList(res.data.data.data);\r\n+          setImageAnnotations(res.data.data.data);\r\n+        } else if (res.data.message === \"Task data not found\") {\r\n+          setCommentsList([]);\r\n+          setImageAnnotations([]);\r\n+        }\r\n+      } catch (err) {\r\n+        console.log(err);\r\n+        setCommentsList([]);\r\n+        setImageAnnotations([]);\r\n+      }\r\n+    } else {\r\n+      setCommentsList([]);\r\n+      setImageAnnotations([]);\r\n+    }\r\n+  };\r\n+\r\n+  // Generate a list of comments reply\r\n+  const getCommentsReplyList = async () => {\r\n+    if (docId || docData.find((item) => item.type === docName)) {\r\n+      try {\r\n+        let res = await GetReplyCommit(\r\n+          docId ? docId : docData.find((item) => item.type === docName).id,\r\n+          adminid,\r\n+          annotationStatus\r\n+        );\r\n+        if (res.data.status === (1 || \"1\")) {\r\n+          setCommentsReplyList(res.data.data);\r\n+        }\r\n+      } catch (err) {\r\n+        console.log(err);\r\n+        setCommentsReplyList([]);\r\n+      }\r\n+    } else {\r\n+      setCommentsReplyList([]);\r\n+    }\r\n+  };\r\n+  /*Annotaton functionalites close */\r\n+  /*Functo get Applicants Document */\r\n+  const GetDocument = async (del) => {\r\n+    try {\r\n+      let response = await GetEmployeeDocumentList(\r\n+        props.employee_id,\r\n+        props.emp_user_type,\r\n+        props.docId &&\r\n+          localStorage.getItem(\"notificationUser\") === props.employee_id\r\n+          ? \"\"\r\n+          : selectDocTypeName\r\n+            ? selectDocTypeName\r\n+            : \"\"\r\n+      );\r\n+\r\n+      if (\r\n+        response.data.data === undefined ||\r\n+        response.data.data === \"\" ||\r\n+        response.data.data === null ||\r\n+        response.data.data.length === 0 ||\r\n+        response.data.message === \"No data found\"\r\n+      ) {\r\n+        setDocData([]);\r\n+        setLoading(false);\r\n+      } else {\r\n+        {\r\n+          if (\r\n+            response.data.data.allData.length === 0 ||\r\n+            response.data.data.allData === undefined ||\r\n+            response.data.data.allData === \"\" ||\r\n+            response.data.data.allData === null\r\n+          ) {\r\n+            setDocData([]);\r\n+          } else {\r\n+            setDocData(response.data.data.allData);\r\n+          }\r\n+          if (\r\n+            response.data.data.all_types.length === 0 ||\r\n+            response.data.data.all_types === undefined ||\r\n+            response.data.data.all_types === \"\" ||\r\n+            response.data.data.all_types === null\r\n+          ) {\r\n+            setDocAllTypes([]);\r\n+          } else {\r\n+            setDocAllTypes(response.data.data.all_types);\r\n+          }\r\n+          setLoading(false);\r\n+          if (notificationDoc === 1) {\r\n+            // Condition for Open document fromnotification\r\n+            setNotificationDoc(0);\r\n+\r\n+            if (response.data.data.allData.find((item) => item.id === docId)) {\r\n+              setSelecttDocTypeName(\r\n+                response.data.data.allData.find((item) => item.id === docId)\r\n+                  .type\r\n+              );\r\n+              setDocTypData(\r\n+                response.data.data.allData.find((item) => item.id === docId)\r\n+              );\r\n+              setDocName(\r\n+                response.data.data.allData.find((item) => item.id === docId)\r\n+                  .document_name\r\n+              );\r\n+              setDocId(\r\n+                response.data.data.allData.find((item) => item.id === docId).id\r\n+              );\r\n+              setDocFile(\r\n+                response.data.data.allData.find((item) => item.id === docId)\r\n+                  .document_url +\r\n+                `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+              );\r\n+              setDocTypeName(\r\n+                response.data.data.allData.find((item) => item.id === docId)\r\n+                  .type\r\n+              );\r\n+            } else {\r\n+              toast.error(\"Document not found\", {\r\n+                position: toast.POSITION.TOP_RIGHT,\r\n+                autoClose: 1000,\r\n+              });\r\n+            }\r\n+            setNotificationDoc(0);\r\n+          } else {\r\n+            if (\r\n+              docTypData === undefined ||\r\n+              docTypData === \"undefined\" ||\r\n+              (docTypData === \"\" && docName === \"\" && otherDoc === false) ||\r\n+              del === true\r\n+            ) {\r\n+              // eslint-disable-next-line\r\n+              setDocTypData(response.data.data.allData[0]);\r\n+              setDocFile(\r\n+                response.data.data.allData[0].document_url +\r\n+                `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+              );\r\n+              setDocName(response.data.data.allData[0].document_name);\r\n+              setDocId(response.data.data.allData[0].id);\r\n+              setDocTypeName(response.data.data.allData[0].type);\r\n+              setSelecttDocTypeName(response.data.data.allData[0].type);\r\n+              setNotificationDoc(0);\r\n+            } else if (\r\n+              showMoreDocType === false &&\r\n+              response.data.data.allData.find(\r\n+                (item) => item.document_name === docName\r\n+              )\r\n+            ) {\r\n+              if (\r\n+                response.data.data.allData.find(\r\n+                  (item) => item.document_name === docName\r\n+                ).document_name === docName\r\n+              ) {\r\n+                setNotificationDoc(0);\r\n+\r\n+                setDocTypData(\r\n+                  response.data.data.allData.find(\r\n+                    (item) => item.document_name === docName\r\n+                  )\r\n+                );\r\n+                setDocName(\r\n+                  response.data.data.allData.find(\r\n+                    (item) => item.document_name === docName\r\n+                  ).document_name\r\n+                );\r\n+                setDocId(\r\n+                  response.data.data.allData.find(\r\n+                    (item) => item.document_name === docName\r\n+                  ).id\r\n+                );\r\n+                setDocFile(\r\n+                  response.data.data.allData.find(\r\n+                    (item) => item.document_name === docName\r\n+                  ).document_url +\r\n+                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+                );\r\n+                setDocTypeName(\r\n+                  response.data.data.allData.find(\r\n+                    (item) => item.document_name === docName\r\n+                  ).type\r\n+                );\r\n+              }\r\n+            } else {\r\n+              //Condition for update\r\n+              if (\r\n+                response.data.data.allData.find((item) => item.id === docId)\r\n+              ) {\r\n+                setNotificationDoc(0);\r\n+\r\n+                setDocTypData(\r\n+                  response.data.data.allData.find((item) => item.id === docId)\r\n+                );\r\n+                setDocFile(\r\n+                  response.data.data.allData.find((item) => item.id === docId)\r\n+                    .document_url +\r\n+                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+                );\r\n+                setDocName(\r\n+                  response.data.data.allData.find((item) => item.id === docId)\r\n+                    .document_name\r\n+                );\r\n+                setDocId(\r\n+                  response.data.data.allData.find((item) => item.id === docId)\r\n+                    .id\r\n+                );\r\n+                setDocTypeName(\r\n+                  response.data.data.allData.find((item) => item.id === docId)\r\n+                    .type\r\n+                );\r\n+              } else {\r\n+                setDocTypData(\"\");\r\n+                setDocFile(\"\");\r\n+                setDocName(\"\");\r\n+                setDocId(\"\");\r\n+                setDocTypeName(\"\");\r\n+                setNotificationDoc(0);\r\n+              }\r\n+            }\r\n+          }\r\n+        }\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+      setLoading(false);\r\n+    }\r\n+  };\r\n+\r\n+  /*Function to convert file to base64 */\r\n+  const convertToBase64 = (file) => {\r\n+    return new Promise((resolve, reject) => {\r\n+      const fileReader = new FileReader();\r\n+      fileReader.addEventListener(\"load\", () => {\r\n+        resolve({ base64: fileReader.result });\r\n+      });\r\n+      fileReader.readAsDataURL(file);\r\n+      fileReader.onerror = (error) => {\r\n+        reject(error);\r\n+      };\r\n+    });\r\n+  };\r\n+\r\n+  /*Onchange function of SIngle update document */\r\n+  // const handleFileChange = async (event, id) => {\r\n+  //   const file = event.target.files[0];\r\n+  //   if (!file) {\r\n+  //     toast.error(\"No file selected\", {\r\n+  //       position: toast.POSITION.TOP_RIGHT,\r\n+  //       autoClose: 1000,\r\n+  //     });\r\n+  //     return;\r\n+  //   }\r\n+  //   // Check file type\r\n+  //   const allowedTypes = [\".pdf\", \".doc\", \".docx\", \".jpg\", \".jpeg\", \".png\"];\r\n+  //   const fileType = `.${file.name.split(\".\").pop()}`;\r\n+  //   if (!allowedTypes.includes(fileType.toLowerCase())) {\r\n+  //     toast.error(\r\n+  //       \"Invalid docum{ent type. Allowed types: PDF, DOC, DOCX, JPG, JPEG, PNG\",\r\n+  //       {\r\n+  //         position: toast.POSITION.TOP_RIGHT,\r\n+  //         autoClose: 1000,\r\n+  //       }\r\n+  //     );\r\n+  //     return;\r\n+  //   }\r\n+  //   // Check file size\r\n+  //   else if (file.size > 1024 * 8000) {\r\n+  //     toast.error(\"Document size can't be more than 8 mb\", {\r\n+  //       position: toast.POSITION.TOP_RIGHT,\r\n+  //       autoClose: 1000,\r\n+  //     });\r\n+  //     return;\r\n+  //   } else {\r\n+  //     const reader = new FileReader();\r\n+  //     // Read the file as a data URL\r\n+  //     reader.readAsDataURL(file);\r\n+  //     encoded = await convertToBase64(file);\r\n+  //     let base64Name = encoded.base64;\r\n+  //     let DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${\r\n+  //       base64Name.split(\";\")[1]\r\n+  //     }`;\r\n+  // setDocFile(base64Name);\r\n+  // setDocFileExt(fileType.slice(1));\r\n+  // setDocumentName(file.name.split(\".\")[0].replace(/ /g, \"_\"));\r\n+  // setDocFileBase(DocFile);\r\n+  //     setShowSaveDoc(true);\r\n+  //     // if (window.confirm(\"Are you sure you want to upload this document?\")) {\r\n+  //     //   let DocFile =\r\n+  //     //     `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${base64Name.split(\";\")[1]}`\r\n+  //     //   //Api to upload document\r\n+  //     //   let response = await UploadDocument(props.employee_id, docName, DocFile, id)\r\n+  //     //   if (response.data.message === \"inserted successfully\") {\r\n+  //     //     toast.success(\"Document uploaded Successfully\", {\r\n+  //     //       position: toast.POSITION.TOP_RIGHT,\r\n+  //     //       autoClose: 1000,\r\n+  //     //     });\r\n+  //     //     setShowMoreDocType(false)\r\n+  //     //     setDocName(docName)\r\n+  //     //     setApiCall(true)\r\n+  //     //   }\r\n+  //     //   if (response.data.message === \"updated successfully\") {\r\n+  //     //     toast.success(\"Document Updated Successfully\", {\r\n+  //     //       position: toast.POSITION.TOP_RIGHT,\r\n+  //     //       autoClose: 1000,\r\n+  //     //     });\r\n+  //     //     setShowMoreDocType(false)\r\n+  //     //     setApiCall(true)\r\n+  //     //     setDocTypData(docData.find((item) => item.type === docName))\r\n+  //     //     setDocFile(docData.find((item) => item.type === docName).document_url + `?v=${new Date().getMinutes() + new Date().getSeconds()}`)\r\n+  //     //   }\r\n+  //     //   if (response.data.message === \"Invalid base64-encoded data !\") {\r\n+  //     //     toast.error(\"Document type is not valid\", {\r\n+  //     //       position: toast.POSITION.TOP_RIGHT,\r\n+  //     //       autoClose: 1000,\r\n+  //     //     });\r\n+  //     //     setApiCall(true)\r\n+  //     //   }\r\n+  //     // } else {\r\n+  //     //   toast.error(\"Document update denied.\", {\r\n+  //     //     position: toast.POSITION.TOP_RIGHT,\r\n+  //     //     autoClose: 1000,\r\n+  //     //   });\r\n+  //     //   setApiCall(true);\r\n+  //     // }\r\n+  //   }\r\n+  // };\r\n+\r\n+  /*On change fnction to upload bulk document in 1 array*/\r\n+  const handleBulkFileChange = async (event, id) => {\r\n+    const files = event.target.files;\r\n+    if (docTypeName === \"\" && bulkUpload === \"no\") {\r\n+      toast.error(\"Please select Document type!\", {\r\n+        position: toast.POSITION.TOP_RIGHT,\r\n+        autoClose: 1000,\r\n+      });\r\n+    } else {\r\n+      // Check the number of files selected\r\n+      if (files.length > 30) {\r\n+        toast.error(\"You can only upload a maximum of 30 files at a time\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        return;\r\n+      }\r\n+\r\n+      // Continue with file validation and processing\r\n+      const allowedTypes = [\".pdf\", \".doc\", \".docx\", \".jpg\", \".jpeg\", \".png\"];\r\n+      const maxSize = 1024 * 8000; // 8 MB\r\n+\r\n+      const fileList = [];\r\n+      let DocRealName;\r\n+      for (let i = 0; i < files.length; i++) {\r\n+        const file = files[i];\r\n+\r\n+        // Check file type\r\n+        const fileType = `.${file.name.split(\".\").pop()}`;\r\n+        if (!allowedTypes.includes(fileType.toLowerCase())) {\r\n+          toast.error(\r\n+            `Invalid document type for file '${file.name}'. Allowed types: PDF, DOC, DOCX, JPG, JPEG, PNG`,\r\n+            {\r\n+              position: toast.POSITION.TOP_RIGHT,\r\n+              autoClose: 1000,\r\n+            }\r\n+          );\r\n+          return;\r\n+        }\r\n+\r\n+        // Check file size\r\n+        if (file.size > maxSize) {\r\n+          toast.error(\r\n+            `Document size can't be more than 8 MB for file '${file.name}'`,\r\n+            {\r\n+              position: toast.POSITION.TOP_RIGHT,\r\n+              autoClose: 1000,\r\n+            }\r\n+          );\r\n+          return;\r\n+        }\r\n+\r\n+        // Read file as data URL\r\n+        const reader = new FileReader();\r\n+        reader.readAsDataURL(file);\r\n+        const encoded = await convertToBase64(file);\r\n+        const base64Name = encoded.base64;\r\n+\r\n+        // Construct file object with base64 data\r\n+        const DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${base64Name.split(\";\")[1]\r\n+          }`;\r\n+\r\n+        // Use DocRealName as the key for DocFile\r\n+        DocRealName = file.name.split(\".\")[0].replace(/ /g, \"_\");\r\n+        fileList.push({\r\n+          type: docData[0] === docTypData ? docTypData.type : docTypeName,\r\n+          docName: DocRealName,\r\n+          docUrl: DocFile,\r\n+        });\r\n+      }\r\n+      // Store the object of files\r\n+      setDocFileBase(fileList);\r\n+      bulkUpload === \"no\" ? setDocName(DocRealName) : setDocName(\"\");\r\n+      setShowSaveDoc(true);\r\n+    }\r\n+  };\r\n+\r\n+  /*Function to save document */\r\n+  // const SaveDocument = async () => {\r\n+  //   try {\r\n+  //     let response = await UploadDocument(\r\n+  //       props.employee_id,\r\n+  //       docData[0] === docTypData ? docTypData.type : docName,\r\n+  //       docFileBase,\r\n+  //       docData[0] === docTypData ? docTypData.id : docId,\r\n+  //       documentName\r\n+  //     );\r\n+  //     if (response.data.message === \"inserted successfully\") {\r\n+  //       toast.success(\"Document uploaded Successfully\", {\r\n+  //         position: toast.POSITION.TOP_RIGHT,\r\n+  //         autoClose: 1000,\r\n+  //       });\r\n+  //       setShowMoreDocType(false);\r\n+  //       setOtherDoc(false);\r\n+  //       setDocName(docName);\r\n+  //       setDocFileBase(\"\");\r\n+  //       setDocFileExt(\"\");\r\n+  //       setDocId(\"\");\r\n+  //       setShowSaveDoc(false);\r\n+  //       setApiCall(true);\r\n+  //       setCommentApiCall(true);\r\n+  //       setHide(false);\r\n+  //     }\r\n+  // if (response.data.message === \"updated successfully\") {\r\n+  //   toast.success(\"Document Updated Successfully\", {\r\n+  //     position: toast.POSITION.TOP_RIGHT,\r\n+  //     autoClose: 1000,\r\n+  //   });\r\n+  //   if (commentsList.length > 0) {\r\n+  //     OnHandleUpdateComment(\r\n+  //       docData[0] === docTypData ? docTypData.id : docId\r\n+  //     );\r\n+  //     // OnDeleteComment(docData[0] === docTypData ? docTypData.id : docId);\r\n+  //   }\r\n+  //   setShowMoreDocType(false);\r\n+  //   setApiCall(true);\r\n+  //   setCommentApiCall(true);\r\n+  //   setHide(false);\r\n+  //   setDocTypData(\r\n+  //     docData.find(\r\n+  //       (item) =>\r\n+  //         item.type ===\r\n+  //         (docData[0] === docTypData ? docTypData.type : docName)\r\n+  //     )\r\n+  //   );\r\n+  //   setDocFile(\r\n+  //     docData.find(\r\n+  //       (item) =>\r\n+  //         item.type ===\r\n+  //         (docData[0] === docTypData ? docTypData.type : docName)\r\n+  //     ).document_url +\r\n+  //       `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+  //   );\r\n+  // }\r\n+  //     if (response.data.message === \"fields must not be empty !\") {\r\n+  //       toast.error(\"Document type is requried\", {\r\n+  //         position: toast.POSITION.TOP_RIGHT,\r\n+  //         autoClose: 1000,\r\n+  //       });\r\n+  //       setApiCall(true);\r\n+  //       setHide(false);\r\n+  //     }\r\n+\r\n+  //     if (\r\n+  //       response.data.message === \"Invalid base64-encoded data !\" ||\r\n+  //       response.data.message === \"Unsupported file type !\"\r\n+  //     ) {\r\n+  //       toast.error(\"Document type is not valid\", {\r\n+  //         position: toast.POSITION.TOP_RIGHT,\r\n+  //         autoClose: 1000,\r\n+  //       });\r\n+  //       setApiCall(true);\r\n+  //       setHide(false);\r\n+  //     }\r\n+  //   } catch (err) {\r\n+  //     console.log(err);\r\n+  //     setHide(false);\r\n+  //   }\r\n+  // };\r\n+  /* Upload documents in bulk*/\r\n+  let SaveBulkDocument = async () => {\r\n+    setLoadingBtn(true)\r\n+    try {\r\n+      let response = await UploadBulkDocument(\r\n+        props.employee_id,\r\n+        docFileBase,\r\n+        bulkUpload === \"no\"\r\n+          ? docData[0] === docTypData\r\n+            ? docTypData.id\r\n+            : docId\r\n+          : \"\",\r\n+        props.emp_user_type\r\n+      );\r\n+\r\n+      if (response.data.message === \"inserted successfully\") {\r\n+        // Condition: If some file types are not supported and some are supported, then those that are supported will be uploaded while those that are not supported won't.\r\n+        if (response.data.data.length > 0) {\r\n+          toast.success(\" Documents uploaded successfully.\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 2000,\r\n+          });\r\n+          toast.error(\r\n+            <>\r\n+              Unsupported Files:\r\n+              <ul>\r\n+                {response.data.data.map((item, index) => (\r\n+                  <li key={index}>{item.type}</li>\r\n+                ))}\r\n+              </ul>\r\n+            </>,\r\n+            {\r\n+              position: toast.POSITION.TOP_RIGHT,\r\n+              autoClose: 2000,\r\n+            }\r\n+          );\r\n+        } else {\r\n+          toast.success(\"Documents uploaded Successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 2000,\r\n+          });\r\n+        }\r\n+        setLoadingBtn(false)\r\n+        setShowMoreDocType(false);\r\n+        setOtherDoc(false);\r\n+        setDocName(docName);\r\n+        setBulkUpload(\"\");\r\n+        setDocFileBase(\"\");\r\n+        setDocFileExt(\"\");\r\n+        setDocId(\"\");\r\n+        setShowSaveDoc(false);\r\n+        setApiCall(true);\r\n+        setCommentApiCall(true);\r\n+        setHide(false);\r\n+      }\r\n+      if (response.data.message === \"updated successfully\") {\r\n+        toast.success(\"Document Updated Successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setLoadingBtn(false)\r\n+        setEditName(false);\r\n+        setDocId(docData[0] === docTypData ? docTypData.id : docId);\r\n+        setShowMoreDocType(false);\r\n+        setOtherDoc(false);\r\n+        setApiCall(true);\r\n+        setCommentApiCall(true);\r\n+        setBulkUpload(\"\");\r\n+        setHide(false);\r\n+        setDocName(docName);\r\n+        setShowSaveDoc(false);\r\n+        // setDocTypData(docData.find((item) => item.type === docName));\r\n+        // console.log(\r\n+        //   docData.find((item) => item.type === docName),\r\n+        //   docName,\r\n+        //   docData\r\n+        // );\r\n+        // setDocFile(\r\n+        //   docData.find((item) => item.type === docName).document_url +\r\n+        //     `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n+        // );\r\n+        if (commentsList.length > 0) {\r\n+          OnHandleUpdateComment(\r\n+            docData[0] === docTypData ? docTypData.id : docId\r\n+          );\r\n+          // OnDeleteComment(docData[0] === docTypData ? docTypData.id : docId);\r\n+        }\r\n+      }\r\n+\r\n+      if (\r\n+        response.data.message === \"Invalid base64-encoded data !\" ||\r\n+        response.data.message === \"Unsupported file type !\"\r\n+      ) {\r\n+        toast.error(\"Document type is not valid\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setLoadingBtn(false)\r\n+        setApiCall(true);\r\n+        setHide(false);\r\n+        setBulkUpload(\"\");\r\n+        setShowSaveDoc(false);\r\n+      }\r\n+      if (\r\n+        response.data.message === \"all fields required !\" ||\r\n+        response.data.message === \"fields must not be empty !\"\r\n+      ) {\r\n+        toast.error(\"All fields are required !\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setLoadingBtn(false)\r\n+        setApiCall(true);\r\n+        setShowSaveDoc(false);\r\n+        setHide(false);\r\n+        setBulkUpload(\"\");\r\n+      }\r\n+      if (response.error === \"Unauthorized\") {\r\n+        toast.error(\"Token expires, please log in again.\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setLoadingBtn(false)\r\n+        setApiCall(true);\r\n+        setHide(false);\r\n+        setShowSaveDoc(false);\r\n+        setBulkUpload(\"\");\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+      toast.error(\"Something went wrong try again later!\", {\r\n+        position: toast.POSITION.TOP_RIGHT,\r\n+        autoClose: 1000,\r\n+      });\r\n+      setLoadingBtn(false)\r\n+      setApiCall(true);\r\n+      setShowSaveDoc(false);\r\n+      setHide(false);\r\n+      setBulkUpload(\"\");\r\n+      setShowMoreDocType(false);\r\n+      setEditName(false)\r\n+\r\n+    }\r\n+  };\r\n+  /*Fuinction to render image */\r\n+  const RenderNewDocFile = () => {\r\n+    return (\r\n+      <React.Fragment>\r\n+        {docFile ? (\r\n+          <>\r\n+            <div\r\n+              className=\"w-100\"\r\n+              ref={fileViewerRef}\r\n+              onClick={handleFileViewerClick}\r\n+            >\r\n+              <LazyLoad\r\n+                height={\"100%\"}\r\n+                offsetVertical={\"100%\"}\r\n+                debounce={false}\r\n+              >\r\n+                {docTypData &&\r\n+                  (docTypData.document_name &&\r\n+                    docTypData.document_name.toLowerCase().includes(\"imm\") ? (\r\n+                    <iframe\r\n+                      src={docFile}\r\n+                      style={{ height: \"calc(100vh - 200px)\" }}\r\n+                      width={\"100%\"}\r\n+                      title={docTypData.document_name}\r\n+                    ></iframe>\r\n+                  ) : (\r\n+                    <FileViewer\r\n+                      key={docTypData.id}\r\n+                      fileType={\r\n+                        docFileExt\r\n+                          ? docFileExt\r\n+                          : docTypData.extension_type ===\r\n+                            \"vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n+                            ? \"docx\"\r\n+                            : docTypData.extension_type\r\n+                      }\r\n+                      filePath={docFile}\r\n+                      errorComponent={() => <div>Error loading document</div>}\r\n+                    />\r\n+                  ))}\r\n+              </LazyLoad>\r\n+            </div>\r\n+          </>\r\n+        ) : (\r\n+          <div className=\"text-center mt-5\">No document found</div>\r\n+        )}\r\n+      </React.Fragment>\r\n+    );\r\n+  };\r\n+  /* Function to replace the _ and correct the document type */\r\n+  const textReplaceFunction = (e) => {\r\n+    if (e && e.includes(\"_\")) {\r\n+      let new_text = e.replaceAll(\"_\", \" \");\r\n+      return new_text;\r\n+    } else {\r\n+      return e;\r\n+    }\r\n+  };\r\n+  /*Function to verify the applicants documents */\r\n+  const onVerifyDocuments = async (id, verify) => {\r\n+    try {\r\n+      let response = await VarifyDocument(id, verify);\r\n+      if (response.data.message === \"successfully\") {\r\n+        toast.success(\"Document Verify Successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setApiCall(true);\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  /*Function to delete document  */\r\n+  const OnDeleteDoc = async (id) => {\r\n+    try {\r\n+      let res = await DeleteDocument(id, props.emp_user_type);\r\n+      if (res.data.message === \"document deleted successfully!\") {\r\n+        toast.success(\"Document deleted Successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setDocFile(\"\");\r\n+        setDocId(\"\");\r\n+        setDocData(\"\");\r\n+        setDocTypData(\"\");\r\n+        setDocName(\"\");\r\n+        setApiCall(true);\r\n+        setOtherDoc(false);\r\n+        GetDocument(true);\r\n+      }\r\n+      if (res.data.message === \"Error deleting document\") {\r\n+        toast.success(\"Error deleting document ! Try again later\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setDocFile(\"\");\r\n+        setDocId(\"\");\r\n+        setDocData(\"\");\r\n+        setDocTypData(\"\");\r\n+        setDocName(\"\");\r\n+        setApiCall(true);\r\n+        setOtherDoc(false);\r\n+        GetDocument(true);\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  /*Type array */\r\n+  let DocTypeData = props.emp_user_type === \"employer\" ?\r\n+    [\"Business T2\",\r\n+      \"Recent PD7A\",\r\n+      \"Business T4\",\r\n+      \"Business Incorporation Certificate\",\r\n+      \"Employment Contract\",\r\n+      \"Schedule A\",\r\n+      \"Signed Job Offer\",\r\n+      \"PD7A of year\",\r\n+      \"T2 Schedule 100 and 125\",\r\n+      \"Certificate of incorporation, \",\r\n+      \"Business license\",\r\n+      \"T4 summary of year\",\r\n+      \"Request for Exception from English Language Requirement for LMIA Application\",\r\n+      \"CPA Attestation Letter\",\r\n+      \"Representative Submission Letter\",] : [\r\n+      \"passport\",\r\n+      \"drivers_license\",\r\n+      \"photograph\",\r\n+      \"immigration_status\",\r\n+      \"lmia\",\r\n+      \"job_offer_letter\",\r\n+      \"provincial_nominee_letter\",\r\n+      \"proof_of_funds\",\r\n+      \"proof_of_employment\",\r\n+      \"marriage_certificate\",\r\n+      \"education_metric\",\r\n+      \"education_higher_secondary\",\r\n+      \"education_graduation\",\r\n+      \"education_post_graduation\",\r\n+      \"resume_or_cv\",\r\n+      \"ielts\",\r\n+      \"medical\",\r\n+      \"police_clearance\",\r\n+      \"refusal_letter\",\r\n+      \"Employment Contract\",\r\n+      \"Reference Letters\",\r\n+      \"Client Info\",\r\n+      \"Representative Submission Letter\",\r\n+      \"Bank Statement\",\r\n+    ];\r\n+  //UseEfect for document\r\n+  useEffect(() => {\r\n+    GetDocument();\r\n+    RenderNewDocFile();\r\n+    if (apiCall === true) {\r\n+      setApiCall(false);\r\n+    }\r\n+    setAnnotationMode(false);\r\n+    //Condition to clear docid from url after navigation from notification\r\n+    if (props.docId) {\r\n+      const newUrl = window.location.pathname;\r\n+      window.history.replaceState({}, document.title, newUrl);\r\n+    }\r\n+  }, [docId, apiCall, selectDocTypeName, props.employee_id, props.docId]);\r\n+  //USeEffect foe commet replies list\r\n+  useEffect(() => {\r\n+    // getCommentsReplyList();\r\n+    if (user_type === \"admin\") {\r\n+      AdminData();\r\n+    }\r\n+  }, [replyCommentClick]);\r\n+  //USeEffect foe commet list\r\n+  useEffect(() => {\r\n+    setSelectedAnnotation(null);\r\n+    getCommentsList();\r\n+    if (commenAapiCall === true) {\r\n+      setCommentApiCall(false);\r\n+    }\r\n+  }, [docId, commenAapiCall, adminid, annotationStatus]);\r\n+\r\n+  const handleDocTypeChange = (e) => {\r\n+    const selectedValue = e.target.value;\r\n+    if (selectedValue === \"other\") {\r\n+      setOtherDoc(true);\r\n+      setShowMoreDocType(false);\r\n+      setDocTypData(\"\");\r\n+      setDocId(\"\");\r\n+      setDocName(\"\");\r\n+    } else {\r\n+      setOtherDoc(false);\r\n+      setDocTypeName(selectedValue);\r\n+    }\r\n+  };\r\n+  /*Function to download Document */\r\n+  const DownloadDocument = async () => {\r\n+    const response = await fetch(docFile);\r\n+    const blob = await response.blob();\r\n+    const url = URL.createObjectURL(blob);\r\n+\r\n+    const link = document.createElement(\"a\");\r\n+    link.href = url;\r\n+    link.download = docTypData.document_name + \".\" + docTypData.extension_type;\r\n+    document.body.appendChild(link);\r\n+    link.click();\r\n+    document.body.removeChild(link);\r\n+\r\n+    // Clean up the temporary URL\r\n+    URL.revokeObjectURL(url);\r\n+  };\r\n+  /*Function to Print Document  */\r\n+  const PrintDocument = () => {\r\n+    const printWindow = window.open(\"\", \"_blank\");\r\n+    const content = `\r\n+      <html>\r\n+        <head>\r\n+          <title>Print Document</title>\r\n+        </head>\r\n+        <body>\r\n+          <embed src=\"${docFile}\" width=\"100%\" height=\"100%\">\r\n+        </body>\r\n+      </html>\r\n+    `;\r\n+\r\n+    printWindow.document.open();\r\n+    printWindow.document.write(content);\r\n+    printWindow.document.close();\r\n+    printWindow.onload = () => {\r\n+      printWindow.print();\r\n+    };\r\n+  };\r\n+\r\n+  /*Major api's for annotations */\r\n+  // Function to add annotation based on conditions\r\n+  const addAnnotation = async (annotation) => {\r\n+    setAddCommentFlag(false);\r\n+    // Retrieve data from local storage\r\n+\r\n+    const subject = \"\";\r\n+    const comment = comments; ///\\S+@\\S+\\.\\S+/.test(comments) ? \"\" : comments;\r\n+    let DocId = docId\r\n+      ? docId\r\n+      : docData.find((item) => item.type === docName).id;\r\n+    let sender = allAdmin.find((item) => item.admin_id === admin_id)\r\n+      ? allAdmin.find((item) => item.admin_id === admin_id).name\r\n+      : \"\";\r\n+    let senderEmail = allAdmin.find((item) => item.admin_id === admin_id)\r\n+      ? allAdmin.find((item) => item.admin_id === admin_id).email\r\n+      : \"\";\r\n+    const AdminType = localStorage.getItem(\"admin_type\");\r\n+    // Variables for mentionaing admins\r\n+    const email = selectedAdmin || \"\"; ///\\S+@\\S+\\.\\S+/.test(comments) ? comments : \"\";\r\n+    let assignedAdminName = allAdmin.filter((item) =>\r\n+      selectedAdmin.includes(item.email)\r\n+    )\r\n+      ? allAdmin\r\n+        .filter((item) => selectedAdmin.includes(item.email))\r\n+        .map((admin) => admin.name)\r\n+        .join(\",\")\r\n+      : \"\";\r\n+    const assignedUserId = allAdmin.filter((item) =>\r\n+      selectedAdmin.includes(item.email)\r\n+    )\r\n+      ? allAdmin\r\n+        .filter((item) => selectedAdmin.includes(item.email))\r\n+        .map((admin) => admin.admin_id)\r\n+        .join(\",\")\r\n+      : \"\";\r\n+    const assignedUserType = allAdmin.filter((item) =>\r\n+      selectedAdmin.includes(item.email)\r\n+    )\r\n+      ? allAdmin\r\n+        .filter((item) => selectedAdmin.includes(item.email))\r\n+        .map((admin) => admin.admin_type)\r\n+        .join(\",\")\r\n+      : \"\";\r\n+\r\n+    // Send data to the API\r\n+    if (comment === \"\" && email === \"\") {\r\n+      toast.error(\"Comment or email cannot be empty!\", {\r\n+        position: toast.POSITION.TOP_RIGHT,\r\n+        autoClose: 1000,\r\n+      });\r\n+    } else {\r\n+      try {\r\n+        let res = await ADocAnnotation(\r\n+          admin_id,\r\n+          DocId,\r\n+          assignedUserId,\r\n+          email,\r\n+          subject,\r\n+          comment,\r\n+          annotation.x_axis,\r\n+          annotation.y_axis,\r\n+          \"document\",\r\n+          AdminType, //sender type\r\n+          sender, //sender name,\r\n+          assignedAdminName, //assigned Admin or user Name,\r\n+          \"\", //follow up status(for notes only)\r\n+          \"\", //Next follow up date(for notes only)\r\n+          assignedUserType, //Assign user type,\r\n+          \"\", //Document url(for notes only)\r\n+          senderEmail, //Sender email\r\n+          props.employee_id //Userid\r\n+        );\r\n+        if (res.data.message === \"task inserted successfully!\") {\r\n+          toast.success(\"Comment uploaded Successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          setSelectedAnnotation(null);\r\n+          setComments(\"\");\r\n+          setCommentApiCall(true);\r\n+          setSelectedAdmin(\"\");\r\n+          setAnnotationMode(!isAnnotationMode);\r\n+          setFilteredEmails([]);\r\n+          // setNotificationApiCall(true);\r\n+          localStorage.setItem(\"callNotification\", true);\r\n+        }\r\n+      } catch (err) {\r\n+        console.log(err);\r\n+        if (err.response.data.message === \"required fields cannot be blank\") {\r\n+          toast.error(\" Please try again later.\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          setSelectedAnnotation(null);\r\n+          setComments(\"\");\r\n+          setSelectedAdmin(\"\");\r\n+          setCommentApiCall(true);\r\n+          setAnnotationMode(!isAnnotationMode);\r\n+          setAddCommentFlag();\r\n+          setFilteredEmails([]);\r\n+        }\r\n+      }\r\n+    }\r\n+    // Update state to include the new annotation\r\n+    // setImageAnnotations([...imageAnnotations, { x, y }]);\r\n+  };\r\n+  /* Function to update comment and assign */\r\n+  const OnHandleUpdateComment = async (originalData) => {\r\n+    let updatedData;\r\n+    //Condtion to update x and y axis on documet update\r\n+    if (originalData === (docData[0] === docTypData ? docTypData.id : docId)) {\r\n+      updatedData = { doc_id: originalData, x_axis: 0, y_axis: 0 };\r\n+    } else {\r\n+      updatedData = { ...originalData };\r\n+      updatedData.status = originalData.status === \"1\" ? \"0\" : \"1\";\r\n+    }\r\n+    try {\r\n+      // Call the API with the updated data\r\n+      let res = await UpdateDocuentcommentAssign(updatedData);\r\n+      if (res.message === \"Task updated successfully!\") {\r\n+        toast.success(\"Task completed Successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        setSelectedAnnotation(null);\r\n+        setComments(\"\");\r\n+        setCommentApiCall(true);\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  /*Function to delete document comments*/\r\n+  // const OnDeleteComment = async (docId) => {\r\n+  //   try {\r\n+  //     let res = await DeleteCommentsAndAssign(docId);\r\n+  //     console.log(res);\r\n+  //   } catch (err) {\r\n+  //     console.log(err);\r\n+  //   }\r\n+  // };\r\n+  /*Function to set the color code to the background of the user name */\r\n+  const determineBackgroundColor = (commentItem) => {\r\n+    const colorClasses = [\r\n+      \"bg-primary-opacity-7\",\r\n+      \"bg-warning-opacity-7\",\r\n+      \"bg-orange-opacity-6\",\r\n+      \"bg-info-opacity-7\",\r\n+      \"bg-secondary-opacity-7\",\r\n+      \"bg-danger-opacity-6\",\r\n+      \"bg-info-opacity-visible\",\r\n+    ];\r\n+\r\n+    const assignedUserId = commentItem.assigned_to_user_id;\r\n+\r\n+    // Create a mapping dynamically based on assignedUserId\r\n+    const userColorMap = {};\r\n+\r\n+    // Check if assignedUserId is present in the mapping\r\n+    if (assignedUserId && userColorMap.hasOwnProperty(assignedUserId)) {\r\n+      return userColorMap[assignedUserId];\r\n+    }\r\n+\r\n+    // If not found in the mapping, use the colorClasses logic\r\n+    const id = commentItem.id;\r\n+    const hashCode = (str) => {\r\n+      let hash = 0;\r\n+      for (let i = 0; i < str.length; i++) {\r\n+        const char = str.charCodeAt(i);\r\n+        hash = (hash << 5) - hash + char;\r\n+      }\r\n+      return hash;\r\n+    };\r\n+\r\n+    const hash = Math.abs(hashCode(id.toString()));\r\n+    const index = hash % colorClasses.length;\r\n+\r\n+    return colorClasses[index];\r\n+  };\r\n+  /*Function to reply for the comment */\r\n+  const ReplyAnnotation = async (data) => {\r\n+    // let emailrejex = /\\S+@\\S+\\.\\S+/;\r\n+    // let id = emailrejex.test(selectedAdminReply)\r\n+    //   ? allAdmin.find((item) => item.email === selectedAdminReply).admin_id\r\n+    //   : data.assined_to_user_id;\r\n+    // let adminType = emailrejex.test(selectedAdminReply)\r\n+    //   ? allAdmin.find((item) => item.email === selectedAdminReply).admin_type\r\n+    //   : \"admin\";\r\n+    let sender = allAdmin.find((item) => item.admin_id === admin_id)\r\n+      ? allAdmin.find((item) => item.admin_id === admin_id).name\r\n+      : \"\";\r\n+    let senderId = allAdmin.find((item) => item.admin_id === admin_id)\r\n+      ? allAdmin.find((item) => item.admin_id === admin_id).admin_id\r\n+      : \"\";\r\n+    let senderEmail = allAdmin.find((item) => item.admin_id === admin_id)\r\n+      ? allAdmin.find((item) => item.admin_id === admin_id).email\r\n+      : \"\";\r\n+    let senderType = allAdmin.find((item) => item.admin_id === admin_id)\r\n+      ? allAdmin.find((item) => item.admin_id === admin_id).admin_type\r\n+      : \"\";\r\n+    // let assignedAdminName = allAdmin.find(\r\n+    //   (item) => item.email === selectedAdminReply\r\n+    // )\r\n+    //   ? allAdmin.find((item) => item.email === selectedAdminReply).name\r\n+    //   : \"\";\r\n+    // Variables for mentioning admins\r\n+    const email = selectedAdminReply || \"\"; ///\\S+@\\S+\\.\\S+/.test(comments) ? comments : \"\";\r\n+    let assignedAdminName = allAdmin.filter((item) =>\r\n+      selectedAdminReply.includes(item.email)\r\n+    )\r\n+      ? allAdmin\r\n+        .filter((item) => selectedAdminReply.includes(item.email))\r\n+        .map((admin) => admin.name)\r\n+        .join(\",\")\r\n+      : \"\";\r\n+    const assignedUserId = allAdmin.filter((item) =>\r\n+      selectedAdminReply.includes(item.email)\r\n+    )\r\n+      ? allAdmin\r\n+        .filter((item) => selectedAdminReply.includes(item.email))\r\n+        .map((admin) => admin.admin_id)\r\n+        .join(\",\")\r\n+      : \"\";\r\n+    const AdminType = //localStorage.getItem(\"admin_type\");\r\n+      allAdmin.filter((item) => selectedAdminReply.includes(item.email))\r\n+        ? allAdmin\r\n+          .filter((item) => selectedAdminReply.includes(item.email))\r\n+          .map((admin) => admin.admin_type)\r\n+          .join(\",\")\r\n+        : \"\";\r\n+    if (replyComment === \"\" && email === \"\") {\r\n+      toast.error(\"Comment or email cannot be empty!\", {\r\n+        position: toast.POSITION.TOP_RIGHT,\r\n+        autoClose: 1000,\r\n+      });\r\n+    } else {\r\n+      try {\r\n+        let res = await SendReplyCommit(\r\n+          data,\r\n+          email,\r\n+          replyComment,\r\n+          assignedUserId,\r\n+          AdminType,\r\n+          sender,\r\n+          assignedAdminName,\r\n+          \"document\",\r\n+          senderId,\r\n+          senderEmail,\r\n+          senderType,\r\n+          props.employee_id //Userid\r\n+        );\r\n+        if (res.data.message === \"message sent successfully!\") {\r\n+          toast.success(\"Replied Successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          // setNotificationApiCall(true);\r\n+          localStorage.setItem(\"callNotification\", true);\r\n+          setReplyComment(\"\");\r\n+          getCommentsReplyList();\r\n+          setSelectedAdminReplye(\"\");\r\n+          setFilteredEmails([]);\r\n+        }\r\n+      } catch (err) {\r\n+        console.log(err);\r\n+        setSelectedAdminReplye(\"\");\r\n+        setFilteredEmails([]);\r\n+      }\r\n+    }\r\n+  };\r\n+  return (\r\n+    <div\r\n+      className={\r\n+        // props.page === \"company_profile\"\r\n+        //\r\n+        \"document_container bg-white\"\r\n+        // : \"container document_container bg-white p-5 mb-10\"\r\n+      }\r\n+    >\r\n+      <div className=\"row m-0 bg-white\">\r\n+        {/* Document list */}\r\n+        <DocumentList\r\n+          selectDocTypeName={selectDocTypeName}\r\n+          user_type={user_type}\r\n+          docData={docData}\r\n+          setShowMoreDocType={setShowMoreDocType}\r\n+          setDocTypData={setDocTypData}\r\n+          setDocName={setDocName}\r\n+          setDocId={setDocId}\r\n+          setOtherDoc={setOtherDoc}\r\n+          setHide={setHide}\r\n+          setShowSaveDoc={setShowSaveDoc}\r\n+          setFilteredEmails={setFilteredEmails}\r\n+          setAnnotationMode={setAnnotationMode}\r\n+          setReplyCommentClick={setReplyCommentClick}\r\n+          setDocFile={setDocFile}\r\n+          docName={docName}\r\n+          docId={docId}\r\n+          setEditName={setEditName}\r\n+          OnDeleteDoc={OnDeleteDoc}\r\n+          textReplaceFunction={textReplaceFunction}\r\n+          setBulkUpload={setBulkUpload}\r\n+          SaveBulkDocument={SaveBulkDocument}\r\n+          editName={editName}\r\n+          setDocFileBase={setDocFileBase}\r\n+          isAnnotationMode={isAnnotationMode}\r\n+          setApiCall={setApiCall}\r\n+          setSelecttDocTypeName={setSelecttDocTypeName}\r\n+          docAllTypes={docAllTypes}\r\n+          setDocTypeName={setDocTypeName}\r\n+          userId={props.employee_id}\r\n+        // setNotificationDoc={setNotificationDoc}\r\n+        // notificationApiCall={notificationApiCall}\r\n+        // setNotificationApiCall={setNotificationApiCall}\r\n+        />\r\n+        {/* Document view */}\r\n+        <ViewDocument\r\n+          loadingBtn={loadingBtn}\r\n+          handleBulkFileChange={handleBulkFileChange}\r\n+          setBulkUpload={setBulkUpload}\r\n+          showSaveDoc={showSaveDoc}\r\n+          SaveBulkDocument={SaveBulkDocument}\r\n+          setHide={setHide}\r\n+          setApiCall={setApiCall}\r\n+          setShowSaveDoc={setShowSaveDoc}\r\n+          setDocFile={setDocFile}\r\n+          setDocFileExt={setDocFileExt}\r\n+          setFilteredEmails={setFilteredEmails}\r\n+          docFile={docFile}\r\n+          docName={docName}\r\n+          Verified={Verified}\r\n+          onVerifyDocuments={onVerifyDocuments}\r\n+          PrintDocument={PrintDocument}\r\n+          DownloadDocument={DownloadDocument}\r\n+          loading={loading}\r\n+          Loader={Loader}\r\n+          RenderNewDocFile={RenderNewDocFile}\r\n+          setAnnotationMode={setAnnotationMode}\r\n+          setComments={setComments}\r\n+          setReplyCommentClick={setReplyCommentClick}\r\n+          setAddCommentFlag={setAddCommentFlag}\r\n+          docTypData={docTypData}\r\n+          handleFlagClick={handleFlagClick}\r\n+          setSelectedAnnotation={setSelectedAnnotation}\r\n+          hide={hide}\r\n+          user_type={user_type}\r\n+          isAnnotationMode={isAnnotationMode}\r\n+          imageAnnotations={imageAnnotations}\r\n+          selectedAnnotation={selectedAnnotation}\r\n+          otherDoc={otherDoc}\r\n+          setDocName={setDocName}\r\n+          DocTypeData={DocTypeData}\r\n+          textReplaceFunction={textReplaceFunction}\r\n+          setShowMoreDocType={setShowMoreDocType}\r\n+          setDocTypData={setDocTypData}\r\n+          setDocId={setDocId}\r\n+          setOtherDoc={setOtherDoc}\r\n+          showMoreDocType={showMoreDocType}\r\n+          handleDocTypeChange={handleDocTypeChange}\r\n+          setDocTypeName={setDocTypeName}\r\n+          docTypeName={docTypeName}\r\n+          bulkUpload={bulkUpload}\r\n+        />\r\n+        {/* Annotation  */}\r\n+        <div className=\"col-md-3 px-2 py-2 comments_and_replies\">\r\n+          {/* Add Annotation form */}\r\n+          {!hide &&\r\n+            docFile &&\r\n+            docName &&\r\n+            user_type === \"admin\" &&\r\n+            selectedAnnotation && //condition for imm pdf\r\n+            (docTypData.document_name &&\r\n+              docTypData.document_name.toLowerCase().includes(\"imm\")\r\n+              ? replyCommentClick === undefined ||\r\n+              replyCommentClick === \"\" ||\r\n+              replyCommentClick === null\r\n+              : addCommentFlag === true) ? (\r\n+            <div\r\n+              style={\r\n+                {\r\n+                  // position: \"absolute\",\r\n+                  // left: selectedAnnotation.x_axis + 10,\r\n+                  // top: selectedAnnotation.y_axis + 20,\r\n+                  // zIndex: 1,\r\n+                }\r\n+              }\r\n+              className=\"pt-0 pb-5\"\r\n+            >\r\n+              <form\r\n+                className=\"comment-form\"\r\n+                onSubmit={(e) => {\r\n+                  e.preventDefault();\r\n+                  addAnnotation(selectedAnnotation);\r\n+                }}\r\n+              >\r\n+                <div className=\"comment-input-container m-0 mb-2\">\r\n+                  <label className=\"m-0\">\r\n+                    <b> Add Annotation:</b>\r\n+                  </label>\r\n+                  <input\r\n+                    type=\"text\"\r\n+                    value={comments || \"\"}\r\n+                    onChange={handleInputChange}\r\n+                    placeholder=\"Comments or add others with @\"\r\n+                    className=\"comment-input\"\r\n+                  />\r\n+                  {filteredEmails.length > 0 && (\r\n+                    <ul className=\"email-suggestions\">\r\n+                      {filteredEmails.map((email) => (\r\n+                        <li\r\n+                          key={email.email}\r\n+                          onClick={() => handleEmailClick(email.email)}\r\n+                          onMouseOver={() => handleEmailMouseOver(email.email)}\r\n+                          className=\"email-suggestion-item\"\r\n+                        >\r\n+                          <strong>{email.name}</strong>\r\n+                        </li>\r\n+                      ))}\r\n+                    </ul>\r\n+                  )}\r\n+                </div>\r\n+                <div className=\"button-container mx-0\">\r\n+                  <button\r\n+                    type=\"submit\"\r\n+                    // onClick={(e) => {\r\n+                    //   e.preventDefault();\r\n+                    //   addAnnotation(selectedAnnotation);\r\n+\r\n+                    // }}\r\n+                    className=\"btn-sm btn-primary save-comment-btn\"\r\n+                  >\r\n+                    Save Comment\r\n+                  </button>\r\n+                  <button\r\n+                    className=\"btn-sm btn-light cancel-btn\"\r\n+                    onClick={() => {\r\n+                      setAddCommentFlag();\r\n+                      setSelectedAnnotation(null);\r\n+                      setComments(\"\");\r\n+                      setAnnotationMode(!isAnnotationMode);\r\n+                      setFilteredEmails([]);\r\n+                    }}\r\n+                  >\r\n+                    Cancel\r\n+                  </button>\r\n+                </div>\r\n+              </form>\r\n+            </div>\r\n+          ) : null}\r\n+          {/* Comment box */}\r\n+          {user_type === \"admin\" ? (\r\n+            <CommentBox\r\n+              commentsReplyList={commentsReplyList}\r\n+              docData={docData}\r\n+              adminid={adminid}\r\n+              setAdminId={setAdminId}\r\n+              allAdmin={allAdmin}\r\n+              annotationStatus={annotationStatus}\r\n+              setAnnotationStatus={setAnnotationStatus}\r\n+              commentsList={commentsList}\r\n+              selectedAnnotation={selectedAnnotation}\r\n+              setSelectedAnnotation={setSelectedAnnotation}\r\n+              OnHandleUpdateComment={OnHandleUpdateComment}\r\n+              determineBackgroundColor={determineBackgroundColor}\r\n+              setReplyCommentClick={setReplyCommentClick}\r\n+              replyCommentClick={replyCommentClick}\r\n+              replyComment={replyComment}\r\n+              handleInputChange={handleInputChange}\r\n+              filteredEmails={filteredEmails}\r\n+              handleEmailClick={handleEmailClick}\r\n+              handleEmailMouseOver={handleEmailMouseOver}\r\n+              ReplyAnnotation={ReplyAnnotation}\r\n+              getCommentsReplyList={getCommentsReplyList}\r\n+              setAddCommentFlag={setAddCommentFlag}\r\n+              setFilteredEmails={setFilteredEmails}\r\n+              docTypData={docTypData}\r\n+              setHide={setHide}\r\n+            />\r\n+          ) : null}\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+}\r\n"
                },
                {
                    "date": 1710308270301,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n   const [showSaveDoc, setShowSaveDoc] = useState(false);\r\n   const [hide, setHide] = useState(false);\r\n   const [bulkUpload, setBulkUpload] = useState(\"\");\r\n   const [loading, setLoading] = useState(true);\r\n-  const [loadingBtn, setLoadingBtn] = useState(true);\r\n+  const [loadingBtn, setLoadingBtn] = useState(false);\r\n   // Notification states to send in notificaion component\r\n   const [notificationDoc, setNotificationDoc] = useState(props.docId ? 1 : 0);\r\n   // const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n   // let encoded;\r\n@@ -1535,1541 +1535,4 @@\n       </div>\r\n     </div>\r\n   );\r\n }\r\n-import React, { useState, useRef } from \"react\";\r\n-// import { Form } from \"react-bootstrap\";\r\n-import Loader from \"./loader\";\r\n-import {\r\n-  // UploadDocument,\r\n-  UploadBulkDocument,\r\n-  GetEmployeeDocumentList,\r\n-  VarifyDocument,\r\n-  ADocAnnotation,\r\n-  GetCommentsAndAssign,\r\n-  getallAdminData,\r\n-  UpdateDocuentcommentAssign,\r\n-  // DeleteCommentsAndAssign,\r\n-  DeleteDocument,\r\n-  SendReplyCommit,\r\n-  GetReplyCommit,\r\n-} from \"../../api/api\";\r\n-import LazyLoad from \"react-lazy-load\";\r\n-import { toast } from \"react-toastify\";\r\n-import FileViewer from \"react-file-viewer\";\r\n-import { useEffect } from \"react\";\r\n-import Verified from \"../../media/verified.png\";\r\n-/*Annotation */\r\n-import CommentBox from \"./CommentBox\";\r\n-import DocumentList from \"./DocumentList\";\r\n-import ViewDocument from \"./ViewDocument\";\r\n-export default function DocumrentContainer(props) {\r\n-  const [otherDoc, setOtherDoc] = useState(false);\r\n-  const [docName, setDocName] = useState(\"\");\r\n-  const [editName, setEditName] = useState(false);\r\n-  const [docData, setDocData] = useState([]);\r\n-  const [docAllTypes, setDocAllTypes] = useState([]);\r\n-  const [docTypData, setDocTypData] = useState(\"\");\r\n-  const [apiCall, setApiCall] = useState(\"\");\r\n-  const [docFile, setDocFile] = useState(\"\");\r\n-  const [docFileBase, setDocFileBase] = useState(\"\");\r\n-  const [docFileExt, setDocFileExt] = useState(\"\");\r\n-  const [docId, setDocId] = useState(props.docId ? props.docId : \"\");\r\n-  const [docTypeName, setDocTypeName] = useState(\"\");\r\n-  const [selectDocTypeName, setSelecttDocTypeName] = useState(\"\");\r\n-  const [showMoreDocType, setShowMoreDocType] = useState(false);\r\n-  const [showSaveDoc, setShowSaveDoc] = useState(false);\r\n-  const [hide, setHide] = useState(false);\r\n-  const [bulkUpload, setBulkUpload] = useState(\"\");\r\n-  const [loading, setLoading] = useState(true);\r\n-  const [loadingBtn, setLoadingBtn] = useState(true);\r\n-  // Notification states to send in notificaion component\r\n-  const [notificationDoc, setNotificationDoc] = useState(props.docId ? 1 : 0);\r\n-  // const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n-  // let encoded;\r\n-  let user_type = localStorage.getItem(\"userType\");\r\n-  let admin_id = localStorage.getItem(\"admin_id\");\r\n-  // Annotation State\r\n-  const [commenAapiCall, setCommentApiCall] = useState(\"\");\r\n-  const [imageAnnotations, setImageAnnotations] = useState([]);\r\n-  const [comments, setComments] = useState(\"\");\r\n-  const [replyComment, setReplyComment] = useState(\"\");\r\n-  const [commentsList, setCommentsList] = useState([]);\r\n-  const [selectedAnnotation, setSelectedAnnotation] = useState(null);\r\n-  const [isAnnotationMode, setAnnotationMode] = useState(false);\r\n-  let [allAdmin, setAllAdmin] = useState([]);\r\n-  let [adminid, setAdminId] = useState();\r\n-  const [selectedAdmin, setSelectedAdmin] = useState(\"\");\r\n-  const [selectedAdminReply, setSelectedAdminReplye] = useState(\"\");\r\n-  const [addCommentFlag, setAddCommentFlag] = useState(false);\r\n-  const [filteredEmails, setFilteredEmails] = useState([]);\r\n-  const fileViewerRef = useRef(null);\r\n-  let [annotationStatus, setAnnotationStatus] = useState();\r\n-  let [replyCommentClick, setReplyCommentClick] = useState();\r\n-  const [commentsReplyList, setCommentsReplyList] = useState([]);\r\n-  /*Function to get admin list */\r\n-  const AdminData = async () => {\r\n-    try {\r\n-      const userData = await getallAdminData();\r\n-      if (userData.data.length === 0) {\r\n-        setAllAdmin([]);\r\n-      } else {\r\n-        // const filteredData = userData.data.filter(item => item.admin_type === \"manager\");\r\n-        setAllAdmin(userData.data);\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err);\r\n-    }\r\n-  };\r\n-\r\n-  /*onchange Function to set email or any other comment  */\r\n-  const handleInputChange = (event, type) => {\r\n-    // const value = event.target.value;\r\n-    // console.log(value.startsWith(\"@\"), value.includes(\" @\"));\r\n-    // if (value.startsWith(\"@\")) {\r\n-    // AdminData();\r\n-    // if (allAdmin) {\r\n-    //   // Filter admin emails based on input\r\n-    //   let filteredAdminEmails = allAdmin.filter((admin) =>\r\n-    //     admin.email.toLowerCase().includes(value.slice(1).toLowerCase())\r\n-    //   );\r\n-\r\n-    //   // Update the filtered emails\r\n-    //   setFilteredEmails(filteredAdminEmails);\r\n-    // }\r\n-    // } else {\r\n-    //   // Reset filtered emails if input doesn't start with '@'\r\n-    //   setFilteredEmails([]);\r\n-    // }\r\n-\r\n-    // // Update the input value\r\n-    // if (type === \"reply\") {\r\n-    //   setReplyComment(value);\r\n-    // } else {\r\n-    //   setComments(value);\r\n-    // }\r\n-    const inputValue = event.target.value;\r\n-    // Update the input value\r\n-    if (type === \"reply\") {\r\n-      setReplyComment(inputValue);\r\n-    } else {\r\n-      setComments(inputValue);\r\n-    }\r\n-\r\n-    let lastChar = inputValue.slice(-1);\r\n-    const atIndex = inputValue.indexOf(\"@\");\r\n-\r\n-    if (lastChar === \"@\" || inputValue.includes(\"@\")) {\r\n-      AdminData();\r\n-      if (allAdmin) {\r\n-        // Filter admin emails based on input\r\n-        let filteredAdminEmails = allAdmin.filter((admin) =>\r\n-          admin.email.toLowerCase().includes(\r\n-            String(inputValue)\r\n-              .substring(atIndex + 1)\r\n-              .toLowerCase()\r\n-          )\r\n-        );\r\n-\r\n-        // Update the filtered emails\r\n-        setFilteredEmails(filteredAdminEmails);\r\n-      }\r\n-    } else {\r\n-      setFilteredEmails([]);\r\n-    }\r\n-  };\r\n-  /*Function to get the email to assign */\r\n-  const handleEmailClick = (email, type) => {\r\n-    // Set the selected admin and update the input value\r\n-    if (type === \"reply\") {\r\n-      setSelectedAdminReplye((prevValue) => prevValue + email + \",\");\r\n-      setReplyComment((prevValue) => `${prevValue} ${email} `);\r\n-    } else {\r\n-      setSelectedAdmin((prevValue) => prevValue + email + \",\");\r\n-      setComments((prevValue) => `${prevValue} ${email} `);\r\n-    }\r\n-    setFilteredEmails([]);\r\n-  };\r\n-  /*Function to get the email to input on hover */\r\n-  const handleEmailMouseOver = (email, type) => {\r\n-    // Highlight the email on mouseover\r\n-    if (type === \"reply\") {\r\n-      setSelectedAdminReplye(email);\r\n-    } else {\r\n-      setSelectedAdmin(email);\r\n-    }\r\n-  };\r\n-  // Handle click event on the FileViewer to capture annotations\r\n-  const handleFileViewerClick = (e) => {\r\n-    if (isAnnotationMode) {\r\n-      const rect = fileViewerRef.current.getBoundingClientRect();\r\n-      const x_axis = e.clientX - rect.left;\r\n-      const y_axis = e.clientY - rect.top;\r\n-      handleFlagClick({ x_axis, y_axis });\r\n-      setImageAnnotations([...imageAnnotations, { x_axis, y_axis }]);\r\n-      setAddCommentFlag(true);\r\n-    }\r\n-  };\r\n-\r\n-  // Handle flag click to select the annotation and toggle the form visibility for image annotation\r\n-  const handleFlagClick = (annotation) => {\r\n-    // if (\r\n-    //   selectedAnnotation &&\r\n-    //   selectedAnnotation.x === annotation.x &&\r\n-    //   selectedAnnotation.y === annotation.y\r\n-    // ) {\r\n-    //   setSelectedAnnotation(null);\r\n-    // } else {\r\n-    setSelectedAnnotation(annotation);\r\n-    // }\r\n-  };\r\n-  // Generate a list of comments from the state for image annotation\r\n-  const getCommentsList = async () => {\r\n-    if (docId || (docData && docData.find((item) => item.type === docName))) {\r\n-      try {\r\n-        let res = await GetCommentsAndAssign(\r\n-          docId ? docId : docData.find((item) => item.type === docName).id,\r\n-          adminid,\r\n-          annotationStatus,\r\n-          \"document\"\r\n-        );\r\n-        if (res.data.status === (1 || \"1\")) {\r\n-          setCommentsList(res.data.data.data);\r\n-          setImageAnnotations(res.data.data.data);\r\n-        } else if (res.data.message === \"Task data not found\") {\r\n-          setCommentsList([]);\r\n-          setImageAnnotations([]);\r\n-        }\r\n-      } catch (err) {\r\n-        console.log(err);\r\n-        setCommentsList([]);\r\n-        setImageAnnotations([]);\r\n-      }\r\n-    } else {\r\n-      setCommentsList([]);\r\n-      setImageAnnotations([]);\r\n-    }\r\n-  };\r\n-\r\n-  // Generate a list of comments reply\r\n-  const getCommentsReplyList = async () => {\r\n-    if (docId || docData.find((item) => item.type === docName)) {\r\n-      try {\r\n-        let res = await GetReplyCommit(\r\n-          docId ? docId : docData.find((item) => item.type === docName).id,\r\n-          adminid,\r\n-          annotationStatus\r\n-        );\r\n-        if (res.data.status === (1 || \"1\")) {\r\n-          setCommentsReplyList(res.data.data);\r\n-        }\r\n-      } catch (err) {\r\n-        console.log(err);\r\n-        setCommentsReplyList([]);\r\n-      }\r\n-    } else {\r\n-      setCommentsReplyList([]);\r\n-    }\r\n-  };\r\n-  /*Annotaton functionalites close */\r\n-  /*Functo get Applicants Document */\r\n-  const GetDocument = async (del) => {\r\n-    try {\r\n-      let response = await GetEmployeeDocumentList(\r\n-        props.employee_id,\r\n-        props.emp_user_type,\r\n-        props.docId &&\r\n-          localStorage.getItem(\"notificationUser\") === props.employee_id\r\n-          ? \"\"\r\n-          : selectDocTypeName\r\n-            ? selectDocTypeName\r\n-            : \"\"\r\n-      );\r\n-\r\n-      if (\r\n-        response.data.data === undefined ||\r\n-        response.data.data === \"\" ||\r\n-        response.data.data === null ||\r\n-        response.data.data.length === 0 ||\r\n-        response.data.message === \"No data found\"\r\n-      ) {\r\n-        setDocData([]);\r\n-        setLoading(false);\r\n-      } else {\r\n-        {\r\n-          if (\r\n-            response.data.data.allData.length === 0 ||\r\n-            response.data.data.allData === undefined ||\r\n-            response.data.data.allData === \"\" ||\r\n-            response.data.data.allData === null\r\n-          ) {\r\n-            setDocData([]);\r\n-          } else {\r\n-            setDocData(response.data.data.allData);\r\n-          }\r\n-          if (\r\n-            response.data.data.all_types.length === 0 ||\r\n-            response.data.data.all_types === undefined ||\r\n-            response.data.data.all_types === \"\" ||\r\n-            response.data.data.all_types === null\r\n-          ) {\r\n-            setDocAllTypes([]);\r\n-          } else {\r\n-            setDocAllTypes(response.data.data.all_types);\r\n-          }\r\n-          setLoading(false);\r\n-          if (notificationDoc === 1) {\r\n-            // Condition for Open document fromnotification\r\n-            setNotificationDoc(0);\r\n-\r\n-            if (response.data.data.allData.find((item) => item.id === docId)) {\r\n-              setSelecttDocTypeName(\r\n-                response.data.data.allData.find((item) => item.id === docId)\r\n-                  .type\r\n-              );\r\n-              setDocTypData(\r\n-                response.data.data.allData.find((item) => item.id === docId)\r\n-              );\r\n-              setDocName(\r\n-                response.data.data.allData.find((item) => item.id === docId)\r\n-                  .document_name\r\n-              );\r\n-              setDocId(\r\n-                response.data.data.allData.find((item) => item.id === docId).id\r\n-              );\r\n-              setDocFile(\r\n-                response.data.data.allData.find((item) => item.id === docId)\r\n-                  .document_url +\r\n-                `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n-              );\r\n-              setDocTypeName(\r\n-                response.data.data.allData.find((item) => item.id === docId)\r\n-                  .type\r\n-              );\r\n-            } else {\r\n-              toast.error(\"Document not found\", {\r\n-                position: toast.POSITION.TOP_RIGHT,\r\n-                autoClose: 1000,\r\n-              });\r\n-            }\r\n-            setNotificationDoc(0);\r\n-          } else {\r\n-            if (\r\n-              docTypData === undefined ||\r\n-              docTypData === \"undefined\" ||\r\n-              (docTypData === \"\" && docName === \"\" && otherDoc === false) ||\r\n-              del === true\r\n-            ) {\r\n-              // eslint-disable-next-line\r\n-              setDocTypData(response.data.data.allData[0]);\r\n-              setDocFile(\r\n-                response.data.data.allData[0].document_url +\r\n-                `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n-              );\r\n-              setDocName(response.data.data.allData[0].document_name);\r\n-              setDocId(response.data.data.allData[0].id);\r\n-              setDocTypeName(response.data.data.allData[0].type);\r\n-              setSelecttDocTypeName(response.data.data.allData[0].type);\r\n-              setNotificationDoc(0);\r\n-            } else if (\r\n-              showMoreDocType === false &&\r\n-              response.data.data.allData.find(\r\n-                (item) => item.document_name === docName\r\n-              )\r\n-            ) {\r\n-              if (\r\n-                response.data.data.allData.find(\r\n-                  (item) => item.document_name === docName\r\n-                ).document_name === docName\r\n-              ) {\r\n-                setNotificationDoc(0);\r\n-\r\n-                setDocTypData(\r\n-                  response.data.data.allData.find(\r\n-                    (item) => item.document_name === docName\r\n-                  )\r\n-                );\r\n-                setDocName(\r\n-                  response.data.data.allData.find(\r\n-                    (item) => item.document_name === docName\r\n-                  ).document_name\r\n-                );\r\n-                setDocId(\r\n-                  response.data.data.allData.find(\r\n-                    (item) => item.document_name === docName\r\n-                  ).id\r\n-                );\r\n-                setDocFile(\r\n-                  response.data.data.allData.find(\r\n-                    (item) => item.document_name === docName\r\n-                  ).document_url +\r\n-                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n-                );\r\n-                setDocTypeName(\r\n-                  response.data.data.allData.find(\r\n-                    (item) => item.document_name === docName\r\n-                  ).type\r\n-                );\r\n-              }\r\n-            } else {\r\n-              //Condition for update\r\n-              if (\r\n-                response.data.data.allData.find((item) => item.id === docId)\r\n-              ) {\r\n-                setNotificationDoc(0);\r\n-\r\n-                setDocTypData(\r\n-                  response.data.data.allData.find((item) => item.id === docId)\r\n-                );\r\n-                setDocFile(\r\n-                  response.data.data.allData.find((item) => item.id === docId)\r\n-                    .document_url +\r\n-                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n-                );\r\n-                setDocName(\r\n-                  response.data.data.allData.find((item) => item.id === docId)\r\n-                    .document_name\r\n-                );\r\n-                setDocId(\r\n-                  response.data.data.allData.find((item) => item.id === docId)\r\n-                    .id\r\n-                );\r\n-                setDocTypeName(\r\n-                  response.data.data.allData.find((item) => item.id === docId)\r\n-                    .type\r\n-                );\r\n-              } else {\r\n-                setDocTypData(\"\");\r\n-                setDocFile(\"\");\r\n-                setDocName(\"\");\r\n-                setDocId(\"\");\r\n-                setDocTypeName(\"\");\r\n-                setNotificationDoc(0);\r\n-              }\r\n-            }\r\n-          }\r\n-        }\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err);\r\n-      setLoading(false);\r\n-    }\r\n-  };\r\n-\r\n-  /*Function to convert file to base64 */\r\n-  const convertToBase64 = (file) => {\r\n-    return new Promise((resolve, reject) => {\r\n-      const fileReader = new FileReader();\r\n-      fileReader.addEventListener(\"load\", () => {\r\n-        resolve({ base64: fileReader.result });\r\n-      });\r\n-      fileReader.readAsDataURL(file);\r\n-      fileReader.onerror = (error) => {\r\n-        reject(error);\r\n-      };\r\n-    });\r\n-  };\r\n-\r\n-  /*Onchange function of SIngle update document */\r\n-  // const handleFileChange = async (event, id) => {\r\n-  //   const file = event.target.files[0];\r\n-  //   if (!file) {\r\n-  //     toast.error(\"No file selected\", {\r\n-  //       position: toast.POSITION.TOP_RIGHT,\r\n-  //       autoClose: 1000,\r\n-  //     });\r\n-  //     return;\r\n-  //   }\r\n-  //   // Check file type\r\n-  //   const allowedTypes = [\".pdf\", \".doc\", \".docx\", \".jpg\", \".jpeg\", \".png\"];\r\n-  //   const fileType = `.${file.name.split(\".\").pop()}`;\r\n-  //   if (!allowedTypes.includes(fileType.toLowerCase())) {\r\n-  //     toast.error(\r\n-  //       \"Invalid docum{ent type. Allowed types: PDF, DOC, DOCX, JPG, JPEG, PNG\",\r\n-  //       {\r\n-  //         position: toast.POSITION.TOP_RIGHT,\r\n-  //         autoClose: 1000,\r\n-  //       }\r\n-  //     );\r\n-  //     return;\r\n-  //   }\r\n-  //   // Check file size\r\n-  //   else if (file.size > 1024 * 8000) {\r\n-  //     toast.error(\"Document size can't be more than 8 mb\", {\r\n-  //       position: toast.POSITION.TOP_RIGHT,\r\n-  //       autoClose: 1000,\r\n-  //     });\r\n-  //     return;\r\n-  //   } else {\r\n-  //     const reader = new FileReader();\r\n-  //     // Read the file as a data URL\r\n-  //     reader.readAsDataURL(file);\r\n-  //     encoded = await convertToBase64(file);\r\n-  //     let base64Name = encoded.base64;\r\n-  //     let DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${\r\n-  //       base64Name.split(\";\")[1]\r\n-  //     }`;\r\n-  // setDocFile(base64Name);\r\n-  // setDocFileExt(fileType.slice(1));\r\n-  // setDocumentName(file.name.split(\".\")[0].replace(/ /g, \"_\"));\r\n-  // setDocFileBase(DocFile);\r\n-  //     setShowSaveDoc(true);\r\n-  //     // if (window.confirm(\"Are you sure you want to upload this document?\")) {\r\n-  //     //   let DocFile =\r\n-  //     //     `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${base64Name.split(\";\")[1]}`\r\n-  //     //   //Api to upload document\r\n-  //     //   let response = await UploadDocument(props.employee_id, docName, DocFile, id)\r\n-  //     //   if (response.data.message === \"inserted successfully\") {\r\n-  //     //     toast.success(\"Document uploaded Successfully\", {\r\n-  //     //       position: toast.POSITION.TOP_RIGHT,\r\n-  //     //       autoClose: 1000,\r\n-  //     //     });\r\n-  //     //     setShowMoreDocType(false)\r\n-  //     //     setDocName(docName)\r\n-  //     //     setApiCall(true)\r\n-  //     //   }\r\n-  //     //   if (response.data.message === \"updated successfully\") {\r\n-  //     //     toast.success(\"Document Updated Successfully\", {\r\n-  //     //       position: toast.POSITION.TOP_RIGHT,\r\n-  //     //       autoClose: 1000,\r\n-  //     //     });\r\n-  //     //     setShowMoreDocType(false)\r\n-  //     //     setApiCall(true)\r\n-  //     //     setDocTypData(docData.find((item) => item.type === docName))\r\n-  //     //     setDocFile(docData.find((item) => item.type === docName).document_url + `?v=${new Date().getMinutes() + new Date().getSeconds()}`)\r\n-  //     //   }\r\n-  //     //   if (response.data.message === \"Invalid base64-encoded data !\") {\r\n-  //     //     toast.error(\"Document type is not valid\", {\r\n-  //     //       position: toast.POSITION.TOP_RIGHT,\r\n-  //     //       autoClose: 1000,\r\n-  //     //     });\r\n-  //     //     setApiCall(true)\r\n-  //     //   }\r\n-  //     // } else {\r\n-  //     //   toast.error(\"Document update denied.\", {\r\n-  //     //     position: toast.POSITION.TOP_RIGHT,\r\n-  //     //     autoClose: 1000,\r\n-  //     //   });\r\n-  //     //   setApiCall(true);\r\n-  //     // }\r\n-  //   }\r\n-  // };\r\n-\r\n-  /*On change fnction to upload bulk document in 1 array*/\r\n-  const handleBulkFileChange = async (event, id) => {\r\n-    const files = event.target.files;\r\n-    if (docTypeName === \"\" && bulkUpload === \"no\") {\r\n-      toast.error(\"Please select Document type!\", {\r\n-        position: toast.POSITION.TOP_RIGHT,\r\n-        autoClose: 1000,\r\n-      });\r\n-    } else {\r\n-      // Check the number of files selected\r\n-      if (files.length > 30) {\r\n-        toast.error(\"You can only upload a maximum of 30 files at a time\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        return;\r\n-      }\r\n-\r\n-      // Continue with file validation and processing\r\n-      const allowedTypes = [\".pdf\", \".doc\", \".docx\", \".jpg\", \".jpeg\", \".png\"];\r\n-      const maxSize = 1024 * 8000; // 8 MB\r\n-\r\n-      const fileList = [];\r\n-      let DocRealName;\r\n-      for (let i = 0; i < files.length; i++) {\r\n-        const file = files[i];\r\n-\r\n-        // Check file type\r\n-        const fileType = `.${file.name.split(\".\").pop()}`;\r\n-        if (!allowedTypes.includes(fileType.toLowerCase())) {\r\n-          toast.error(\r\n-            `Invalid document type for file '${file.name}'. Allowed types: PDF, DOC, DOCX, JPG, JPEG, PNG`,\r\n-            {\r\n-              position: toast.POSITION.TOP_RIGHT,\r\n-              autoClose: 1000,\r\n-            }\r\n-          );\r\n-          return;\r\n-        }\r\n-\r\n-        // Check file size\r\n-        if (file.size > maxSize) {\r\n-          toast.error(\r\n-            `Document size can't be more than 8 MB for file '${file.name}'`,\r\n-            {\r\n-              position: toast.POSITION.TOP_RIGHT,\r\n-              autoClose: 1000,\r\n-            }\r\n-          );\r\n-          return;\r\n-        }\r\n-\r\n-        // Read file as data URL\r\n-        const reader = new FileReader();\r\n-        reader.readAsDataURL(file);\r\n-        const encoded = await convertToBase64(file);\r\n-        const base64Name = encoded.base64;\r\n-\r\n-        // Construct file object with base64 data\r\n-        const DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${base64Name.split(\";\")[1]\r\n-          }`;\r\n-\r\n-        // Use DocRealName as the key for DocFile\r\n-        DocRealName = file.name.split(\".\")[0].replace(/ /g, \"_\");\r\n-        fileList.push({\r\n-          type: docData[0] === docTypData ? docTypData.type : docTypeName,\r\n-          docName: DocRealName,\r\n-          docUrl: DocFile,\r\n-        });\r\n-      }\r\n-      // Store the object of files\r\n-      setDocFileBase(fileList);\r\n-      bulkUpload === \"no\" ? setDocName(DocRealName) : setDocName(\"\");\r\n-      setShowSaveDoc(true);\r\n-    }\r\n-  };\r\n-\r\n-  /*Function to save document */\r\n-  // const SaveDocument = async () => {\r\n-  //   try {\r\n-  //     let response = await UploadDocument(\r\n-  //       props.employee_id,\r\n-  //       docData[0] === docTypData ? docTypData.type : docName,\r\n-  //       docFileBase,\r\n-  //       docData[0] === docTypData ? docTypData.id : docId,\r\n-  //       documentName\r\n-  //     );\r\n-  //     if (response.data.message === \"inserted successfully\") {\r\n-  //       toast.success(\"Document uploaded Successfully\", {\r\n-  //         position: toast.POSITION.TOP_RIGHT,\r\n-  //         autoClose: 1000,\r\n-  //       });\r\n-  //       setShowMoreDocType(false);\r\n-  //       setOtherDoc(false);\r\n-  //       setDocName(docName);\r\n-  //       setDocFileBase(\"\");\r\n-  //       setDocFileExt(\"\");\r\n-  //       setDocId(\"\");\r\n-  //       setShowSaveDoc(false);\r\n-  //       setApiCall(true);\r\n-  //       setCommentApiCall(true);\r\n-  //       setHide(false);\r\n-  //     }\r\n-  // if (response.data.message === \"updated successfully\") {\r\n-  //   toast.success(\"Document Updated Successfully\", {\r\n-  //     position: toast.POSITION.TOP_RIGHT,\r\n-  //     autoClose: 1000,\r\n-  //   });\r\n-  //   if (commentsList.length > 0) {\r\n-  //     OnHandleUpdateComment(\r\n-  //       docData[0] === docTypData ? docTypData.id : docId\r\n-  //     );\r\n-  //     // OnDeleteComment(docData[0] === docTypData ? docTypData.id : docId);\r\n-  //   }\r\n-  //   setShowMoreDocType(false);\r\n-  //   setApiCall(true);\r\n-  //   setCommentApiCall(true);\r\n-  //   setHide(false);\r\n-  //   setDocTypData(\r\n-  //     docData.find(\r\n-  //       (item) =>\r\n-  //         item.type ===\r\n-  //         (docData[0] === docTypData ? docTypData.type : docName)\r\n-  //     )\r\n-  //   );\r\n-  //   setDocFile(\r\n-  //     docData.find(\r\n-  //       (item) =>\r\n-  //         item.type ===\r\n-  //         (docData[0] === docTypData ? docTypData.type : docName)\r\n-  //     ).document_url +\r\n-  //       `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n-  //   );\r\n-  // }\r\n-  //     if (response.data.message === \"fields must not be empty !\") {\r\n-  //       toast.error(\"Document type is requried\", {\r\n-  //         position: toast.POSITION.TOP_RIGHT,\r\n-  //         autoClose: 1000,\r\n-  //       });\r\n-  //       setApiCall(true);\r\n-  //       setHide(false);\r\n-  //     }\r\n-\r\n-  //     if (\r\n-  //       response.data.message === \"Invalid base64-encoded data !\" ||\r\n-  //       response.data.message === \"Unsupported file type !\"\r\n-  //     ) {\r\n-  //       toast.error(\"Document type is not valid\", {\r\n-  //         position: toast.POSITION.TOP_RIGHT,\r\n-  //         autoClose: 1000,\r\n-  //       });\r\n-  //       setApiCall(true);\r\n-  //       setHide(false);\r\n-  //     }\r\n-  //   } catch (err) {\r\n-  //     console.log(err);\r\n-  //     setHide(false);\r\n-  //   }\r\n-  // };\r\n-  /* Upload documents in bulk*/\r\n-  let SaveBulkDocument = async () => {\r\n-    setLoadingBtn(true)\r\n-    try {\r\n-      let response = await UploadBulkDocument(\r\n-        props.employee_id,\r\n-        docFileBase,\r\n-        bulkUpload === \"no\"\r\n-          ? docData[0] === docTypData\r\n-            ? docTypData.id\r\n-            : docId\r\n-          : \"\",\r\n-        props.emp_user_type\r\n-      );\r\n-\r\n-      if (response.data.message === \"inserted successfully\") {\r\n-        // Condition: If some file types are not supported and some are supported, then those that are supported will be uploaded while those that are not supported won't.\r\n-        if (response.data.data.length > 0) {\r\n-          toast.success(\" Documents uploaded successfully.\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 2000,\r\n-          });\r\n-          toast.error(\r\n-            <>\r\n-              Unsupported Files:\r\n-              <ul>\r\n-                {response.data.data.map((item, index) => (\r\n-                  <li key={index}>{item.type}</li>\r\n-                ))}\r\n-              </ul>\r\n-            </>,\r\n-            {\r\n-              position: toast.POSITION.TOP_RIGHT,\r\n-              autoClose: 2000,\r\n-            }\r\n-          );\r\n-        } else {\r\n-          toast.success(\"Documents uploaded Successfully\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 2000,\r\n-          });\r\n-        }\r\n-        setLoadingBtn(false)\r\n-        setShowMoreDocType(false);\r\n-        setOtherDoc(false);\r\n-        setDocName(docName);\r\n-        setBulkUpload(\"\");\r\n-        setDocFileBase(\"\");\r\n-        setDocFileExt(\"\");\r\n-        setDocId(\"\");\r\n-        setShowSaveDoc(false);\r\n-        setApiCall(true);\r\n-        setCommentApiCall(true);\r\n-        setHide(false);\r\n-      }\r\n-      if (response.data.message === \"updated successfully\") {\r\n-        toast.success(\"Document Updated Successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setLoadingBtn(false)\r\n-        setEditName(false);\r\n-        setDocId(docData[0] === docTypData ? docTypData.id : docId);\r\n-        setShowMoreDocType(false);\r\n-        setOtherDoc(false);\r\n-        setApiCall(true);\r\n-        setCommentApiCall(true);\r\n-        setBulkUpload(\"\");\r\n-        setHide(false);\r\n-        setDocName(docName);\r\n-        setShowSaveDoc(false);\r\n-        // setDocTypData(docData.find((item) => item.type === docName));\r\n-        // console.log(\r\n-        //   docData.find((item) => item.type === docName),\r\n-        //   docName,\r\n-        //   docData\r\n-        // );\r\n-        // setDocFile(\r\n-        //   docData.find((item) => item.type === docName).document_url +\r\n-        //     `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n-        // );\r\n-        if (commentsList.length > 0) {\r\n-          OnHandleUpdateComment(\r\n-            docData[0] === docTypData ? docTypData.id : docId\r\n-          );\r\n-          // OnDeleteComment(docData[0] === docTypData ? docTypData.id : docId);\r\n-        }\r\n-      }\r\n-\r\n-      if (\r\n-        response.data.message === \"Invalid base64-encoded data !\" ||\r\n-        response.data.message === \"Unsupported file type !\"\r\n-      ) {\r\n-        toast.error(\"Document type is not valid\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setLoadingBtn(false)\r\n-        setApiCall(true);\r\n-        setHide(false);\r\n-        setBulkUpload(\"\");\r\n-        setShowSaveDoc(false);\r\n-      }\r\n-      if (\r\n-        response.data.message === \"all fields required !\" ||\r\n-        response.data.message === \"fields must not be empty !\"\r\n-      ) {\r\n-        toast.error(\"All fields are required !\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setLoadingBtn(false)\r\n-        setApiCall(true);\r\n-        setShowSaveDoc(false);\r\n-        setHide(false);\r\n-        setBulkUpload(\"\");\r\n-      }\r\n-      if (response.error === \"Unauthorized\") {\r\n-        toast.error(\"Token expires, please log in again.\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setLoadingBtn(false)\r\n-        setApiCall(true);\r\n-        setHide(false);\r\n-        setShowSaveDoc(false);\r\n-        setBulkUpload(\"\");\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err);\r\n-      toast.error(\"Something went wrong try again later!\", {\r\n-        position: toast.POSITION.TOP_RIGHT,\r\n-        autoClose: 1000,\r\n-      });\r\n-      setLoadingBtn(false)\r\n-      setApiCall(true);\r\n-      setShowSaveDoc(false);\r\n-      setHide(false);\r\n-      setBulkUpload(\"\");\r\n-      setShowMoreDocType(false);\r\n-      setEditName(false)\r\n-\r\n-    }\r\n-  };\r\n-  /*Fuinction to render image */\r\n-  const RenderNewDocFile = () => {\r\n-    return (\r\n-      <React.Fragment>\r\n-        {docFile ? (\r\n-          <>\r\n-            <div\r\n-              className=\"w-100\"\r\n-              ref={fileViewerRef}\r\n-              onClick={handleFileViewerClick}\r\n-            >\r\n-              <LazyLoad\r\n-                height={\"100%\"}\r\n-                offsetVertical={\"100%\"}\r\n-                debounce={false}\r\n-              >\r\n-                {docTypData &&\r\n-                  (docTypData.document_name &&\r\n-                    docTypData.document_name.toLowerCase().includes(\"imm\") ? (\r\n-                    <iframe\r\n-                      src={docFile}\r\n-                      style={{ height: \"calc(100vh - 200px)\" }}\r\n-                      width={\"100%\"}\r\n-                      title={docTypData.document_name}\r\n-                    ></iframe>\r\n-                  ) : (\r\n-                    <FileViewer\r\n-                      key={docTypData.id}\r\n-                      fileType={\r\n-                        docFileExt\r\n-                          ? docFileExt\r\n-                          : docTypData.extension_type ===\r\n-                            \"vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n-                            ? \"docx\"\r\n-                            : docTypData.extension_type\r\n-                      }\r\n-                      filePath={docFile}\r\n-                      errorComponent={() => <div>Error loading document</div>}\r\n-                    />\r\n-                  ))}\r\n-              </LazyLoad>\r\n-            </div>\r\n-          </>\r\n-        ) : (\r\n-          <div className=\"text-center mt-5\">No document found</div>\r\n-        )}\r\n-      </React.Fragment>\r\n-    );\r\n-  };\r\n-  /* Function to replace the _ and correct the document type */\r\n-  const textReplaceFunction = (e) => {\r\n-    if (e && e.includes(\"_\")) {\r\n-      let new_text = e.replaceAll(\"_\", \" \");\r\n-      return new_text;\r\n-    } else {\r\n-      return e;\r\n-    }\r\n-  };\r\n-  /*Function to verify the applicants documents */\r\n-  const onVerifyDocuments = async (id, verify) => {\r\n-    try {\r\n-      let response = await VarifyDocument(id, verify);\r\n-      if (response.data.message === \"successfully\") {\r\n-        toast.success(\"Document Verify Successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setApiCall(true);\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err);\r\n-    }\r\n-  };\r\n-  /*Function to delete document  */\r\n-  const OnDeleteDoc = async (id) => {\r\n-    try {\r\n-      let res = await DeleteDocument(id, props.emp_user_type);\r\n-      if (res.data.message === \"document deleted successfully!\") {\r\n-        toast.success(\"Document deleted Successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setDocFile(\"\");\r\n-        setDocId(\"\");\r\n-        setDocData(\"\");\r\n-        setDocTypData(\"\");\r\n-        setDocName(\"\");\r\n-        setApiCall(true);\r\n-        setOtherDoc(false);\r\n-        GetDocument(true);\r\n-      }\r\n-      if (res.data.message === \"Error deleting document\") {\r\n-        toast.success(\"Error deleting document ! Try again later\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setDocFile(\"\");\r\n-        setDocId(\"\");\r\n-        setDocData(\"\");\r\n-        setDocTypData(\"\");\r\n-        setDocName(\"\");\r\n-        setApiCall(true);\r\n-        setOtherDoc(false);\r\n-        GetDocument(true);\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err);\r\n-    }\r\n-  };\r\n-  /*Type array */\r\n-  let DocTypeData = props.emp_user_type === \"employer\" ?\r\n-    [\"Business T2\",\r\n-      \"Recent PD7A\",\r\n-      \"Business T4\",\r\n-      \"Business Incorporation Certificate\",\r\n-      \"Employment Contract\",\r\n-      \"Schedule A\",\r\n-      \"Signed Job Offer\",\r\n-      \"PD7A of year\",\r\n-      \"T2 Schedule 100 and 125\",\r\n-      \"Certificate of incorporation, \",\r\n-      \"Business license\",\r\n-      \"T4 summary of year\",\r\n-      \"Request for Exception from English Language Requirement for LMIA Application\",\r\n-      \"CPA Attestation Letter\",\r\n-      \"Representative Submission Letter\",] : [\r\n-      \"passport\",\r\n-      \"drivers_license\",\r\n-      \"photograph\",\r\n-      \"immigration_status\",\r\n-      \"lmia\",\r\n-      \"job_offer_letter\",\r\n-      \"provincial_nominee_letter\",\r\n-      \"proof_of_funds\",\r\n-      \"proof_of_employment\",\r\n-      \"marriage_certificate\",\r\n-      \"education_metric\",\r\n-      \"education_higher_secondary\",\r\n-      \"education_graduation\",\r\n-      \"education_post_graduation\",\r\n-      \"resume_or_cv\",\r\n-      \"ielts\",\r\n-      \"medical\",\r\n-      \"police_clearance\",\r\n-      \"refusal_letter\",\r\n-      \"Employment Contract\",\r\n-      \"Reference Letters\",\r\n-      \"Client Info\",\r\n-      \"Representative Submission Letter\",\r\n-      \"Bank Statement\",\r\n-    ];\r\n-  //UseEfect for document\r\n-  useEffect(() => {\r\n-    GetDocument();\r\n-    RenderNewDocFile();\r\n-    if (apiCall === true) {\r\n-      setApiCall(false);\r\n-    }\r\n-    setAnnotationMode(false);\r\n-    //Condition to clear docid from url after navigation from notification\r\n-    if (props.docId) {\r\n-      const newUrl = window.location.pathname;\r\n-      window.history.replaceState({}, document.title, newUrl);\r\n-    }\r\n-  }, [docId, apiCall, selectDocTypeName, props.employee_id, props.docId]);\r\n-  //USeEffect foe commet replies list\r\n-  useEffect(() => {\r\n-    // getCommentsReplyList();\r\n-    if (user_type === \"admin\") {\r\n-      AdminData();\r\n-    }\r\n-  }, [replyCommentClick]);\r\n-  //USeEffect foe commet list\r\n-  useEffect(() => {\r\n-    setSelectedAnnotation(null);\r\n-    getCommentsList();\r\n-    if (commenAapiCall === true) {\r\n-      setCommentApiCall(false);\r\n-    }\r\n-  }, [docId, commenAapiCall, adminid, annotationStatus]);\r\n-\r\n-  const handleDocTypeChange = (e) => {\r\n-    const selectedValue = e.target.value;\r\n-    if (selectedValue === \"other\") {\r\n-      setOtherDoc(true);\r\n-      setShowMoreDocType(false);\r\n-      setDocTypData(\"\");\r\n-      setDocId(\"\");\r\n-      setDocName(\"\");\r\n-    } else {\r\n-      setOtherDoc(false);\r\n-      setDocTypeName(selectedValue);\r\n-    }\r\n-  };\r\n-  /*Function to download Document */\r\n-  const DownloadDocument = async () => {\r\n-    const response = await fetch(docFile);\r\n-    const blob = await response.blob();\r\n-    const url = URL.createObjectURL(blob);\r\n-\r\n-    const link = document.createElement(\"a\");\r\n-    link.href = url;\r\n-    link.download = docTypData.document_name + \".\" + docTypData.extension_type;\r\n-    document.body.appendChild(link);\r\n-    link.click();\r\n-    document.body.removeChild(link);\r\n-\r\n-    // Clean up the temporary URL\r\n-    URL.revokeObjectURL(url);\r\n-  };\r\n-  /*Function to Print Document  */\r\n-  const PrintDocument = () => {\r\n-    const printWindow = window.open(\"\", \"_blank\");\r\n-    const content = `\r\n-      <html>\r\n-        <head>\r\n-          <title>Print Document</title>\r\n-        </head>\r\n-        <body>\r\n-          <embed src=\"${docFile}\" width=\"100%\" height=\"100%\">\r\n-        </body>\r\n-      </html>\r\n-    `;\r\n-\r\n-    printWindow.document.open();\r\n-    printWindow.document.write(content);\r\n-    printWindow.document.close();\r\n-    printWindow.onload = () => {\r\n-      printWindow.print();\r\n-    };\r\n-  };\r\n-\r\n-  /*Major api's for annotations */\r\n-  // Function to add annotation based on conditions\r\n-  const addAnnotation = async (annotation) => {\r\n-    setAddCommentFlag(false);\r\n-    // Retrieve data from local storage\r\n-\r\n-    const subject = \"\";\r\n-    const comment = comments; ///\\S+@\\S+\\.\\S+/.test(comments) ? \"\" : comments;\r\n-    let DocId = docId\r\n-      ? docId\r\n-      : docData.find((item) => item.type === docName).id;\r\n-    let sender = allAdmin.find((item) => item.admin_id === admin_id)\r\n-      ? allAdmin.find((item) => item.admin_id === admin_id).name\r\n-      : \"\";\r\n-    let senderEmail = allAdmin.find((item) => item.admin_id === admin_id)\r\n-      ? allAdmin.find((item) => item.admin_id === admin_id).email\r\n-      : \"\";\r\n-    const AdminType = localStorage.getItem(\"admin_type\");\r\n-    // Variables for mentionaing admins\r\n-    const email = selectedAdmin || \"\"; ///\\S+@\\S+\\.\\S+/.test(comments) ? comments : \"\";\r\n-    let assignedAdminName = allAdmin.filter((item) =>\r\n-      selectedAdmin.includes(item.email)\r\n-    )\r\n-      ? allAdmin\r\n-        .filter((item) => selectedAdmin.includes(item.email))\r\n-        .map((admin) => admin.name)\r\n-        .join(\",\")\r\n-      : \"\";\r\n-    const assignedUserId = allAdmin.filter((item) =>\r\n-      selectedAdmin.includes(item.email)\r\n-    )\r\n-      ? allAdmin\r\n-        .filter((item) => selectedAdmin.includes(item.email))\r\n-        .map((admin) => admin.admin_id)\r\n-        .join(\",\")\r\n-      : \"\";\r\n-    const assignedUserType = allAdmin.filter((item) =>\r\n-      selectedAdmin.includes(item.email)\r\n-    )\r\n-      ? allAdmin\r\n-        .filter((item) => selectedAdmin.includes(item.email))\r\n-        .map((admin) => admin.admin_type)\r\n-        .join(\",\")\r\n-      : \"\";\r\n-\r\n-    // Send data to the API\r\n-    if (comment === \"\" && email === \"\") {\r\n-      toast.error(\"Comment or email cannot be empty!\", {\r\n-        position: toast.POSITION.TOP_RIGHT,\r\n-        autoClose: 1000,\r\n-      });\r\n-    } else {\r\n-      try {\r\n-        let res = await ADocAnnotation(\r\n-          admin_id,\r\n-          DocId,\r\n-          assignedUserId,\r\n-          email,\r\n-          subject,\r\n-          comment,\r\n-          annotation.x_axis,\r\n-          annotation.y_axis,\r\n-          \"document\",\r\n-          AdminType, //sender type\r\n-          sender, //sender name,\r\n-          assignedAdminName, //assigned Admin or user Name,\r\n-          \"\", //follow up status(for notes only)\r\n-          \"\", //Next follow up date(for notes only)\r\n-          assignedUserType, //Assign user type,\r\n-          \"\", //Document url(for notes only)\r\n-          senderEmail, //Sender email\r\n-          props.employee_id //Userid\r\n-        );\r\n-        if (res.data.message === \"task inserted successfully!\") {\r\n-          toast.success(\"Comment uploaded Successfully\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 1000,\r\n-          });\r\n-          setSelectedAnnotation(null);\r\n-          setComments(\"\");\r\n-          setCommentApiCall(true);\r\n-          setSelectedAdmin(\"\");\r\n-          setAnnotationMode(!isAnnotationMode);\r\n-          setFilteredEmails([]);\r\n-          // setNotificationApiCall(true);\r\n-          localStorage.setItem(\"callNotification\", true);\r\n-        }\r\n-      } catch (err) {\r\n-        console.log(err);\r\n-        if (err.response.data.message === \"required fields cannot be blank\") {\r\n-          toast.error(\" Please try again later.\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 1000,\r\n-          });\r\n-          setSelectedAnnotation(null);\r\n-          setComments(\"\");\r\n-          setSelectedAdmin(\"\");\r\n-          setCommentApiCall(true);\r\n-          setAnnotationMode(!isAnnotationMode);\r\n-          setAddCommentFlag();\r\n-          setFilteredEmails([]);\r\n-        }\r\n-      }\r\n-    }\r\n-    // Update state to include the new annotation\r\n-    // setImageAnnotations([...imageAnnotations, { x, y }]);\r\n-  };\r\n-  /* Function to update comment and assign */\r\n-  const OnHandleUpdateComment = async (originalData) => {\r\n-    let updatedData;\r\n-    //Condtion to update x and y axis on documet update\r\n-    if (originalData === (docData[0] === docTypData ? docTypData.id : docId)) {\r\n-      updatedData = { doc_id: originalData, x_axis: 0, y_axis: 0 };\r\n-    } else {\r\n-      updatedData = { ...originalData };\r\n-      updatedData.status = originalData.status === \"1\" ? \"0\" : \"1\";\r\n-    }\r\n-    try {\r\n-      // Call the API with the updated data\r\n-      let res = await UpdateDocuentcommentAssign(updatedData);\r\n-      if (res.message === \"Task updated successfully!\") {\r\n-        toast.success(\"Task completed Successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setSelectedAnnotation(null);\r\n-        setComments(\"\");\r\n-        setCommentApiCall(true);\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err);\r\n-    }\r\n-  };\r\n-  /*Function to delete document comments*/\r\n-  // const OnDeleteComment = async (docId) => {\r\n-  //   try {\r\n-  //     let res = await DeleteCommentsAndAssign(docId);\r\n-  //     console.log(res);\r\n-  //   } catch (err) {\r\n-  //     console.log(err);\r\n-  //   }\r\n-  // };\r\n-  /*Function to set the color code to the background of the user name */\r\n-  const determineBackgroundColor = (commentItem) => {\r\n-    const colorClasses = [\r\n-      \"bg-primary-opacity-7\",\r\n-      \"bg-warning-opacity-7\",\r\n-      \"bg-orange-opacity-6\",\r\n-      \"bg-info-opacity-7\",\r\n-      \"bg-secondary-opacity-7\",\r\n-      \"bg-danger-opacity-6\",\r\n-      \"bg-info-opacity-visible\",\r\n-    ];\r\n-\r\n-    const assignedUserId = commentItem.assigned_to_user_id;\r\n-\r\n-    // Create a mapping dynamically based on assignedUserId\r\n-    const userColorMap = {};\r\n-\r\n-    // Check if assignedUserId is present in the mapping\r\n-    if (assignedUserId && userColorMap.hasOwnProperty(assignedUserId)) {\r\n-      return userColorMap[assignedUserId];\r\n-    }\r\n-\r\n-    // If not found in the mapping, use the colorClasses logic\r\n-    const id = commentItem.id;\r\n-    const hashCode = (str) => {\r\n-      let hash = 0;\r\n-      for (let i = 0; i < str.length; i++) {\r\n-        const char = str.charCodeAt(i);\r\n-        hash = (hash << 5) - hash + char;\r\n-      }\r\n-      return hash;\r\n-    };\r\n-\r\n-    const hash = Math.abs(hashCode(id.toString()));\r\n-    const index = hash % colorClasses.length;\r\n-\r\n-    return colorClasses[index];\r\n-  };\r\n-  /*Function to reply for the comment */\r\n-  const ReplyAnnotation = async (data) => {\r\n-    // let emailrejex = /\\S+@\\S+\\.\\S+/;\r\n-    // let id = emailrejex.test(selectedAdminReply)\r\n-    //   ? allAdmin.find((item) => item.email === selectedAdminReply).admin_id\r\n-    //   : data.assined_to_user_id;\r\n-    // let adminType = emailrejex.test(selectedAdminReply)\r\n-    //   ? allAdmin.find((item) => item.email === selectedAdminReply).admin_type\r\n-    //   : \"admin\";\r\n-    let sender = allAdmin.find((item) => item.admin_id === admin_id)\r\n-      ? allAdmin.find((item) => item.admin_id === admin_id).name\r\n-      : \"\";\r\n-    let senderId = allAdmin.find((item) => item.admin_id === admin_id)\r\n-      ? allAdmin.find((item) => item.admin_id === admin_id).admin_id\r\n-      : \"\";\r\n-    let senderEmail = allAdmin.find((item) => item.admin_id === admin_id)\r\n-      ? allAdmin.find((item) => item.admin_id === admin_id).email\r\n-      : \"\";\r\n-    let senderType = allAdmin.find((item) => item.admin_id === admin_id)\r\n-      ? allAdmin.find((item) => item.admin_id === admin_id).admin_type\r\n-      : \"\";\r\n-    // let assignedAdminName = allAdmin.find(\r\n-    //   (item) => item.email === selectedAdminReply\r\n-    // )\r\n-    //   ? allAdmin.find((item) => item.email === selectedAdminReply).name\r\n-    //   : \"\";\r\n-    // Variables for mentioning admins\r\n-    const email = selectedAdminReply || \"\"; ///\\S+@\\S+\\.\\S+/.test(comments) ? comments : \"\";\r\n-    let assignedAdminName = allAdmin.filter((item) =>\r\n-      selectedAdminReply.includes(item.email)\r\n-    )\r\n-      ? allAdmin\r\n-        .filter((item) => selectedAdminReply.includes(item.email))\r\n-        .map((admin) => admin.name)\r\n-        .join(\",\")\r\n-      : \"\";\r\n-    const assignedUserId = allAdmin.filter((item) =>\r\n-      selectedAdminReply.includes(item.email)\r\n-    )\r\n-      ? allAdmin\r\n-        .filter((item) => selectedAdminReply.includes(item.email))\r\n-        .map((admin) => admin.admin_id)\r\n-        .join(\",\")\r\n-      : \"\";\r\n-    const AdminType = //localStorage.getItem(\"admin_type\");\r\n-      allAdmin.filter((item) => selectedAdminReply.includes(item.email))\r\n-        ? allAdmin\r\n-          .filter((item) => selectedAdminReply.includes(item.email))\r\n-          .map((admin) => admin.admin_type)\r\n-          .join(\",\")\r\n-        : \"\";\r\n-    if (replyComment === \"\" && email === \"\") {\r\n-      toast.error(\"Comment or email cannot be empty!\", {\r\n-        position: toast.POSITION.TOP_RIGHT,\r\n-        autoClose: 1000,\r\n-      });\r\n-    } else {\r\n-      try {\r\n-        let res = await SendReplyCommit(\r\n-          data,\r\n-          email,\r\n-          replyComment,\r\n-          assignedUserId,\r\n-          AdminType,\r\n-          sender,\r\n-          assignedAdminName,\r\n-          \"document\",\r\n-          senderId,\r\n-          senderEmail,\r\n-          senderType,\r\n-          props.employee_id //Userid\r\n-        );\r\n-        if (res.data.message === \"message sent successfully!\") {\r\n-          toast.success(\"Replied Successfully\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 1000,\r\n-          });\r\n-          // setNotificationApiCall(true);\r\n-          localStorage.setItem(\"callNotification\", true);\r\n-          setReplyComment(\"\");\r\n-          getCommentsReplyList();\r\n-          setSelectedAdminReplye(\"\");\r\n-          setFilteredEmails([]);\r\n-        }\r\n-      } catch (err) {\r\n-        console.log(err);\r\n-        setSelectedAdminReplye(\"\");\r\n-        setFilteredEmails([]);\r\n-      }\r\n-    }\r\n-  };\r\n-  return (\r\n-    <div\r\n-      className={\r\n-        // props.page === \"company_profile\"\r\n-        //\r\n-        \"document_container bg-white\"\r\n-        // : \"container document_container bg-white p-5 mb-10\"\r\n-      }\r\n-    >\r\n-      <div className=\"row m-0 bg-white\">\r\n-        {/* Document list */}\r\n-        <DocumentList\r\n-          selectDocTypeName={selectDocTypeName}\r\n-          user_type={user_type}\r\n-          docData={docData}\r\n-          setShowMoreDocType={setShowMoreDocType}\r\n-          setDocTypData={setDocTypData}\r\n-          setDocName={setDocName}\r\n-          setDocId={setDocId}\r\n-          setOtherDoc={setOtherDoc}\r\n-          setHide={setHide}\r\n-          setShowSaveDoc={setShowSaveDoc}\r\n-          setFilteredEmails={setFilteredEmails}\r\n-          setAnnotationMode={setAnnotationMode}\r\n-          setReplyCommentClick={setReplyCommentClick}\r\n-          setDocFile={setDocFile}\r\n-          docName={docName}\r\n-          docId={docId}\r\n-          setEditName={setEditName}\r\n-          OnDeleteDoc={OnDeleteDoc}\r\n-          textReplaceFunction={textReplaceFunction}\r\n-          setBulkUpload={setBulkUpload}\r\n-          SaveBulkDocument={SaveBulkDocument}\r\n-          editName={editName}\r\n-          setDocFileBase={setDocFileBase}\r\n-          isAnnotationMode={isAnnotationMode}\r\n-          setApiCall={setApiCall}\r\n-          setSelecttDocTypeName={setSelecttDocTypeName}\r\n-          docAllTypes={docAllTypes}\r\n-          setDocTypeName={setDocTypeName}\r\n-          userId={props.employee_id}\r\n-        // setNotificationDoc={setNotificationDoc}\r\n-        // notificationApiCall={notificationApiCall}\r\n-        // setNotificationApiCall={setNotificationApiCall}\r\n-        />\r\n-        {/* Document view */}\r\n-        <ViewDocument\r\n-          handleBulkFileChange={handleBulkFileChange}\r\n-          setBulkUpload={setBulkUpload}\r\n-          showSaveDoc={showSaveDoc}\r\n-          SaveBulkDocument={SaveBulkDocument}\r\n-          setHide={setHide}\r\n-          setApiCall={setApiCall}\r\n-          setShowSaveDoc={setShowSaveDoc}\r\n-          setDocFile={setDocFile}\r\n-          setDocFileExt={setDocFileExt}\r\n-          setFilteredEmails={setFilteredEmails}\r\n-          docFile={docFile}\r\n-          docName={docName}\r\n-          Verified={Verified}\r\n-          onVerifyDocuments={onVerifyDocuments}\r\n-          PrintDocument={PrintDocument}\r\n-          DownloadDocument={DownloadDocument}\r\n-          loading={loading}\r\n-          Loader={Loader}\r\n-          RenderNewDocFile={RenderNewDocFile}\r\n-          setAnnotationMode={setAnnotationMode}\r\n-          setComments={setComments}\r\n-          setReplyCommentClick={setReplyCommentClick}\r\n-          setAddCommentFlag={setAddCommentFlag}\r\n-          docTypData={docTypData}\r\n-          handleFlagClick={handleFlagClick}\r\n-          setSelectedAnnotation={setSelectedAnnotation}\r\n-          hide={hide}\r\n-          user_type={user_type}\r\n-          isAnnotationMode={isAnnotationMode}\r\n-          imageAnnotations={imageAnnotations}\r\n-          selectedAnnotation={selectedAnnotation}\r\n-          otherDoc={otherDoc}\r\n-          setDocName={setDocName}\r\n-          DocTypeData={DocTypeData}\r\n-          textReplaceFunction={textReplaceFunction}\r\n-          setShowMoreDocType={setShowMoreDocType}\r\n-          setDocTypData={setDocTypData}\r\n-          setDocId={setDocId}\r\n-          setOtherDoc={setOtherDoc}\r\n-          showMoreDocType={showMoreDocType}\r\n-          handleDocTypeChange={handleDocTypeChange}\r\n-          setDocTypeName={setDocTypeName}\r\n-          docTypeName={docTypeName}\r\n-          bulkUpload={bulkUpload}\r\n-        />\r\n-        {/* Annotation  */}\r\n-        <div className=\"col-md-3 px-2 py-2 comments_and_replies\">\r\n-          {/* Add Annotation form */}\r\n-          {!hide &&\r\n-            docFile &&\r\n-            docName &&\r\n-            user_type === \"admin\" &&\r\n-            selectedAnnotation && //condition for imm pdf\r\n-            (docTypData.document_name &&\r\n-              docTypData.document_name.toLowerCase().includes(\"imm\")\r\n-              ? replyCommentClick === undefined ||\r\n-              replyCommentClick === \"\" ||\r\n-              replyCommentClick === null\r\n-              : addCommentFlag === true) ? (\r\n-            <div\r\n-              style={\r\n-                {\r\n-                  // position: \"absolute\",\r\n-                  // left: selectedAnnotation.x_axis + 10,\r\n-                  // top: selectedAnnotation.y_axis + 20,\r\n-                  // zIndex: 1,\r\n-                }\r\n-              }\r\n-              className=\"pt-0 pb-5\"\r\n-            >\r\n-              <form\r\n-                className=\"comment-form\"\r\n-                onSubmit={(e) => {\r\n-                  e.preventDefault();\r\n-                  addAnnotation(selectedAnnotation);\r\n-                }}\r\n-              >\r\n-                <div className=\"comment-input-container m-0 mb-2\">\r\n-                  <label className=\"m-0\">\r\n-                    <b> Add Annotation:</b>\r\n-                  </label>\r\n-                  <input\r\n-                    type=\"text\"\r\n-                    value={comments || \"\"}\r\n-                    onChange={handleInputChange}\r\n-                    placeholder=\"Comments or add others with @\"\r\n-                    className=\"comment-input\"\r\n-                  />\r\n-                  {filteredEmails.length > 0 && (\r\n-                    <ul className=\"email-suggestions\">\r\n-                      {filteredEmails.map((email) => (\r\n-                        <li\r\n-                          key={email.email}\r\n-                          onClick={() => handleEmailClick(email.email)}\r\n-                          onMouseOver={() => handleEmailMouseOver(email.email)}\r\n-                          className=\"email-suggestion-item\"\r\n-                        >\r\n-                          <strong>{email.name}</strong>\r\n-                        </li>\r\n-                      ))}\r\n-                    </ul>\r\n-                  )}\r\n-                </div>\r\n-                <div className=\"button-container mx-0\">\r\n-                  <button\r\n-                    type=\"submit\"\r\n-                    // onClick={(e) => {\r\n-                    //   e.preventDefault();\r\n-                    //   addAnnotation(selectedAnnotation);\r\n-\r\n-                    // }}\r\n-                    className=\"btn-sm btn-primary save-comment-btn\"\r\n-                  >\r\n-                    Save Comment\r\n-                  </button>\r\n-                  <button\r\n-                    className=\"btn-sm btn-light cancel-btn\"\r\n-                    onClick={() => {\r\n-                      setAddCommentFlag();\r\n-                      setSelectedAnnotation(null);\r\n-                      setComments(\"\");\r\n-                      setAnnotationMode(!isAnnotationMode);\r\n-                      setFilteredEmails([]);\r\n-                    }}\r\n-                  >\r\n-                    Cancel\r\n-                  </button>\r\n-                </div>\r\n-              </form>\r\n-            </div>\r\n-          ) : null}\r\n-          {/* Comment box */}\r\n-          {user_type === \"admin\" ? (\r\n-            <CommentBox\r\n-              commentsReplyList={commentsReplyList}\r\n-              docData={docData}\r\n-              adminid={adminid}\r\n-              setAdminId={setAdminId}\r\n-              allAdmin={allAdmin}\r\n-              annotationStatus={annotationStatus}\r\n-              setAnnotationStatus={setAnnotationStatus}\r\n-              commentsList={commentsList}\r\n-              selectedAnnotation={selectedAnnotation}\r\n-              setSelectedAnnotation={setSelectedAnnotation}\r\n-              OnHandleUpdateComment={OnHandleUpdateComment}\r\n-              determineBackgroundColor={determineBackgroundColor}\r\n-              setReplyCommentClick={setReplyCommentClick}\r\n-              replyCommentClick={replyCommentClick}\r\n-              replyComment={replyComment}\r\n-              handleInputChange={handleInputChange}\r\n-              filteredEmails={filteredEmails}\r\n-              handleEmailClick={handleEmailClick}\r\n-              handleEmailMouseOver={handleEmailMouseOver}\r\n-              ReplyAnnotation={ReplyAnnotation}\r\n-              getCommentsReplyList={getCommentsReplyList}\r\n-              setAddCommentFlag={setAddCommentFlag}\r\n-              setFilteredEmails={setFilteredEmails}\r\n-              docTypData={docTypData}\r\n-              setHide={setHide}\r\n-            />\r\n-          ) : null}\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-}\r\n"
                },
                {
                    "date": 1710320465242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -256,9 +256,9 @@\n       ) {\r\n         setDocData([]);\r\n         setLoading(false);\r\n       } else {\r\n-        {\r\n+        \r\n           if (\r\n             response.data.data.allData.length === 0 ||\r\n             response.data.data.allData === undefined ||\r\n             response.data.data.allData === \"\" ||\r\n@@ -408,9 +408,9 @@\n                 setNotificationDoc(0);\r\n               }\r\n             }\r\n           }\r\n-        }\r\n+        \r\n       }\r\n     } catch (err) {\r\n       console.log(err);\r\n       setLoading(false);\r\n"
                }
            ],
            "date": 1708929026448,
            "name": "Commit-0",
            "content": "import React, { useState, useRef } from \"react\";\r\n// import { Form } from \"react-bootstrap\";\r\nimport Loader from \"./loader\";\r\nimport {\r\n  // UploadDocument,\r\n  UploadBulkDocument,\r\n  GetEmployeeDocumentList,\r\n  VarifyDocument,\r\n  ADocAnnotation,\r\n  GetCommentsAndAssign,\r\n  getallAdminData,\r\n  UpdateDocuentcommentAssign,\r\n  // DeleteCommentsAndAssign,\r\n  DeleteDocument,\r\n  SendReplyCommit,\r\n  GetReplyCommit,\r\n} from \"../../api/api\";\r\nimport LazyLoad from \"react-lazy-load\";\r\nimport { toast } from \"react-toastify\";\r\nimport FileViewer from \"react-file-viewer\";\r\nimport { useEffect } from \"react\";\r\nimport Verified from \"../../media/verified.png\";\r\n/*Annotation */\r\nimport CommentBox from \"./CommentBox\";\r\nimport DocumentList from \"./DocumentList\";\r\nimport ViewDocument from \"./ViewDocument\";\r\nexport default function DocumrentContainer(props) {\r\n  const [otherDoc, setOtherDoc] = useState(false);\r\n  const [docName, setDocName] = useState(\"\");\r\n  const [editName, setEditName] = useState(false);\r\n  const [docData, setDocData] = useState([]);\r\n  const [docAllTypes, setDocAllTypes] = useState([]);\r\n  const [docTypData, setDocTypData] = useState(\"\");\r\n  const [apiCall, setApiCall] = useState(\"\");\r\n  const [docFile, setDocFile] = useState(\"\");\r\n  const [docFileBase, setDocFileBase] = useState(\"\");\r\n  const [docFileExt, setDocFileExt] = useState(\"\");\r\n  const [docId, setDocId] = useState(props.docId ? props.docId : \"\");\r\n  const [docTypeName, setDocTypeName] = useState(\"\");\r\n  const [selectDocTypeName, setSelecttDocTypeName] = useState(\"\");\r\n  const [showMoreDocType, setShowMoreDocType] = useState(false);\r\n  const [showSaveDoc, setShowSaveDoc] = useState(false);\r\n  const [hide, setHide] = useState(false);\r\n  const [bulkUpload, setBulkUpload] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  // Notification states to send in notificaion component\r\n  const [notificationDoc, setNotificationDoc] = useState(props.docId ? 1 : 0);\r\n  const [notificationApiCall, setNotificationApiCall] = useState(false);\r\n  // let encoded;\r\n  let user_type = localStorage.getItem(\"userType\");\r\n  let admin_id = localStorage.getItem(\"admin_id\");\r\n  // Annotation State\r\n  const [commenAapiCall, setCommentApiCall] = useState(\"\");\r\n  const [imageAnnotations, setImageAnnotations] = useState([]);\r\n  const [comments, setComments] = useState(\"\");\r\n  const [replyComment, setReplyComment] = useState(\"\");\r\n  const [commentsList, setCommentsList] = useState([]);\r\n  const [selectedAnnotation, setSelectedAnnotation] = useState(null);\r\n  const [isAnnotationMode, setAnnotationMode] = useState(false);\r\n  let [allAdmin, setAllAdmin] = useState([]);\r\n  let [adminid, setAdminId] = useState();\r\n  const [selectedAdmin, setSelectedAdmin] = useState(\"\");\r\n  const [selectedAdminReply, setSelectedAdminReplye] = useState(\"\");\r\n  const [addCommentFlag, setAddCommentFlag] = useState(false);\r\n  const [filteredEmails, setFilteredEmails] = useState([]);\r\n  const fileViewerRef = useRef(null);\r\n  let [annotationStatus, setAnnotationStatus] = useState();\r\n  let [replyCommentClick, setReplyCommentClick] = useState();\r\n  const [commentsReplyList, setCommentsReplyList] = useState([]);\r\n  /*Function to get admin list */\r\n  const AdminData = async () => {\r\n    try {\r\n      const userData = await getallAdminData();\r\n      if (userData.data.length === 0) {\r\n        setAllAdmin([]);\r\n      } else {\r\n        // const filteredData = userData.data.filter(item => item.admin_type === \"manager\");\r\n        setAllAdmin(userData.data);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  /*onchange Function to set email or any other comment  */\r\n  const handleInputChange = (event, type) => {\r\n    // const value = event.target.value;\r\n    // console.log(value.startsWith(\"@\"), value.includes(\" @\"));\r\n    // if (value.startsWith(\"@\")) {\r\n    // AdminData();\r\n    // if (allAdmin) {\r\n    //   // Filter admin emails based on input\r\n    //   let filteredAdminEmails = allAdmin.filter((admin) =>\r\n    //     admin.email.toLowerCase().includes(value.slice(1).toLowerCase())\r\n    //   );\r\n\r\n    //   // Update the filtered emails\r\n    //   setFilteredEmails(filteredAdminEmails);\r\n    // }\r\n    // } else {\r\n    //   // Reset filtered emails if input doesn't start with '@'\r\n    //   setFilteredEmails([]);\r\n    // }\r\n\r\n    // // Update the input value\r\n    // if (type === \"reply\") {\r\n    //   setReplyComment(value);\r\n    // } else {\r\n    //   setComments(value);\r\n    // }\r\n    const inputValue = event.target.value;\r\n    // Update the input value\r\n    if (type === \"reply\") {\r\n      setReplyComment(inputValue);\r\n    } else {\r\n      setComments(inputValue);\r\n    }\r\n\r\n    let lastChar = inputValue.slice(-1);\r\n    const atIndex = inputValue.indexOf(\"@\");\r\n\r\n    if (lastChar === \"@\" || inputValue.includes(\"@\")) {\r\n      AdminData();\r\n      if (allAdmin) {\r\n        // Filter admin emails based on input\r\n        let filteredAdminEmails = allAdmin.filter((admin) =>\r\n          admin.email.toLowerCase().includes(\r\n            String(inputValue)\r\n              .substring(atIndex + 1)\r\n              .toLowerCase()\r\n          )\r\n        );\r\n\r\n        // Update the filtered emails\r\n        setFilteredEmails(filteredAdminEmails);\r\n      }\r\n    } else {\r\n      setFilteredEmails([]);\r\n    }\r\n  };\r\n  /*Function to get the email to assign */\r\n  const handleEmailClick = (email, type) => {\r\n    // Set the selected admin and update the input value\r\n    if (type === \"reply\") {\r\n      setSelectedAdminReplye((prevValue) => prevValue + email + \",\");\r\n      setReplyComment((prevValue) => `${prevValue} ${email} `);\r\n    } else {\r\n      setSelectedAdmin((prevValue) => prevValue + email + \",\");\r\n      setComments((prevValue) => `${prevValue} ${email} `);\r\n    }\r\n    setFilteredEmails([]);\r\n  };\r\n  /*Function to get the email to input on hover */\r\n  const handleEmailMouseOver = (email, type) => {\r\n    // Highlight the email on mouseover\r\n    if (type === \"reply\") {\r\n      setSelectedAdminReplye(email);\r\n    } else {\r\n      setSelectedAdmin(email);\r\n    }\r\n  };\r\n  // Handle click event on the FileViewer to capture annotations\r\n  const handleFileViewerClick = (e) => {\r\n    if (isAnnotationMode) {\r\n      const rect = fileViewerRef.current.getBoundingClientRect();\r\n      const x_axis = e.clientX - rect.left;\r\n      const y_axis = e.clientY - rect.top;\r\n      handleFlagClick({ x_axis, y_axis });\r\n      setImageAnnotations([...imageAnnotations, { x_axis, y_axis }]);\r\n      setAddCommentFlag(true);\r\n    }\r\n  };\r\n\r\n  // Handle flag click to select the annotation and toggle the form visibility for image annotation\r\n  const handleFlagClick = (annotation) => {\r\n    // if (\r\n    //   selectedAnnotation &&\r\n    //   selectedAnnotation.x === annotation.x &&\r\n    //   selectedAnnotation.y === annotation.y\r\n    // ) {\r\n    //   setSelectedAnnotation(null);\r\n    // } else {\r\n    setSelectedAnnotation(annotation);\r\n    // }\r\n  };\r\n  // Generate a list of comments from the state for image annotation\r\n  const getCommentsList = async () => {\r\n    if (docId || (docData && docData.find((item) => item.type === docName))) {\r\n      try {\r\n        let res = await GetCommentsAndAssign(\r\n          docId ? docId : docData.find((item) => item.type === docName).id,\r\n          adminid,\r\n          annotationStatus,\r\n          \"document\"\r\n        );\r\n        if (res.data.status === (1 || \"1\")) {\r\n          setCommentsList(res.data.data.data);\r\n          setImageAnnotations(res.data.data.data);\r\n        } else if (res.data.message === \"Task data not found\") {\r\n          setCommentsList([]);\r\n          setImageAnnotations([]);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        setCommentsList([]);\r\n        setImageAnnotations([]);\r\n      }\r\n    } else {\r\n      setCommentsList([]);\r\n      setImageAnnotations([]);\r\n    }\r\n  };\r\n\r\n  // Generate a list of comments reply\r\n  const getCommentsReplyList = async () => {\r\n    if (docId || docData.find((item) => item.type === docName)) {\r\n      try {\r\n        let res = await GetReplyCommit(\r\n          docId ? docId : docData.find((item) => item.type === docName).id,\r\n          adminid,\r\n          annotationStatus\r\n        );\r\n        if (res.data.status === (1 || \"1\")) {\r\n          setCommentsReplyList(res.data.data);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        setCommentsReplyList([]);\r\n      }\r\n    } else {\r\n      setCommentsReplyList([]);\r\n    }\r\n  };\r\n  /*Annotaton functionalites close */\r\n  /*Functo get Applicants Document */\r\n  const GetDocument = async (del) => {\r\n    try {\r\n      let response = await GetEmployeeDocumentList(\r\n        props.employee_id,\r\n        props.emp_user_type,\r\n        props.docId &&\r\n          localStorage.getItem(\"notificationUser\") === props.employee_id\r\n          ? \"\"\r\n          : selectDocTypeName\r\n          ? selectDocTypeName\r\n          : \"\"\r\n      );\r\n\r\n      if (\r\n        response.data.data === undefined ||\r\n        response.data.data === \"\" ||\r\n        response.data.data === null ||\r\n        response.data.data.length === 0 ||\r\n        response.data.message === \"No data found\"\r\n      ) {\r\n        setDocData([]);\r\n        setLoading(false);\r\n      } else {\r\n        {\r\n          if (\r\n            response.data.data.allData.length === 0 ||\r\n            response.data.data.allData === undefined ||\r\n            response.data.data.allData === \"\" ||\r\n            response.data.data.allData === null\r\n          ) {\r\n            setDocData([]);\r\n          } else {\r\n            setDocData(response.data.data.allData);\r\n          }\r\n          if (\r\n            response.data.data.all_types.length === 0 ||\r\n            response.data.data.all_types === undefined ||\r\n            response.data.data.all_types === \"\" ||\r\n            response.data.data.all_types === null\r\n          ) {\r\n            setDocAllTypes([]);\r\n          } else {\r\n            setDocAllTypes(response.data.data.all_types);\r\n          }\r\n          setLoading(false);\r\n          if (notificationDoc === 1) {\r\n            // Condition for Open document fromnotification\r\n            setNotificationDoc(0);\r\n\r\n            if (response.data.data.allData.find((item) => item.id === docId)) {\r\n              setSelecttDocTypeName(\r\n                response.data.data.allData.find((item) => item.id === docId)\r\n                  .type\r\n              );\r\n              setDocTypData(\r\n                response.data.data.allData.find((item) => item.id === docId)\r\n              );\r\n              setDocName(\r\n                response.data.data.allData.find((item) => item.id === docId)\r\n                  .document_name\r\n              );\r\n              setDocId(\r\n                response.data.data.allData.find((item) => item.id === docId).id\r\n              );\r\n              setDocFile(\r\n                response.data.data.allData.find((item) => item.id === docId)\r\n                  .document_url +\r\n                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n              );\r\n              setDocTypeName(\r\n                response.data.data.allData.find((item) => item.id === docId)\r\n                  .type\r\n              );\r\n            } else {\r\n              toast.error(\"Document not found\", {\r\n                position: toast.POSITION.TOP_RIGHT,\r\n                autoClose: 1000,\r\n              });\r\n            }\r\n            setNotificationDoc(0);\r\n          } else {\r\n            if (\r\n              docTypData === undefined ||\r\n              docTypData === \"undefined\" ||\r\n              (docTypData === \"\" && docName === \"\" && otherDoc === false) ||\r\n              del === true\r\n            ) {\r\n              // eslint-disable-next-line\r\n              setDocTypData(response.data.data.allData[0]);\r\n              setDocFile(\r\n                response.data.data.allData[0].document_url +\r\n                  `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n              );\r\n              setDocName(response.data.data.allData[0].document_name);\r\n              setDocId(response.data.data.allData[0].id);\r\n              setDocTypeName(response.data.data.allData[0].type);\r\n              setSelecttDocTypeName(response.data.data.allData[0].type);\r\n              setNotificationDoc(0);\r\n            } else if (\r\n              showMoreDocType === false &&\r\n              response.data.data.allData.find(\r\n                (item) => item.document_name === docName\r\n              )\r\n            ) {\r\n              if (\r\n                response.data.data.allData.find(\r\n                  (item) => item.document_name === docName\r\n                ).document_name === docName\r\n              ) {\r\n                setNotificationDoc(0);\r\n\r\n                setDocTypData(\r\n                  response.data.data.allData.find(\r\n                    (item) => item.document_name === docName\r\n                  )\r\n                );\r\n                setDocName(\r\n                  response.data.data.allData.find(\r\n                    (item) => item.document_name === docName\r\n                  ).document_name\r\n                );\r\n                setDocId(\r\n                  response.data.data.allData.find(\r\n                    (item) => item.document_name === docName\r\n                  ).id\r\n                );\r\n                setDocFile(\r\n                  response.data.data.allData.find(\r\n                    (item) => item.document_name === docName\r\n                  ).document_url +\r\n                    `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n                );\r\n                setDocTypeName(\r\n                  response.data.data.allData.find(\r\n                    (item) => item.document_name === docName\r\n                  ).type\r\n                );\r\n              }\r\n            } else {\r\n              //Condition for update\r\n              if (\r\n                response.data.data.allData.find((item) => item.id === docId)\r\n              ) {\r\n                setNotificationDoc(0);\r\n\r\n                setDocTypData(\r\n                  response.data.data.allData.find((item) => item.id === docId)\r\n                );\r\n                setDocFile(\r\n                  response.data.data.allData.find((item) => item.id === docId)\r\n                    .document_url +\r\n                    `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n                );\r\n                setDocName(\r\n                  response.data.data.allData.find((item) => item.id === docId)\r\n                    .document_name\r\n                );\r\n                setDocId(\r\n                  response.data.data.allData.find((item) => item.id === docId)\r\n                    .id\r\n                );\r\n                setDocTypeName(\r\n                  response.data.data.allData.find((item) => item.id === docId)\r\n                    .type\r\n                );\r\n              } else {\r\n                setDocTypData(\"\");\r\n                setDocFile(\"\");\r\n                setDocName(\"\");\r\n                setDocId(\"\");\r\n                setDocTypeName(\"\");\r\n                setNotificationDoc(0);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /*Function to convert file to base64 */\r\n  const convertToBase64 = (file) => {\r\n    return new Promise((resolve, reject) => {\r\n      const fileReader = new FileReader();\r\n      fileReader.addEventListener(\"load\", () => {\r\n        resolve({ base64: fileReader.result });\r\n      });\r\n      fileReader.readAsDataURL(file);\r\n      fileReader.onerror = (error) => {\r\n        reject(error);\r\n      };\r\n    });\r\n  };\r\n\r\n  /*Onchange function of SIngle update document */\r\n  // const handleFileChange = async (event, id) => {\r\n  //   const file = event.target.files[0];\r\n  //   if (!file) {\r\n  //     toast.error(\"No file selected\", {\r\n  //       position: toast.POSITION.TOP_RIGHT,\r\n  //       autoClose: 1000,\r\n  //     });\r\n  //     return;\r\n  //   }\r\n  //   // Check file type\r\n  //   const allowedTypes = [\".pdf\", \".doc\", \".docx\", \".jpg\", \".jpeg\", \".png\"];\r\n  //   const fileType = `.${file.name.split(\".\").pop()}`;\r\n  //   if (!allowedTypes.includes(fileType.toLowerCase())) {\r\n  //     toast.error(\r\n  //       \"Invalid docum{ent type. Allowed types: PDF, DOC, DOCX, JPG, JPEG, PNG\",\r\n  //       {\r\n  //         position: toast.POSITION.TOP_RIGHT,\r\n  //         autoClose: 1000,\r\n  //       }\r\n  //     );\r\n  //     return;\r\n  //   }\r\n  //   // Check file size\r\n  //   else if (file.size > 1024 * 8000) {\r\n  //     toast.error(\"Document size can't be more than 8 mb\", {\r\n  //       position: toast.POSITION.TOP_RIGHT,\r\n  //       autoClose: 1000,\r\n  //     });\r\n  //     return;\r\n  //   } else {\r\n  //     const reader = new FileReader();\r\n  //     // Read the file as a data URL\r\n  //     reader.readAsDataURL(file);\r\n  //     encoded = await convertToBase64(file);\r\n  //     let base64Name = encoded.base64;\r\n  //     let DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${\r\n  //       base64Name.split(\";\")[1]\r\n  //     }`;\r\n  // setDocFile(base64Name);\r\n  // setDocFileExt(fileType.slice(1));\r\n  // setDocumentName(file.name.split(\".\")[0].replace(/ /g, \"_\"));\r\n  // setDocFileBase(DocFile);\r\n  //     setShowSaveDoc(true);\r\n  //     // if (window.confirm(\"Are you sure you want to upload this document?\")) {\r\n  //     //   let DocFile =\r\n  //     //     `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${base64Name.split(\";\")[1]}`\r\n  //     //   //Api to upload document\r\n  //     //   let response = await UploadDocument(props.employee_id, docName, DocFile, id)\r\n  //     //   if (response.data.message === \"inserted successfully\") {\r\n  //     //     toast.success(\"Document uploaded Successfully\", {\r\n  //     //       position: toast.POSITION.TOP_RIGHT,\r\n  //     //       autoClose: 1000,\r\n  //     //     });\r\n  //     //     setShowMoreDocType(false)\r\n  //     //     setDocName(docName)\r\n  //     //     setApiCall(true)\r\n  //     //   }\r\n  //     //   if (response.data.message === \"updated successfully\") {\r\n  //     //     toast.success(\"Document Updated Successfully\", {\r\n  //     //       position: toast.POSITION.TOP_RIGHT,\r\n  //     //       autoClose: 1000,\r\n  //     //     });\r\n  //     //     setShowMoreDocType(false)\r\n  //     //     setApiCall(true)\r\n  //     //     setDocTypData(docData.find((item) => item.type === docName))\r\n  //     //     setDocFile(docData.find((item) => item.type === docName).document_url + `?v=${new Date().getMinutes() + new Date().getSeconds()}`)\r\n  //     //   }\r\n  //     //   if (response.data.message === \"Invalid base64-encoded data !\") {\r\n  //     //     toast.error(\"Document type is not valid\", {\r\n  //     //       position: toast.POSITION.TOP_RIGHT,\r\n  //     //       autoClose: 1000,\r\n  //     //     });\r\n  //     //     setApiCall(true)\r\n  //     //   }\r\n  //     // } else {\r\n  //     //   toast.error(\"Document update denied.\", {\r\n  //     //     position: toast.POSITION.TOP_RIGHT,\r\n  //     //     autoClose: 1000,\r\n  //     //   });\r\n  //     //   setApiCall(true);\r\n  //     // }\r\n  //   }\r\n  // };\r\n\r\n  /*On change fnction to upload bulk document in 1 array*/\r\n  const handleBulkFileChange = async (event, id) => {\r\n    const files = event.target.files;\r\n    if (docTypeName === \"\" && bulkUpload === \"no\") {\r\n      toast.error(\"Please select Document type!\", {\r\n        position: toast.POSITION.TOP_RIGHT,\r\n        autoClose: 1000,\r\n      });\r\n    } else {\r\n      // Check the number of files selected\r\n      if (files.length > 30) {\r\n        toast.error(\"You can only upload a maximum of 15 files at a time\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Continue with file validation and processing\r\n      const allowedTypes = [\".pdf\", \".doc\", \".docx\", \".jpg\", \".jpeg\", \".png\"];\r\n      const maxSize = 1024 * 8000; // 8 MB\r\n\r\n      const fileList = [];\r\n      let DocRealName;\r\n      for (let i = 0; i < files.length; i++) {\r\n        const file = files[i];\r\n\r\n        // Check file type\r\n        const fileType = `.${file.name.split(\".\").pop()}`;\r\n        if (!allowedTypes.includes(fileType.toLowerCase())) {\r\n          toast.error(\r\n            `Invalid document type for file '${file.name}'. Allowed types: PDF, DOC, DOCX, JPG, JPEG, PNG`,\r\n            {\r\n              position: toast.POSITION.TOP_RIGHT,\r\n              autoClose: 1000,\r\n            }\r\n          );\r\n          return;\r\n        }\r\n\r\n        // Check file size\r\n        if (file.size > maxSize) {\r\n          toast.error(\r\n            `Document size can't be more than 8 MB for file '${file.name}'`,\r\n            {\r\n              position: toast.POSITION.TOP_RIGHT,\r\n              autoClose: 1000,\r\n            }\r\n          );\r\n          return;\r\n        }\r\n\r\n        // Read file as data URL\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        const encoded = await convertToBase64(file);\r\n        const base64Name = encoded.base64;\r\n\r\n        // Construct file object with base64 data\r\n        const DocFile = `data:/${base64Name.split(\";\")[0].split(\"/\")[1]};${\r\n          base64Name.split(\";\")[1]\r\n        }`;\r\n\r\n        // Use DocRealName as the key for DocFile\r\n        DocRealName = file.name.split(\".\")[0].replace(/ /g, \"_\");\r\n        fileList.push({\r\n          type: docData[0] === docTypData ? docTypData.type : docTypeName,\r\n          docName: DocRealName,\r\n          docUrl: DocFile,\r\n        });\r\n      }\r\n      // Store the object of files\r\n      setDocFileBase(fileList);\r\n      bulkUpload === \"no\" ? setDocName(DocRealName) : setDocName(\"\");\r\n      setShowSaveDoc(true);\r\n    }\r\n  };\r\n\r\n  /*Function to save document */\r\n  // const SaveDocument = async () => {\r\n  //   try {\r\n  //     let response = await UploadDocument(\r\n  //       props.employee_id,\r\n  //       docData[0] === docTypData ? docTypData.type : docName,\r\n  //       docFileBase,\r\n  //       docData[0] === docTypData ? docTypData.id : docId,\r\n  //       documentName\r\n  //     );\r\n  //     if (response.data.message === \"inserted successfully\") {\r\n  //       toast.success(\"Document uploaded Successfully\", {\r\n  //         position: toast.POSITION.TOP_RIGHT,\r\n  //         autoClose: 1000,\r\n  //       });\r\n  //       setShowMoreDocType(false);\r\n  //       setOtherDoc(false);\r\n  //       setDocName(docName);\r\n  //       setDocFileBase(\"\");\r\n  //       setDocFileExt(\"\");\r\n  //       setDocId(\"\");\r\n  //       setShowSaveDoc(false);\r\n  //       setApiCall(true);\r\n  //       setCommentApiCall(true);\r\n  //       setHide(false);\r\n  //     }\r\n  // if (response.data.message === \"updated successfully\") {\r\n  //   toast.success(\"Document Updated Successfully\", {\r\n  //     position: toast.POSITION.TOP_RIGHT,\r\n  //     autoClose: 1000,\r\n  //   });\r\n  //   if (commentsList.length > 0) {\r\n  //     OnHandleUpdateComment(\r\n  //       docData[0] === docTypData ? docTypData.id : docId\r\n  //     );\r\n  //     // OnDeleteComment(docData[0] === docTypData ? docTypData.id : docId);\r\n  //   }\r\n  //   setShowMoreDocType(false);\r\n  //   setApiCall(true);\r\n  //   setCommentApiCall(true);\r\n  //   setHide(false);\r\n  //   setDocTypData(\r\n  //     docData.find(\r\n  //       (item) =>\r\n  //         item.type ===\r\n  //         (docData[0] === docTypData ? docTypData.type : docName)\r\n  //     )\r\n  //   );\r\n  //   setDocFile(\r\n  //     docData.find(\r\n  //       (item) =>\r\n  //         item.type ===\r\n  //         (docData[0] === docTypData ? docTypData.type : docName)\r\n  //     ).document_url +\r\n  //       `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n  //   );\r\n  // }\r\n  //     if (response.data.message === \"fields must not be empty !\") {\r\n  //       toast.error(\"Document type is requried\", {\r\n  //         position: toast.POSITION.TOP_RIGHT,\r\n  //         autoClose: 1000,\r\n  //       });\r\n  //       setApiCall(true);\r\n  //       setHide(false);\r\n  //     }\r\n\r\n  //     if (\r\n  //       response.data.message === \"Invalid base64-encoded data !\" ||\r\n  //       response.data.message === \"Unsupported file type !\"\r\n  //     ) {\r\n  //       toast.error(\"Document type is not valid\", {\r\n  //         position: toast.POSITION.TOP_RIGHT,\r\n  //         autoClose: 1000,\r\n  //       });\r\n  //       setApiCall(true);\r\n  //       setHide(false);\r\n  //     }\r\n  //   } catch (err) {\r\n  //     console.log(err);\r\n  //     setHide(false);\r\n  //   }\r\n  // };\r\n  /* Upload documents in bulk*/\r\n  let SaveBulkDocument = async () => {\r\n    try {\r\n      let response = await UploadBulkDocument(\r\n        props.employee_id,\r\n        docFileBase,\r\n        bulkUpload === \"no\"\r\n          ? docData[0] === docTypData\r\n            ? docTypData.id\r\n            : docId\r\n          : \"\",\r\n        props.emp_user_type\r\n      );\r\n\r\n      if (response.data.message === \"inserted successfully\") {\r\n        // Condition: If some file types are not supported and some are supported, then those that are supported will be uploaded while those that are not supported won't.\r\n        if (response.data.data.length > 0) {\r\n          toast.success(\" Documents uploaded successfully.\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 2000,\r\n          });\r\n          toast.error(\r\n            <>\r\n              Unsupported Files:\r\n              <ul>\r\n                {response.data.data.map((item, index) => (\r\n                  <li key={index}>{item.type}</li>\r\n                ))}\r\n              </ul>\r\n            </>,\r\n            {\r\n              position: toast.POSITION.TOP_RIGHT,\r\n              autoClose: 2000,\r\n            }\r\n          );\r\n        } else {\r\n          toast.success(\"Documents uploaded Successfully\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 2000,\r\n          });\r\n        }\r\n        setShowMoreDocType(false);\r\n        setOtherDoc(false);\r\n        setDocName(docName);\r\n        setBulkUpload(\"\");\r\n        setDocFileBase(\"\");\r\n        setDocFileExt(\"\");\r\n        setDocId(\"\");\r\n        setShowSaveDoc(false);\r\n        setApiCall(true);\r\n        setCommentApiCall(true);\r\n        setHide(false);\r\n      }\r\n      if (response.data.message === \"updated successfully\") {\r\n        toast.success(\"Document Updated Successfully\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setEditName(false);\r\n        setDocId(docData[0] === docTypData ? docTypData.id : docId);\r\n        setShowMoreDocType(false);\r\n        setOtherDoc(false);\r\n        setApiCall(true);\r\n        setCommentApiCall(true);\r\n        setBulkUpload(\"\");\r\n        setHide(false);\r\n        setDocName(docName);\r\n        setShowSaveDoc(false);\r\n        // setDocTypData(docData.find((item) => item.type === docName));\r\n        // console.log(\r\n        //   docData.find((item) => item.type === docName),\r\n        //   docName,\r\n        //   docData\r\n        // );\r\n        // setDocFile(\r\n        //   docData.find((item) => item.type === docName).document_url +\r\n        //     `?v=${new Date().getMinutes() + new Date().getSeconds()}`\r\n        // );\r\n        if (commentsList.length > 0) {\r\n          OnHandleUpdateComment(\r\n            docData[0] === docTypData ? docTypData.id : docId\r\n          );\r\n          // OnDeleteComment(docData[0] === docTypData ? docTypData.id : docId);\r\n        }\r\n      }\r\n\r\n      if (\r\n        response.data.message === \"Invalid base64-encoded data !\" ||\r\n        response.data.message === \"Unsupported file type !\"\r\n      ) {\r\n        toast.error(\"Document type is not valid\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setApiCall(true);\r\n        setHide(false);\r\n        setBulkUpload(\"\");\r\n        setShowSaveDoc(false);\r\n      }\r\n      if (\r\n        response.data.message === \"all fields required !\" ||\r\n        response.data.message === \"fields must not be empty !\"\r\n      ) {\r\n        toast.error(\"All fields are required !\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setApiCall(true);\r\n        setShowSaveDoc(false);\r\n        setHide(false);\r\n        setBulkUpload(\"\");\r\n      }\r\n      if (response.error === \"Unauthorized\") {\r\n        toast.error(\"Token expires, please log in again.\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setApiCall(true);\r\n        setHide(false);\r\n        setShowSaveDoc(false);\r\n        setBulkUpload(\"\");\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      toast.error(\"Something went wrong try again later!\", {\r\n        position: toast.POSITION.TOP_RIGHT,\r\n        autoClose: 1000,\r\n      });\r\n      setApiCall(true);\r\n      setShowSaveDoc(false);\r\n      setHide(false);\r\n      setBulkUpload(\"\");\r\n      setShowMoreDocType(false);\r\n    }\r\n  };\r\n  /*Fuinction to render image */\r\n  const RenderNewDocFile = () => {\r\n    return (\r\n      <React.Fragment>\r\n        {docFile ? (\r\n          <>\r\n            <div\r\n              className=\"w-100\"\r\n              ref={fileViewerRef}\r\n              onClick={handleFileViewerClick}\r\n            >\r\n              <LazyLoad\r\n                height={\"100%\"}\r\n                offsetVertical={\"100%\"}\r\n                debounce={false}\r\n              >\r\n                {docTypData &&\r\n                  (docTypData.document_name &&\r\n                  docTypData.document_name.toLowerCase().includes(\"imm\") ? (\r\n                    <iframe\r\n                      src={docFile}\r\n                      style={{ height: \"calc(100vh - 200px)\" }}\r\n                      width={\"100%\"}\r\n                      title={docTypData.document_name}\r\n                    ></iframe>\r\n                  ) : (\r\n                    <FileViewer\r\n                      key={docTypData.id}\r\n                      fileType={\r\n                        docFileExt\r\n                          ? docFileExt\r\n                          : docTypData.extension_type ===\r\n                            \"vnd.openxmlformats-officedocument.wordprocessingml.document\"\r\n                          ? \"docx\"\r\n                          : docTypData.extension_type\r\n                      }\r\n                      filePath={docFile}\r\n                      errorComponent={() => <div>Error loading document</div>}\r\n                    />\r\n                  ))}\r\n              </LazyLoad>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className=\"text-center mt-5\">No document found</div>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  };\r\n  /* Function to replace the _ and correct the document type */\r\n  const textReplaceFunction = (e) => {\r\n    if (e && e.includes(\"_\")) {\r\n      let new_text = e.replaceAll(\"_\", \" \");\r\n      return new_text;\r\n    } else {\r\n      return e;\r\n    }\r\n  };\r\n  /*Function to verify the applicants documents */\r\n  const onVerifyDocuments = async (id, verify) => {\r\n    try {\r\n      let response = await VarifyDocument(id, verify);\r\n      if (response.data.message === \"successfully\") {\r\n        toast.success(\"Document Verify Successfully\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setApiCall(true);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  /*Function to delete document  */\r\n  const OnDeleteDoc = async (id) => {\r\n    try {\r\n      let res = await DeleteDocument(id, props.emp_user_type);\r\n      if (res.data.message === \"document deleted successfully!\") {\r\n        toast.success(\"Document deleted Successfully\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setDocFile(\"\");\r\n        setDocId(\"\");\r\n        setDocData(\"\");\r\n        setDocTypData(\"\");\r\n        setDocName(\"\");\r\n        setApiCall(true);\r\n        setOtherDoc(false);\r\n        GetDocument(true);\r\n      }\r\n      if (res.data.message === \"Error deleting document\") {\r\n        toast.success(\"Error deleting document ! Try again later\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setDocFile(\"\");\r\n        setDocId(\"\");\r\n        setDocData(\"\");\r\n        setDocTypData(\"\");\r\n        setDocName(\"\");\r\n        setApiCall(true);\r\n        setOtherDoc(false);\r\n        GetDocument(true);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  /*Type array */\r\n  let DocTypeData = [\r\n    \"passport\",\r\n    \"drivers_license\",\r\n    \"photograph\",\r\n    \"immigration_status\",\r\n    \"lmia\",\r\n    \"job_offer_letter\",\r\n    \"provincial_nominee_letter\",\r\n    \"proof_of_funds\",\r\n    \"proof_of_employment\",\r\n    \"marriage_certificate\",\r\n    \"education_metric\",\r\n    \"education_higher_secondary\",\r\n    \"education_graduation\",\r\n    \"education_post_graduation\",\r\n    \"resume_or_cv\",\r\n    \"ielts\",\r\n    \"medical\",\r\n    \"police_clearance\",\r\n    \"refusal_letter\",\r\n    \"Employment Contract\",\r\n    \"Reference Letters\",\r\n    \"Client Info\",\r\n    \"Representative Submission Letter\",\r\n    \"Bank Statement\",\r\n  ];\r\n  //UseEfect for document\r\n  useEffect(() => {\r\n    GetDocument();\r\n    RenderNewDocFile();\r\n    if (apiCall === true) {\r\n      setApiCall(false);\r\n    }\r\n    setAnnotationMode(false);\r\n    //Condition to clear docid from url after navigation from notification\r\n    if (props.docId) {\r\n      const newUrl = window.location.pathname;\r\n      window.history.replaceState({}, document.title, newUrl);\r\n    }\r\n  }, [docId, apiCall, selectDocTypeName, props.employee_id, props.docId]);\r\n  //USeEffect foe commet replies list\r\n  useEffect(() => {\r\n    // getCommentsReplyList();\r\n    if (user_type === \"admin\") {\r\n      AdminData();\r\n    }\r\n  }, [replyCommentClick]);\r\n  //USeEffect foe commet list\r\n  useEffect(() => {\r\n    setSelectedAnnotation(null);\r\n    getCommentsList();\r\n    if (commenAapiCall === true) {\r\n      setCommentApiCall(false);\r\n    }\r\n  }, [docId, commenAapiCall, adminid, annotationStatus]);\r\n\r\n  const handleDocTypeChange = (e) => {\r\n    const selectedValue = e.target.value;\r\n    if (selectedValue === \"other\") {\r\n      setOtherDoc(true);\r\n      setShowMoreDocType(false);\r\n      setDocTypData(\"\");\r\n      setDocId(\"\");\r\n      setDocName(\"\");\r\n    } else {\r\n      setOtherDoc(false);\r\n      setDocTypeName(selectedValue);\r\n    }\r\n  };\r\n  /*Function to download Document */\r\n  const DownloadDocument = async () => {\r\n    const response = await fetch(docFile);\r\n    const blob = await response.blob();\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.download = docTypData.document_name + \".\" + docTypData.extension_type;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n    // Clean up the temporary URL\r\n    URL.revokeObjectURL(url);\r\n  };\r\n  /*Function to Print Document  */\r\n  const PrintDocument = () => {\r\n    const printWindow = window.open(\"\", \"_blank\");\r\n    const content = `\r\n      <html>\r\n        <head>\r\n          <title>Print Document</title>\r\n        </head>\r\n        <body>\r\n          <embed src=\"${docFile}\" width=\"100%\" height=\"100%\">\r\n        </body>\r\n      </html>\r\n    `;\r\n\r\n    printWindow.document.open();\r\n    printWindow.document.write(content);\r\n    printWindow.document.close();\r\n    printWindow.onload = () => {\r\n      printWindow.print();\r\n    };\r\n  };\r\n\r\n  /*Major api's for annotations */\r\n  // Function to add annotation based on conditions\r\n  const addAnnotation = async (annotation) => {\r\n    setAddCommentFlag(false);\r\n    // Retrieve data from local storage\r\n\r\n    const subject = \"\";\r\n    const comment = comments; ///\\S+@\\S+\\.\\S+/.test(comments) ? \"\" : comments;\r\n    let DocId = docId\r\n      ? docId\r\n      : docData.find((item) => item.type === docName).id;\r\n    let sender = allAdmin.find((item) => item.admin_id === admin_id)\r\n      ? allAdmin.find((item) => item.admin_id === admin_id).name\r\n      : \"\";\r\n    let senderEmail = allAdmin.find((item) => item.admin_id === admin_id)\r\n      ? allAdmin.find((item) => item.admin_id === admin_id).email\r\n      : \"\";\r\n    const AdminType = localStorage.getItem(\"admin_type\");\r\n    // Variables for mentionaing admins\r\n    const email = selectedAdmin || \"\"; ///\\S+@\\S+\\.\\S+/.test(comments) ? comments : \"\";\r\n    let assignedAdminName = allAdmin.filter((item) =>\r\n      selectedAdmin.includes(item.email)\r\n    )\r\n      ? allAdmin\r\n          .filter((item) => selectedAdmin.includes(item.email))\r\n          .map((admin) => admin.name)\r\n          .join(\",\")\r\n      : \"\";\r\n    const assignedUserId = allAdmin.filter((item) =>\r\n      selectedAdmin.includes(item.email)\r\n    )\r\n      ? allAdmin\r\n          .filter((item) => selectedAdmin.includes(item.email))\r\n          .map((admin) => admin.admin_id)\r\n          .join(\",\")\r\n      : \"\";\r\n    const assignedUserType = allAdmin.filter((item) =>\r\n      selectedAdmin.includes(item.email)\r\n    )\r\n      ? allAdmin\r\n          .filter((item) => selectedAdmin.includes(item.email))\r\n          .map((admin) => admin.admin_type)\r\n          .join(\",\")\r\n      : \"\";\r\n\r\n    // Send data to the API\r\n    if (comment === \"\" && email === \"\") {\r\n      toast.error(\"Comment or email cannot be empty!\", {\r\n        position: toast.POSITION.TOP_RIGHT,\r\n        autoClose: 1000,\r\n      });\r\n    } else {\r\n      try {\r\n        let res = await ADocAnnotation(\r\n          admin_id,\r\n          DocId,\r\n          assignedUserId,\r\n          email,\r\n          subject,\r\n          comment,\r\n          annotation.x_axis,\r\n          annotation.y_axis,\r\n          \"document\",\r\n          AdminType, //sender type\r\n          sender, //sender name,\r\n          assignedAdminName, //assigned Admin or user Name,\r\n          \"\", //follow up status(for notes only)\r\n          \"\", //Next follow up date(for notes only)\r\n          assignedUserType, //Assign user type,\r\n          \"\", //Document url(for notes only)\r\n          senderEmail, //Sender email\r\n          props.employee_id //Userid\r\n        );\r\n        if (res.data.message === \"task inserted successfully!\") {\r\n          toast.success(\"Comment uploaded Successfully\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 1000,\r\n          });\r\n          setSelectedAnnotation(null);\r\n          setComments(\"\");\r\n          setCommentApiCall(true);\r\n          setSelectedAdmin(\"\");\r\n          setAnnotationMode(!isAnnotationMode);\r\n          setFilteredEmails([]);\r\n          // setNotificationApiCall(true);\r\n          localStorage.setItem(\"callNotification\", true);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        if (err.response.data.message === \"required fields cannot be blank\") {\r\n          toast.error(\" Please try again later.\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 1000,\r\n          });\r\n          setSelectedAnnotation(null);\r\n          setComments(\"\");\r\n          setSelectedAdmin(\"\");\r\n          setCommentApiCall(true);\r\n          setAnnotationMode(!isAnnotationMode);\r\n          setAddCommentFlag();\r\n          setFilteredEmails([]);\r\n        }\r\n      }\r\n    }\r\n    // Update state to include the new annotation\r\n    // setImageAnnotations([...imageAnnotations, { x, y }]);\r\n  };\r\n  /* Function to update comment and assign */\r\n  const OnHandleUpdateComment = async (originalData) => {\r\n    let updatedData;\r\n    //Condtion to update x and y axis on documet update\r\n    if (originalData === (docData[0] === docTypData ? docTypData.id : docId)) {\r\n      updatedData = { doc_id: originalData, x_axis: 0, y_axis: 0 };\r\n    } else {\r\n      updatedData = { ...originalData };\r\n      updatedData.status = originalData.status === \"1\" ? \"0\" : \"1\";\r\n    }\r\n    try {\r\n      // Call the API with the updated data\r\n      let res = await UpdateDocuentcommentAssign(updatedData);\r\n      if (res.message === \"Task updated successfully!\") {\r\n        toast.success(\"Task completed Successfully\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setSelectedAnnotation(null);\r\n        setComments(\"\");\r\n        setCommentApiCall(true);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  /*Function to delete document comments*/\r\n  // const OnDeleteComment = async (docId) => {\r\n  //   try {\r\n  //     let res = await DeleteCommentsAndAssign(docId);\r\n  //     console.log(res);\r\n  //   } catch (err) {\r\n  //     console.log(err);\r\n  //   }\r\n  // };\r\n  /*Function to set the color code to the background of the user name */\r\n  const determineBackgroundColor = (commentItem) => {\r\n    const colorClasses = [\r\n      \"bg-primary-opacity-7\",\r\n      \"bg-warning-opacity-7\",\r\n      \"bg-orange-opacity-6\",\r\n      \"bg-info-opacity-7\",\r\n      \"bg-secondary-opacity-7\",\r\n      \"bg-danger-opacity-6\",\r\n      \"bg-info-opacity-visible\",\r\n    ];\r\n\r\n    const assignedUserId = commentItem.assigned_to_user_id;\r\n\r\n    // Create a mapping dynamically based on assignedUserId\r\n    const userColorMap = {};\r\n\r\n    // Check if assignedUserId is present in the mapping\r\n    if (assignedUserId && userColorMap.hasOwnProperty(assignedUserId)) {\r\n      return userColorMap[assignedUserId];\r\n    }\r\n\r\n    // If not found in the mapping, use the colorClasses logic\r\n    const id = commentItem.id;\r\n    const hashCode = (str) => {\r\n      let hash = 0;\r\n      for (let i = 0; i < str.length; i++) {\r\n        const char = str.charCodeAt(i);\r\n        hash = (hash << 5) - hash + char;\r\n      }\r\n      return hash;\r\n    };\r\n\r\n    const hash = Math.abs(hashCode(id.toString()));\r\n    const index = hash % colorClasses.length;\r\n\r\n    return colorClasses[index];\r\n  };\r\n  /*Function to reply for the comment */\r\n  const ReplyAnnotation = async (data) => {\r\n    // let emailrejex = /\\S+@\\S+\\.\\S+/;\r\n    // let id = emailrejex.test(selectedAdminReply)\r\n    //   ? allAdmin.find((item) => item.email === selectedAdminReply).admin_id\r\n    //   : data.assined_to_user_id;\r\n    // let adminType = emailrejex.test(selectedAdminReply)\r\n    //   ? allAdmin.find((item) => item.email === selectedAdminReply).admin_type\r\n    //   : \"admin\";\r\n    let sender = allAdmin.find((item) => item.admin_id === admin_id)\r\n      ? allAdmin.find((item) => item.admin_id === admin_id).name\r\n      : \"\";\r\n    let senderId = allAdmin.find((item) => item.admin_id === admin_id)\r\n      ? allAdmin.find((item) => item.admin_id === admin_id).admin_id\r\n      : \"\";\r\n    let senderEmail = allAdmin.find((item) => item.admin_id === admin_id)\r\n      ? allAdmin.find((item) => item.admin_id === admin_id).email\r\n      : \"\";\r\n    let senderType = allAdmin.find((item) => item.admin_id === admin_id)\r\n      ? allAdmin.find((item) => item.admin_id === admin_id).admin_type\r\n      : \"\";\r\n    // let assignedAdminName = allAdmin.find(\r\n    //   (item) => item.email === selectedAdminReply\r\n    // )\r\n    //   ? allAdmin.find((item) => item.email === selectedAdminReply).name\r\n    //   : \"\";\r\n    // Variables for mentioning admins\r\n    const email = selectedAdminReply || \"\"; ///\\S+@\\S+\\.\\S+/.test(comments) ? comments : \"\";\r\n    let assignedAdminName = allAdmin.filter((item) =>\r\n      selectedAdminReply.includes(item.email)\r\n    )\r\n      ? allAdmin\r\n          .filter((item) => selectedAdminReply.includes(item.email))\r\n          .map((admin) => admin.name)\r\n          .join(\",\")\r\n      : \"\";\r\n    const assignedUserId = allAdmin.filter((item) =>\r\n      selectedAdminReply.includes(item.email)\r\n    )\r\n      ? allAdmin\r\n          .filter((item) => selectedAdminReply.includes(item.email))\r\n          .map((admin) => admin.admin_id)\r\n          .join(\",\")\r\n      : \"\";\r\n    const AdminType = //localStorage.getItem(\"admin_type\");\r\n      allAdmin.filter((item) => selectedAdminReply.includes(item.email))\r\n        ? allAdmin\r\n            .filter((item) => selectedAdminReply.includes(item.email))\r\n            .map((admin) => admin.admin_type)\r\n            .join(\",\")\r\n        : \"\";\r\n    if (replyComment === \"\" && email === \"\") {\r\n      toast.error(\"Comment or email cannot be empty!\", {\r\n        position: toast.POSITION.TOP_RIGHT,\r\n        autoClose: 1000,\r\n      });\r\n    } else {\r\n      try {\r\n        let res = await SendReplyCommit(\r\n          data,\r\n          email,\r\n          replyComment,\r\n          assignedUserId,\r\n          AdminType,\r\n          sender,\r\n          assignedAdminName,\r\n          \"document\",\r\n          senderId,\r\n          senderEmail,\r\n          senderType,\r\n          props.employee_id //Userid\r\n        );\r\n        if (res.data.message === \"message sent successfully!\") {\r\n          toast.success(\"Replied Successfully\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 1000,\r\n          });\r\n          // setNotificationApiCall(true);\r\n          localStorage.setItem(\"callNotification\", true);\r\n          setReplyComment(\"\");\r\n          getCommentsReplyList();\r\n          setSelectedAdminReplye(\"\");\r\n          setFilteredEmails([]);\r\n        }\r\n      } catch (err) {\r\n        console.log(err);\r\n        setSelectedAdminReplye(\"\");\r\n        setFilteredEmails([]);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div\r\n      className={\r\n        // props.page === \"company_profile\"\r\n        //\r\n        \"document_container bg-white\"\r\n        // : \"container document_container bg-white p-5 mb-10\"\r\n      }\r\n    >\r\n      <div className=\"row m-0 bg-white\">\r\n        {/* Document list */}\r\n        <DocumentList\r\n          selectDocTypeName={selectDocTypeName}\r\n          user_type={user_type}\r\n          docData={docData}\r\n          setShowMoreDocType={setShowMoreDocType}\r\n          setDocTypData={setDocTypData}\r\n          setDocName={setDocName}\r\n          setDocId={setDocId}\r\n          setOtherDoc={setOtherDoc}\r\n          setHide={setHide}\r\n          setShowSaveDoc={setShowSaveDoc}\r\n          setFilteredEmails={setFilteredEmails}\r\n          setAnnotationMode={setAnnotationMode}\r\n          setReplyCommentClick={setReplyCommentClick}\r\n          setDocFile={setDocFile}\r\n          docName={docName}\r\n          docId={docId}\r\n          setEditName={setEditName}\r\n          OnDeleteDoc={OnDeleteDoc}\r\n          textReplaceFunction={textReplaceFunction}\r\n          setBulkUpload={setBulkUpload}\r\n          SaveBulkDocument={SaveBulkDocument}\r\n          editName={editName}\r\n          setDocFileBase={setDocFileBase}\r\n          isAnnotationMode={isAnnotationMode}\r\n          setApiCall={setApiCall}\r\n          setSelecttDocTypeName={setSelecttDocTypeName}\r\n          docAllTypes={docAllTypes}\r\n          setDocTypeName={setDocTypeName}\r\n          userId={props.employee_id}\r\n          // setNotificationDoc={setNotificationDoc}\r\n          // notificationApiCall={notificationApiCall}\r\n          // setNotificationApiCall={setNotificationApiCall}\r\n        />\r\n        {/* Document view */}\r\n        <ViewDocument\r\n          handleBulkFileChange={handleBulkFileChange}\r\n          setBulkUpload={setBulkUpload}\r\n          showSaveDoc={showSaveDoc}\r\n          SaveBulkDocument={SaveBulkDocument}\r\n          setHide={setHide}\r\n          setApiCall={setApiCall}\r\n          setShowSaveDoc={setShowSaveDoc}\r\n          setDocFile={setDocFile}\r\n          setDocFileExt={setDocFileExt}\r\n          setFilteredEmails={setFilteredEmails}\r\n          docFile={docFile}\r\n          docName={docName}\r\n          Verified={Verified}\r\n          onVerifyDocuments={onVerifyDocuments}\r\n          PrintDocument={PrintDocument}\r\n          DownloadDocument={DownloadDocument}\r\n          loading={loading}\r\n          Loader={Loader}\r\n          RenderNewDocFile={RenderNewDocFile}\r\n          setAnnotationMode={setAnnotationMode}\r\n          setComments={setComments}\r\n          setReplyCommentClick={setReplyCommentClick}\r\n          setAddCommentFlag={setAddCommentFlag}\r\n          docTypData={docTypData}\r\n          handleFlagClick={handleFlagClick}\r\n          setSelectedAnnotation={setSelectedAnnotation}\r\n          hide={hide}\r\n          user_type={user_type}\r\n          isAnnotationMode={isAnnotationMode}\r\n          imageAnnotations={imageAnnotations}\r\n          selectedAnnotation={selectedAnnotation}\r\n          otherDoc={otherDoc}\r\n          setDocName={setDocName}\r\n          DocTypeData={DocTypeData}\r\n          textReplaceFunction={textReplaceFunction}\r\n          setShowMoreDocType={setShowMoreDocType}\r\n          setDocTypData={setDocTypData}\r\n          setDocId={setDocId}\r\n          setOtherDoc={setOtherDoc}\r\n          showMoreDocType={showMoreDocType}\r\n          handleDocTypeChange={handleDocTypeChange}\r\n          setDocTypeName={setDocTypeName}\r\n          docTypeName={docTypeName}\r\n          bulkUpload={bulkUpload}\r\n        />\r\n        {/* Annotation  */}\r\n        <div className=\"col-md-3 px-2 py-2 comments_and_replies\">\r\n          {/* Add Annotation form */}\r\n          {!hide &&\r\n          docFile &&\r\n          docName &&\r\n          user_type === \"admin\" &&\r\n          selectedAnnotation && //condition for imm pdf\r\n          (docTypData.document_name &&\r\n          docTypData.document_name.toLowerCase().includes(\"imm\")\r\n            ? replyCommentClick === undefined ||\r\n              replyCommentClick === \"\" ||\r\n              replyCommentClick === null\r\n            : addCommentFlag === true) ? (\r\n            <div\r\n              style={\r\n                {\r\n                  // position: \"absolute\",\r\n                  // left: selectedAnnotation.x_axis + 10,\r\n                  // top: selectedAnnotation.y_axis + 20,\r\n                  // zIndex: 1,\r\n                }\r\n              }\r\n              className=\"pt-0 pb-5\"\r\n            >\r\n              <form\r\n                className=\"comment-form\"\r\n                onSubmit={(e) => {\r\n                  e.preventDefault();\r\n                  addAnnotation(selectedAnnotation);\r\n                }}\r\n              >\r\n                <div className=\"comment-input-container m-0 mb-2\">\r\n                  <label className=\"m-0\">\r\n                    <b> Add Annotation:</b>\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={comments || \"\"}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"Comments or add others with @\"\r\n                    className=\"comment-input\"\r\n                  />\r\n                  {filteredEmails.length > 0 && (\r\n                    <ul className=\"email-suggestions\">\r\n                      {filteredEmails.map((email) => (\r\n                        <li\r\n                          key={email.email}\r\n                          onClick={() => handleEmailClick(email.email)}\r\n                          onMouseOver={() => handleEmailMouseOver(email.email)}\r\n                          className=\"email-suggestion-item\"\r\n                        >\r\n                          <strong>{email.name}</strong>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </div>\r\n                <div className=\"button-container mx-0\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    // onClick={(e) => {\r\n                    //   e.preventDefault();\r\n                    //   addAnnotation(selectedAnnotation);\r\n\r\n                    // }}\r\n                    className=\"btn-sm btn-primary save-comment-btn\"\r\n                  >\r\n                    Save Comment\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-sm btn-light cancel-btn\"\r\n                    onClick={() => {\r\n                      setAddCommentFlag();\r\n                      setSelectedAnnotation(null);\r\n                      setComments(\"\");\r\n                      setAnnotationMode(!isAnnotationMode);\r\n                      setFilteredEmails([]);\r\n                    }}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          ) : null}\r\n          {/* Comment box */}\r\n          {user_type === \"admin\" ? (\r\n            <CommentBox\r\n              commentsReplyList={commentsReplyList}\r\n              docData={docData}\r\n              adminid={adminid}\r\n              setAdminId={setAdminId}\r\n              allAdmin={allAdmin}\r\n              annotationStatus={annotationStatus}\r\n              setAnnotationStatus={setAnnotationStatus}\r\n              commentsList={commentsList}\r\n              selectedAnnotation={selectedAnnotation}\r\n              setSelectedAnnotation={setSelectedAnnotation}\r\n              OnHandleUpdateComment={OnHandleUpdateComment}\r\n              determineBackgroundColor={determineBackgroundColor}\r\n              setReplyCommentClick={setReplyCommentClick}\r\n              replyCommentClick={replyCommentClick}\r\n              replyComment={replyComment}\r\n              handleInputChange={handleInputChange}\r\n              filteredEmails={filteredEmails}\r\n              handleEmailClick={handleEmailClick}\r\n              handleEmailMouseOver={handleEmailMouseOver}\r\n              ReplyAnnotation={ReplyAnnotation}\r\n              getCommentsReplyList={getCommentsReplyList}\r\n              setAddCommentFlag={setAddCommentFlag}\r\n              setFilteredEmails={setFilteredEmails}\r\n              docTypData={docTypData}\r\n              setHide={setHide}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}
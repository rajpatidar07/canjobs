{
    "sourceFile": "src/components/forms/admin/manageemail.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1713875991332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1713875991332,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport useValidation from \"../../common/useValidation\";\nimport { AddUpdateEmailTemplate } from \"../../../api//api\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n// import TextEditor from \"../../common/TextEditor\";\n\nfunction ManageEmail(props) {\n  let [loading, setLoading] = useState(false);\n\n  /* Functionality to close the modal */\n  const close = () => {\n    setState(initialFormState);\n    setErrors(\"\");\n    props.close();\n    setLoading(false);\n  };\n  // INITIAL STATE ASSIGNMENT\n  const initialFormState = {\n    id: \"\",\n    email_type: \"\",\n    subject: \"\",\n    message: \"\",\n  };\n  // VALIDATION CONDITIONS\n  const validators = {\n    email_type: [\n      (value) =>\n        value === \"\" || value.trim() === \"\" ? \"Email type is required\" : \"\",\n    ],\n    subject: [\n      (value) =>\n        value === \"\" || value.trim() === \"\" ? \"Subject is required\" : \"\",\n    ],\n    message: [\n      (value) =>\n        value === \"\" || value.trim() === \"\" ? \"Message is required\" : \"\",\n    ],\n  };\n  // CUSTOM VALIDATIONS IMPORT\n  const { state, setState, setErrors, onInputChange, errors, validate } =\n    useValidation(initialFormState, validators);\n\n  useEffect(() => {\n    if (props.data === (\"\" || undefined || null)) {\n      setState(initialFormState);\n    } else {\n      setState(props.data);\n    }\n    // eslint-disable-next-line\n  }, [props.data]);\n  const onAddUpdateTemplate = async (event) => {\n    event.preventDefault();\n    if (validate()) {\n      setLoading(true);\n      try {\n        const responseData = await AddUpdateEmailTemplate(state);\n        if (responseData.message === \"data inserted successfully\") {\n          toast.success(\"Data inserted successfully\", {\n            position: toast.POSITION.TOP_RIGHT,\n            autoClose: 1000,\n          });\n          return close();\n        }\n        if (responseData.message === \"data updated successfully\") {\n          toast.success(\"Data updated successfully\", {\n            position: toast.POSITION.TOP_RIGHT,\n            autoClose: 1000,\n          });\n          return close();\n        }\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n      }\n    } else {\n      setLoading(false);\n    }\n  };\n  return (\n    <>\n      <Modal\n        show={props.show}\n        size=\"lg\"\n        aria-labelledby=\"contained-modal-title-vcenter\"\n        centered\n      >\n        <button\n          type=\"button\"\n          className=\"circle-32 btn-reset bg-white pos-abs-tr mt-md-n6 mr-lg-n6 focus-reset z-index-supper \"\n          data-dismiss=\"modal\"\n          onClick={close}\n        >\n          <i className=\"fas fa-times\"></i>\n        </button>\n        <div className=\"bg-white rounded h-100 px-11 pt-7 overflow-y-hidden\">\n          {props.id === \"\" ? (\n            <h5 className=\"text-center pt-2 mb-9\">Add Email Template</h5>\n          ) : (\n            <h5 className=\"text-center pt-2 mb-9\">Update Email Template</h5>\n          )}\n          <form onSubmit={onAddUpdateTemplate}>\n            <div className=\"row\">\n              <input type=\"hidden\" value={state.id} />\n              <div className=\"col-sm-6 p-1 form-group\">\n                <label\n                  htmlFor=\"email_type\"\n                  className=\"font-size-4 text-black-2  line-height-reset\"\n                >\n                  Email Type: <span className=\"text-danger\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  className={\n                    errors.email_type\n                      ? \"form-control border border-danger\"\n                      : \"form-control\"\n                  }\n                  value={state.email_type || \"\"}\n                  onChange={onInputChange}\n                  id=\"email_type\"\n                  name=\"email_type\"\n                  disabled={props.data === \"\" ? false : true}\n                  placeholder=\"Email type\"\n                  maxLength={60}\n                />\n                {/*----ERROR MESSAGE FOR Admin Name----*/}\n                {errors.name && (\n                  <span\n                    key={errors.email_type}\n                    className=\"text-danger font-size-3\"\n                  >\n                    {errors.email_type}\n                  </span>\n                )}\n              </div>\n              <div className=\"col-sm-6 p-1 form-group \">\n                <label\n                  htmlFor=\"subject\"\n                  className=\"font-size-4 text-black-2  line-height-reset\"\n                >\n                  Subject: <span className=\"text-danger\">*</span>\n                </label>\n                <input\n                  className={\n                    errors.subject\n                      ? \"form-control border border-danger\"\n                      : \"form-control\"\n                  }\n                  value={state.subject || \"\"}\n                  onChange={onInputChange}\n                  id=\"subject\"\n                  name=\"subject\"\n                  type={\"subject\"}\n                  placeholder=\"Subject\"\n                  maxLength={60}\n                />\n                {/*----ERROR MESSAGE FOR subject----*/}\n                {errors.subject && (\n                  <span\n                    key={errors.subject}\n                    className=\"text-danger font-size-3\"\n                  >\n                    {errors.subject}\n                  </span>\n                )}\n              </div>\n\n              <div className=\"col-sm-12 p-1 form-group \">\n                <label\n                  htmlFor=\"message\"\n                  className=\"font-size-4 text-black-2  line-height-reset\"\n                >\n                  Template: <span className=\"text-danger\">*</span>\n                </label>\n                <div className=\"position-relative\">\n                  <textarea\n                    type={\"text\"}\n                    className={\n                      errors.message\n                        ? \"form-control border border-danger\"\n                        : \"form-control\"\n                    }\n                    value={state.message || \"\"}\n                    onChange={onInputChange}\n                    id=\"message\"\n                    name=\"message\"\n                    placeholder=\"Meaasge\"\n                  ></textarea>\n                  {/* <TextEditor\n                    setState={setState}\n                    state={state}\n                    page={\"addAgentConversation\"}//both page having same setstate variable to updtes in \n                  /> */}\n                </div>\n                {/*----ERROR MESSAGE FOR ADMIN message----*/}\n                {errors.message && (\n                  <span\n                    key={errors.message}\n                    className=\"text-danger font-size-3\"\n                  >\n                    {errors.message}\n                  </span>\n                )}\n              </div>\n\n              <div className=\"col-sm-12 form-group text-center\">\n                {loading === true ? (\n                  <button\n                    className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\n                    type=\"button\"\n                    disabled\n                  >\n                    <span\n                      className=\"spinner-border spinner-border-sm \"\n                      role=\"status\"\n                      aria-hidden=\"true\"\n                    ></span>\n                    <span className=\"sr-only\">Loading...</span>\n                  </button>\n                ) : (\n                  <button\n                    className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\n                    type=\"submit\"\n                  >\n                    Submit\n                  </button>\n                )}\n              </div>\n            </div>\n          </form>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default ManageEmail;\n"
        }
    ]
}
{
    "sourceFile": "src/components/forms/user/visaStatus.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 10,
            "patches": [
                {
                    "date": 1693213247311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1693213313182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n           setApiCall(true)\r\n           setLoading(false)\r\n             close()\r\n         }\r\n-        if (responseData.data.message === \"updated successfully\") {\r\n+        if (responseData.data.message === \"visa updated successfully\") {\r\n           toast.success(\"Visa status Updated successfully\", {\r\n             position: toast.POSITION.TOP_RIGHT,\r\n             autoClose: 1000,\r\n           });\r\n"
                },
                {
                    "date": 1693486845888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -102,9 +102,9 @@\n           setLoading(false)\r\n             close()\r\n         }\r\n       } catch (err) {\r\n-        toast.error(\"Something went wrong\", {\r\n+       console.log(err) {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n         });\r\n         setLoading(false)\r\n"
                },
                {
                    "date": 1693486864608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,304 @@\n+import React, { useState ,useEffect} from \"react\";\r\n+import { Modal } from \"react-bootstrap\";\r\n+import useValidation from \"../../common/useValidation\";\r\n+// import { CKEditor } from \"ckeditor4-react\";\r\n+import { AddUpdateVisa ,GetVisaSubStages ,AddUpdateEmployeeVisaSubStage} from \"../../../api/api\";\r\n+import { toast } from \"react-toastify\";\r\n+import \"react-toastify/dist/ReactToastify.css\";\r\n+import FilterJson from \"../../json/filterjson\";\r\n+import VisaTimeLine from \"../../common/visaTimeLine\";\r\n+import VisaSubStageSelector from \"../../common/visaSubsStage\";\r\n+export default function VisaStatus(props) {\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [apiCall, setApiCall] = useState(false);\r\n+  const [selectedStatus, setSelectedStatus] = useState([]);\r\n+  const [expandedStatus, setExpandedStatus] = useState(props.employeeData.visa_status);\r\n+  // eslint-disable-next-line\r\n+  let isExpanded = false;\r\n+  // USER PERSONAL DETAIL VALIDATION\r\n+  // INITIAL STATE ASSIGNMENT\r\n+  const initialFormStateuser = {\r\n+    status: props.employeeData.visa_status,\r\n+    country: props.employeeData.visa_country,\r\n+  };\r\n+   /*Function to get Visa sub stage */\r\n+   const GetVIsaSubSTage = async () => {\r\n+    try {\r\n+      let \r\n+        Response = await GetVisaSubStages(props.employeeData.visa_id,\"visa\")\r\n+      setSelectedStatus(Response.data.data.data)\r\n+    } catch (err) {\r\n+      console.log(err)\r\n+    }\r\n+  }\r\n+  useEffect(() => {\r\n+    GetVIsaSubSTage()\r\n+    if(apiCall === true){\r\n+      setApiCall(false)\r\n+    }\r\n+  }, [apiCall])\r\n+  \r\n+  /* Functionality to close the modal */\r\n+    const close = () => {\r\n+    setState(initialFormStateuser);\r\n+    setErrors(\"\");\r\n+    setLoading(false);\r\n+    props.close();\r\n+  };\r\n+\r\n+  // VALIDATION CONDITIONS\r\n+\r\n+  const validators = {\r\n+    status: [\r\n+      (value) =>\r\n+        value === \"\" || value === null ? \"Visa is required\" : null,\r\n+    ],\r\n+  };\r\n+\r\n+  // CUSTOM VALIDATIONS IMPORT\r\n+  const { state, setState, onInputChange, errors, validate, setErrors } =\r\n+    useValidation(initialFormStateuser, validators);\r\n+  // API CALL\r\n+  // const UserData = async () => {\r\n+  //   const userData = await EmployeeDetails(props.employeeId);\r\n+  //   if (userData.data.employee.length === 0) {\r\n+  //     setState([]);\r\n+  //   } else {\r\n+  //     setState(userData.data.employee[0]);\r\n+  //   }\r\n+  // };\r\n+  // useEffect(() => {\r\n+  //   if (props.employeeId === \"0\" || props.employeeId === undefined) {\r\n+  //     setState(initialFormStateuser);\r\n+  //   } else {\r\n+  //     UserData();\r\n+  //   }\r\n+  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n+  // }, [props]);\r\n+  // VISA STATUS ADD / UPDATE BUTTON\r\n+  async function onVisaUpdateClick(event) {\r\n+    // event.preventDefault();\r\n+    if (validate()) {\r\n+      setLoading(true);\r\n+      try {\r\n+        const responseData = await AddUpdateVisa(props.employeeData.employee_id, state, props.employeeData.visa_id);\r\n+        if (responseData.data.message === \"visa inserted successfully\") {\r\n+          toast.success(\"Visa created successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          props.setApiCall(true);\r\n+          setApiCall(true)\r\n+          setLoading(false)\r\n+            close()\r\n+        }\r\n+        if (responseData.data.message === \"visa updated successfully\") {\r\n+          toast.success(\"Visa status Updated successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          props.setApiCall(true);\r\n+          setApiCall(true)\r\n+          setLoading(false)\r\n+            close()\r\n+        }\r\n+      } catch (err) {\r\n+       console.log(err) \r\n+        setLoading(false)\r\n+      }\r\n+    } else {\r\n+      //   setLoading(false);\r\n+    }\r\n+  }\r\n+  /*Function to add update visa sub stages */\r\n+  const handleSubStageSelection = async (status, subStage) => {\r\n+    const isSelected = selectedStatus.some(\r\n+      (item) => item.status === status && item.substage === subStage\r\n+    );\r\n+    let data;\r\n+    /*Condition to check the selected substages */\r\n+    if (isSelected) {\r\n+      setSelectedStatus(\r\n+        selectedStatus.filter(\r\n+          (item) => !(item.status === status && item.substage === subStage)\r\n+        )\r\n+      );\r\n+      let RemoveSubStage = selectedStatus.filter(\r\n+        (item) => (item.status === status && item.substage === subStage)\r\n+      )[0]\r\n+      data = {\r\n+        id:RemoveSubStage.id,\r\n+        misc_id:RemoveSubStage.misc_id,\r\n+        type:\"visa\",\r\n+        status:RemoveSubStage.status,\r\n+        substage:\"false\"\r\n+      }\r\n+      console.log(\"id =>\",data)\r\n+    } else {\r\n+      setSelectedStatus([\r\n+        ...selectedStatus,\r\n+        { status: status, substage: subStage },\r\n+      ]);\r\n+        /*Employee Visa sub stages */\r\n+        data = {\r\n+          misc_id:props.employeeData.visa_id,\r\n+          type:\"visa\",\r\n+          status:status,\r\n+          substage:subStage\r\n+        }\r\n+    }\r\n+    try {\r\n+      let Response = await AddUpdateEmployeeVisaSubStage(data)\r\n+      /*Removed sub stage response */\r\n+      if (Response.message === \"updated successfully\") {\r\n+        toast.success(\"visa Sub Stage Removed successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n+        //   setState({ ...state, status: status })\r\n+        //   if (typeof onVisaUpdateClick === 'function') {\r\n+        //     onVisaUpdateClick(\"sub\");\r\n+        //   }\r\n+        // }\r\n+        setApiCall(true)\r\n+      }\r\n+      /*Added sub stage response */\r\n+      if (Response.message === \"created successfully\") {\r\n+        toast.success(\"visa Sub Stage Added successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n+        //   setState({ ...state, status: status })\r\n+        //   if (typeof onVisaUpdateClick === 'function') {\r\n+        //     onVisaUpdateClick(\"sub\");\r\n+        //   }\r\n+        // }\r\n+        setApiCall(true)\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err)\r\n+      console.log(err)\r\n+    }\r\n+  };\r\n+  return (\r\n+    <>\r\n+      <Modal\r\n+        show={props.show}\r\n+        size=\"md\"\r\n+        aria-labelledby=\"contained-modal-title-vcenter\"\r\n+        centered\r\n+      >\r\n+        <button\r\n+          type=\"button\"\r\n+          className=\"circle-32 btn-reset bg-white pos-abs-tr mt-md-n6 mr-lg-n6 focus-reset z-index-supper\"\r\n+          data-dismiss=\"modal\"\r\n+          onClick={close}\r\n+        >\r\n+          <i className=\"fas fa-times\"></i>\r\n+        </button>\r\n+        {/* <div className=\"modal-dialog max-width-px-540 position-relative\"> */}\r\n+        <div className=\"bg-white rounded h-100 px-11 pt-7\">\r\n+          <form >\r\n+            <h5 className=\"text-center pt-2 mb-7\">Update Visa status</h5>\r\n+            <VisaTimeLine\r\n+              visa={state.status} />\r\n+              {expandedStatus &&\r\n+              <VisaSubStageSelector\r\n+              expandedStatus={expandedStatus}\r\n+              selectedStatus={selectedStatus}\r\n+              FilterJson={FilterJson}\r\n+              handleSubStageSelection={handleSubStageSelection}/>}\r\n+            <div className=\"form-group col\">\r\n+              <label\r\n+                htmlFor=\"status\"\r\n+                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n+              >\r\n+                Work Permit : <span className=\"text-danger\">*</span>\r\n+              </label>\r\n+              <select\r\n+                name=\"status\"\r\n+                value={state.status || \"\"}\r\n+                onChange={(e)=>{\r\n+                  setState({...state , status :e.target.value})\r\n+                  setExpandedStatus(e.target.value);\r\n+                }}\r\n+                multiple={false}\r\n+                className={\r\n+                  errors.status\r\n+                    ? \"form-control text-capitalize border border-danger\"\r\n+                    : \"form-control text-capitalize\"\r\n+                }\r\n+                id=\"status\"\r\n+              >\r\n+                <option value={\"\"}>Select visa status </option>\r\n+                {(FilterJson.visa_status || []).map((item, index) => {\r\n+                  isExpanded = expandedStatus === item\r\n+                  return (\r\n+                    <option value={item} key={index}>{item}</option>\r\n+                  )\r\n+                })}\r\n+\r\n+              </select>\r\n+              {/*----ERROR MESSAGE FOR WORK PERMIT----*/}\r\n+              {errors.status && (\r\n+                <span\r\n+                  key={errors.status}\r\n+                  className=\"text-danger font-size-3\"\r\n+                >\r\n+                  {errors.status}\r\n+                </span>\r\n+              )}\r\n+            </div>\r\n+            <div className=\"form-group col\">\r\n+              <label\r\n+                htmlFor=\"country\"\r\n+                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n+              >\r\n+                Country :\r\n+              </label>\r\n+              <select\r\n+                name=\"country\"\r\n+                value={state.country || \"\"}\r\n+                onChange={onInputChange}\r\n+                className={\"form-control text-capitalize\"}\r\n+                disabled={props.employeeData.visa_country}\r\n+                id=\"country\"\r\n+              >\r\n+                <option value={\"\"}>Select visa Country </option>\r\n+                {(FilterJson.location || []).map((item, index) => (\r\n+                  <option value={item} key={index}>{item}</option>\r\n+                ))}\r\n+              </select>\r\n+            </div>\r\n+            <div className=\"form-group text-center\">\r\n+              {loading === true ? (\r\n+                <button\r\n+                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n+                  type=\"button\"\r\n+                  disabled\r\n+                >\r\n+                  <span\r\n+                    className=\"spinner-border spinner-border-sm \"\r\n+                    role=\"status\"\r\n+                    aria-hidden=\"true\"\r\n+                  ></span>\r\n+                  <span className=\"sr-only\">Loading...</span>\r\n+                </button>\r\n+              ) : (\r\n+                <button\r\n+                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n+                  type=\"button\"\r\n+                  onClick={onVisaUpdateClick}\r\n+                >\r\n+                  Submit\r\n+                </button>\r\n+              )}\r\n+            </div>\r\n+          </form>\r\n+          {/* </div> */}\r\n+        </div>\r\n+      </Modal>\r\n+    </>)\r\n+}\r\n"
                },
                {
                    "date": 1693486958674,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,12 +150,9 @@\n     try {\r\n       let Response = await AddUpdateEmployeeVisaSubStage(data)\r\n       /*Removed sub stage response */\r\n       if (Response.message === \"updated successfully\") {\r\n-        toast.success(\"visa Sub Stage Removed successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n+        toast.success(\"visa Sub Stage Removed successfully\", \r\n         // if (state.status !== props.employeeData.status && status !== state.status) {\r\n         //   setState({ ...state, status: status })\r\n         //   if (typeof onVisaUpdateClick === 'function') {\r\n         //     onVisaUpdateClick(\"sub\");\r\n@@ -164,12 +161,9 @@\n         setApiCall(true)\r\n       }\r\n       /*Added sub stage response */\r\n       if (Response.message === \"created successfully\") {\r\n-        toast.success(\"visa Sub Stage Added successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n+        toast.success(\"visa Sub Stage Added successfully\", \r\n         // if (state.status !== props.employeeData.status && status !== state.status) {\r\n         //   setState({ ...state, status: status })\r\n         //   if (typeof onVisaUpdateClick === 'function') {\r\n         //     onVisaUpdateClick(\"sub\");\r\n@@ -301,311 +295,4 @@\n         </div>\r\n       </Modal>\r\n     </>)\r\n }\r\n-import React, { useState ,useEffect} from \"react\";\r\n-import { Modal } from \"react-bootstrap\";\r\n-import useValidation from \"../../common/useValidation\";\r\n-// import { CKEditor } from \"ckeditor4-react\";\r\n-import { AddUpdateVisa ,GetVisaSubStages ,AddUpdateEmployeeVisaSubStage} from \"../../../api/api\";\r\n-import { toast } from \"react-toastify\";\r\n-import \"react-toastify/dist/ReactToastify.css\";\r\n-import FilterJson from \"../../json/filterjson\";\r\n-import VisaTimeLine from \"../../common/visaTimeLine\";\r\n-import VisaSubStageSelector from \"../../common/visaSubsStage\";\r\n-export default function VisaStatus(props) {\r\n-  const [loading, setLoading] = useState(false);\r\n-  const [apiCall, setApiCall] = useState(false);\r\n-  const [selectedStatus, setSelectedStatus] = useState([]);\r\n-  const [expandedStatus, setExpandedStatus] = useState(props.employeeData.visa_status);\r\n-  // eslint-disable-next-line\r\n-  let isExpanded = false;\r\n-  // USER PERSONAL DETAIL VALIDATION\r\n-  // INITIAL STATE ASSIGNMENT\r\n-  const initialFormStateuser = {\r\n-    status: props.employeeData.visa_status,\r\n-    country: props.employeeData.visa_country,\r\n-  };\r\n-   /*Function to get Visa sub stage */\r\n-   const GetVIsaSubSTage = async () => {\r\n-    try {\r\n-      let \r\n-        Response = await GetVisaSubStages(props.employeeData.visa_id,\"visa\")\r\n-      setSelectedStatus(Response.data.data.data)\r\n-    } catch (err) {\r\n-      console.log(err)\r\n-    }\r\n-  }\r\n-  useEffect(() => {\r\n-    GetVIsaSubSTage()\r\n-    if(apiCall === true){\r\n-      setApiCall(false)\r\n-    }\r\n-  }, [apiCall])\r\n-  \r\n-  /* Functionality to close the modal */\r\n-    const close = () => {\r\n-    setState(initialFormStateuser);\r\n-    setErrors(\"\");\r\n-    setLoading(false);\r\n-    props.close();\r\n-  };\r\n-\r\n-  // VALIDATION CONDITIONS\r\n-\r\n-  const validators = {\r\n-    status: [\r\n-      (value) =>\r\n-        value === \"\" || value === null ? \"Visa is required\" : null,\r\n-    ],\r\n-  };\r\n-\r\n-  // CUSTOM VALIDATIONS IMPORT\r\n-  const { state, setState, onInputChange, errors, validate, setErrors } =\r\n-    useValidation(initialFormStateuser, validators);\r\n-  // API CALL\r\n-  // const UserData = async () => {\r\n-  //   const userData = await EmployeeDetails(props.employeeId);\r\n-  //   if (userData.data.employee.length === 0) {\r\n-  //     setState([]);\r\n-  //   } else {\r\n-  //     setState(userData.data.employee[0]);\r\n-  //   }\r\n-  // };\r\n-  // useEffect(() => {\r\n-  //   if (props.employeeId === \"0\" || props.employeeId === undefined) {\r\n-  //     setState(initialFormStateuser);\r\n-  //   } else {\r\n-  //     UserData();\r\n-  //   }\r\n-  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n-  // }, [props]);\r\n-  // VISA STATUS ADD / UPDATE BUTTON\r\n-  async function onVisaUpdateClick(event) {\r\n-    // event.preventDefault();\r\n-    if (validate()) {\r\n-      setLoading(true);\r\n-      try {\r\n-        const responseData = await AddUpdateVisa(props.employeeData.employee_id, state, props.employeeData.visa_id);\r\n-        if (responseData.data.message === \"visa inserted successfully\") {\r\n-          toast.success(\"Visa created successfully\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 1000,\r\n-          });\r\n-          props.setApiCall(true);\r\n-          setApiCall(true)\r\n-          setLoading(false)\r\n-            close()\r\n-        }\r\n-        if (responseData.data.message === \"visa updated successfully\") {\r\n-          toast.success(\"Visa status Updated successfully\", {\r\n-            position: toast.POSITION.TOP_RIGHT,\r\n-            autoClose: 1000,\r\n-          });\r\n-          props.setApiCall(true);\r\n-          setApiCall(true)\r\n-          setLoading(false)\r\n-            close()\r\n-        }\r\n-      } catch (err) {\r\n-       console.log(err) {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        setLoading(false)\r\n-      }\r\n-    } else {\r\n-      //   setLoading(false);\r\n-    }\r\n-  }\r\n-  /*Function to add update visa sub stages */\r\n-  const handleSubStageSelection = async (status, subStage) => {\r\n-    const isSelected = selectedStatus.some(\r\n-      (item) => item.status === status && item.substage === subStage\r\n-    );\r\n-    let data;\r\n-    /*Condition to check the selected substages */\r\n-    if (isSelected) {\r\n-      setSelectedStatus(\r\n-        selectedStatus.filter(\r\n-          (item) => !(item.status === status && item.substage === subStage)\r\n-        )\r\n-      );\r\n-      let RemoveSubStage = selectedStatus.filter(\r\n-        (item) => (item.status === status && item.substage === subStage)\r\n-      )[0]\r\n-      data = {\r\n-        id:RemoveSubStage.id,\r\n-        misc_id:RemoveSubStage.misc_id,\r\n-        type:\"visa\",\r\n-        status:RemoveSubStage.status,\r\n-        substage:\"false\"\r\n-      }\r\n-      console.log(\"id =>\",data)\r\n-    } else {\r\n-      setSelectedStatus([\r\n-        ...selectedStatus,\r\n-        { status: status, substage: subStage },\r\n-      ]);\r\n-        /*Employee Visa sub stages */\r\n-        data = {\r\n-          misc_id:props.employeeData.visa_id,\r\n-          type:\"visa\",\r\n-          status:status,\r\n-          substage:subStage\r\n-        }\r\n-    }\r\n-    try {\r\n-      let Response = await AddUpdateEmployeeVisaSubStage(data)\r\n-      /*Removed sub stage response */\r\n-      if (Response.message === \"updated successfully\") {\r\n-        toast.success(\"visa Sub Stage Removed successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n-        //   setState({ ...state, status: status })\r\n-        //   if (typeof onVisaUpdateClick === 'function') {\r\n-        //     onVisaUpdateClick(\"sub\");\r\n-        //   }\r\n-        // }\r\n-        setApiCall(true)\r\n-      }\r\n-      /*Added sub stage response */\r\n-      if (Response.message === \"created successfully\") {\r\n-        toast.success(\"visa Sub Stage Added successfully\", {\r\n-          position: toast.POSITION.TOP_RIGHT,\r\n-          autoClose: 1000,\r\n-        });\r\n-        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n-        //   setState({ ...state, status: status })\r\n-        //   if (typeof onVisaUpdateClick === 'function') {\r\n-        //     onVisaUpdateClick(\"sub\");\r\n-        //   }\r\n-        // }\r\n-        setApiCall(true)\r\n-      }\r\n-    } catch (err) {\r\n-      console.log(err)\r\n-      console.log(err)\r\n-    }\r\n-  };\r\n-  return (\r\n-    <>\r\n-      <Modal\r\n-        show={props.show}\r\n-        size=\"md\"\r\n-        aria-labelledby=\"contained-modal-title-vcenter\"\r\n-        centered\r\n-      >\r\n-        <button\r\n-          type=\"button\"\r\n-          className=\"circle-32 btn-reset bg-white pos-abs-tr mt-md-n6 mr-lg-n6 focus-reset z-index-supper\"\r\n-          data-dismiss=\"modal\"\r\n-          onClick={close}\r\n-        >\r\n-          <i className=\"fas fa-times\"></i>\r\n-        </button>\r\n-        {/* <div className=\"modal-dialog max-width-px-540 position-relative\"> */}\r\n-        <div className=\"bg-white rounded h-100 px-11 pt-7\">\r\n-          <form >\r\n-            <h5 className=\"text-center pt-2 mb-7\">Update Visa status</h5>\r\n-            <VisaTimeLine\r\n-              visa={state.status} />\r\n-              {expandedStatus &&\r\n-              <VisaSubStageSelector\r\n-              expandedStatus={expandedStatus}\r\n-              selectedStatus={selectedStatus}\r\n-              FilterJson={FilterJson}\r\n-              handleSubStageSelection={handleSubStageSelection}/>}\r\n-            <div className=\"form-group col\">\r\n-              <label\r\n-                htmlFor=\"status\"\r\n-                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n-              >\r\n-                Work Permit : <span className=\"text-danger\">*</span>\r\n-              </label>\r\n-              <select\r\n-                name=\"status\"\r\n-                value={state.status || \"\"}\r\n-                onChange={(e)=>{\r\n-                  setState({...state , status :e.target.value})\r\n-                  setExpandedStatus(e.target.value);\r\n-                }}\r\n-                multiple={false}\r\n-                className={\r\n-                  errors.status\r\n-                    ? \"form-control text-capitalize border border-danger\"\r\n-                    : \"form-control text-capitalize\"\r\n-                }\r\n-                id=\"status\"\r\n-              >\r\n-                <option value={\"\"}>Select visa status </option>\r\n-                {(FilterJson.visa_status || []).map((item, index) => {\r\n-                  isExpanded = expandedStatus === item\r\n-                  return (\r\n-                    <option value={item} key={index}>{item}</option>\r\n-                  )\r\n-                })}\r\n-\r\n-              </select>\r\n-              {/*----ERROR MESSAGE FOR WORK PERMIT----*/}\r\n-              {errors.status && (\r\n-                <span\r\n-                  key={errors.status}\r\n-                  className=\"text-danger font-size-3\"\r\n-                >\r\n-                  {errors.status}\r\n-                </span>\r\n-              )}\r\n-            </div>\r\n-            <div className=\"form-group col\">\r\n-              <label\r\n-                htmlFor=\"country\"\r\n-                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n-              >\r\n-                Country :\r\n-              </label>\r\n-              <select\r\n-                name=\"country\"\r\n-                value={state.country || \"\"}\r\n-                onChange={onInputChange}\r\n-                className={\"form-control text-capitalize\"}\r\n-                disabled={props.employeeData.visa_country}\r\n-                id=\"country\"\r\n-              >\r\n-                <option value={\"\"}>Select visa Country </option>\r\n-                {(FilterJson.location || []).map((item, index) => (\r\n-                  <option value={item} key={index}>{item}</option>\r\n-                ))}\r\n-              </select>\r\n-            </div>\r\n-            <div className=\"form-group text-center\">\r\n-              {loading === true ? (\r\n-                <button\r\n-                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n-                  type=\"button\"\r\n-                  disabled\r\n-                >\r\n-                  <span\r\n-                    className=\"spinner-border spinner-border-sm \"\r\n-                    role=\"status\"\r\n-                    aria-hidden=\"true\"\r\n-                  ></span>\r\n-                  <span className=\"sr-only\">Loading...</span>\r\n-                </button>\r\n-              ) : (\r\n-                <button\r\n-                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n-                  type=\"button\"\r\n-                  onClick={onVisaUpdateClick}\r\n-                >\r\n-                  Submit\r\n-                </button>\r\n-              )}\r\n-            </div>\r\n-          </form>\r\n-          {/* </div> */}\r\n-        </div>\r\n-      </Modal>\r\n-    </>)\r\n-}\r\n"
                },
                {
                    "date": 1693487088162,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,9 +161,12 @@\n         setApiCall(true)\r\n       }\r\n       /*Added sub stage response */\r\n       if (Response.message === \"created successfully\") {\r\n-        toast.success(\"visa Sub Stage Added successfully\", \r\n+        toast.success(\"visa Sub Stage Added successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n         // if (state.status !== props.employeeData.status && status !== state.status) {\r\n         //   setState({ ...state, status: status })\r\n         //   if (typeof onVisaUpdateClick === 'function') {\r\n         //     onVisaUpdateClick(\"sub\");\r\n"
                },
                {
                    "date": 1693487097071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,9 +150,12 @@\n     try {\r\n       let Response = await AddUpdateEmployeeVisaSubStage(data)\r\n       /*Removed sub stage response */\r\n       if (Response.message === \"updated successfully\") {\r\n-        toast.success(\"visa Sub Stage Removed successfully\", \r\n+        toast.success(\"visa Sub Stage Removed successfully\",{\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        }); \r\n         // if (state.status !== props.employeeData.status && status !== state.status) {\r\n         //   setState({ ...state, status: status })\r\n         //   if (typeof onVisaUpdateClick === 'function') {\r\n         //     onVisaUpdateClick(\"sub\");\r\n"
                },
                {
                    "date": 1693546382605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -208,9 +208,10 @@\n               <VisaSubStageSelector\r\n               expandedStatus={expandedStatus}\r\n               selectedStatus={selectedStatus}\r\n               FilterJson={FilterJson}\r\n-              handleSubStageSelection={handleSubStageSelection}/>}\r\n+              handleSubStageSelection={handleSubStageSelection}\r\n+              mainstage={state.status}/>}\r\n             <div className=\"form-group col\">\r\n               <label\r\n                 htmlFor=\"status\"\r\n                 className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n"
                },
                {
                    "date": 1693546391471,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,13 @@\n-import React, { useState ,useEffect} from \"react\";\r\n+import React, { useState, useEffect } from \"react\";\r\n import { Modal } from \"react-bootstrap\";\r\n import useValidation from \"../../common/useValidation\";\r\n // import { CKEditor } from \"ckeditor4-react\";\r\n-import { AddUpdateVisa ,GetVisaSubStages ,AddUpdateEmployeeVisaSubStage} from \"../../../api/api\";\r\n+import {\r\n+  AddUpdateVisa,\r\n+  GetVisaSubStages,\r\n+  AddUpdateEmployeeVisaSubStage,\r\n+} from \"../../../api/api\";\r\n import { toast } from \"react-toastify\";\r\n import \"react-toastify/dist/ReactToastify.css\";\r\n import FilterJson from \"../../json/filterjson\";\r\n import VisaTimeLine from \"../../common/visaTimeLine\";\r\n@@ -11,36 +15,37 @@\n export default function VisaStatus(props) {\r\n   const [loading, setLoading] = useState(false);\r\n   const [apiCall, setApiCall] = useState(false);\r\n   const [selectedStatus, setSelectedStatus] = useState([]);\r\n-  const [expandedStatus, setExpandedStatus] = useState(props.employeeData.visa_status);\r\n+  const [expandedStatus, setExpandedStatus] = useState(\r\n+    props.employeeData.visa_status\r\n+  );\r\n   // eslint-disable-next-line\r\n   let isExpanded = false;\r\n   // USER PERSONAL DETAIL VALIDATION\r\n   // INITIAL STATE ASSIGNMENT\r\n   const initialFormStateuser = {\r\n     status: props.employeeData.visa_status,\r\n     country: props.employeeData.visa_country,\r\n   };\r\n-   /*Function to get Visa sub stage */\r\n-   const GetVIsaSubSTage = async () => {\r\n+  /*Function to get Visa sub stage */\r\n+  const GetVIsaSubSTage = async () => {\r\n     try {\r\n-      let \r\n-        Response = await GetVisaSubStages(props.employeeData.visa_id,\"visa\")\r\n-      setSelectedStatus(Response.data.data.data)\r\n+      let Response = await GetVisaSubStages(props.employeeData.visa_id, \"visa\");\r\n+      setSelectedStatus(Response.data.data.data);\r\n     } catch (err) {\r\n-      console.log(err)\r\n+      console.log(err);\r\n     }\r\n-  }\r\n+  };\r\n   useEffect(() => {\r\n-    GetVIsaSubSTage()\r\n-    if(apiCall === true){\r\n-      setApiCall(false)\r\n+    GetVIsaSubSTage();\r\n+    if (apiCall === true) {\r\n+      setApiCall(false);\r\n     }\r\n-  }, [apiCall])\r\n-  \r\n+  }, [apiCall]);\r\n+\r\n   /* Functionality to close the modal */\r\n-    const close = () => {\r\n+  const close = () => {\r\n     setState(initialFormStateuser);\r\n     setErrors(\"\");\r\n     setLoading(false);\r\n     props.close();\r\n@@ -49,10 +54,9 @@\n   // VALIDATION CONDITIONS\r\n \r\n   const validators = {\r\n     status: [\r\n-      (value) =>\r\n-        value === \"\" || value === null ? \"Visa is required\" : null,\r\n+      (value) => (value === \"\" || value === null ? \"Visa is required\" : null),\r\n     ],\r\n   };\r\n \r\n   // CUSTOM VALIDATIONS IMPORT\r\n@@ -80,32 +84,36 @@\n     // event.preventDefault();\r\n     if (validate()) {\r\n       setLoading(true);\r\n       try {\r\n-        const responseData = await AddUpdateVisa(props.employeeData.employee_id, state, props.employeeData.visa_id);\r\n+        const responseData = await AddUpdateVisa(\r\n+          props.employeeData.employee_id,\r\n+          state,\r\n+          props.employeeData.visa_id\r\n+        );\r\n         if (responseData.data.message === \"visa inserted successfully\") {\r\n           toast.success(\"Visa created successfully\", {\r\n             position: toast.POSITION.TOP_RIGHT,\r\n             autoClose: 1000,\r\n           });\r\n           props.setApiCall(true);\r\n-          setApiCall(true)\r\n-          setLoading(false)\r\n-            close()\r\n+          setApiCall(true);\r\n+          setLoading(false);\r\n+          close();\r\n         }\r\n         if (responseData.data.message === \"visa updated successfully\") {\r\n           toast.success(\"Visa status Updated successfully\", {\r\n             position: toast.POSITION.TOP_RIGHT,\r\n             autoClose: 1000,\r\n           });\r\n           props.setApiCall(true);\r\n-          setApiCall(true)\r\n-          setLoading(false)\r\n-            close()\r\n+          setApiCall(true);\r\n+          setLoading(false);\r\n+          close();\r\n         }\r\n       } catch (err) {\r\n-       console.log(err) \r\n-        setLoading(false)\r\n+        console.log(err);\r\n+        setLoading(false);\r\n       }\r\n     } else {\r\n       //   setLoading(false);\r\n     }\r\n@@ -123,46 +131,46 @@\n           (item) => !(item.status === status && item.substage === subStage)\r\n         )\r\n       );\r\n       let RemoveSubStage = selectedStatus.filter(\r\n-        (item) => (item.status === status && item.substage === subStage)\r\n-      )[0]\r\n+        (item) => item.status === status && item.substage === subStage\r\n+      )[0];\r\n       data = {\r\n-        id:RemoveSubStage.id,\r\n-        misc_id:RemoveSubStage.misc_id,\r\n-        type:\"visa\",\r\n-        status:RemoveSubStage.status,\r\n-        substage:\"false\"\r\n-      }\r\n-      console.log(\"id =>\",data)\r\n+        id: RemoveSubStage.id,\r\n+        misc_id: RemoveSubStage.misc_id,\r\n+        type: \"visa\",\r\n+        status: RemoveSubStage.status,\r\n+        substage: \"false\",\r\n+      };\r\n+      console.log(\"id =>\", data);\r\n     } else {\r\n       setSelectedStatus([\r\n         ...selectedStatus,\r\n         { status: status, substage: subStage },\r\n       ]);\r\n-        /*Employee Visa sub stages */\r\n-        data = {\r\n-          misc_id:props.employeeData.visa_id,\r\n-          type:\"visa\",\r\n-          status:status,\r\n-          substage:subStage\r\n-        }\r\n+      /*Employee Visa sub stages */\r\n+      data = {\r\n+        misc_id: props.employeeData.visa_id,\r\n+        type: \"visa\",\r\n+        status: status,\r\n+        substage: subStage,\r\n+      };\r\n     }\r\n     try {\r\n-      let Response = await AddUpdateEmployeeVisaSubStage(data)\r\n+      let Response = await AddUpdateEmployeeVisaSubStage(data);\r\n       /*Removed sub stage response */\r\n       if (Response.message === \"updated successfully\") {\r\n-        toast.success(\"visa Sub Stage Removed successfully\",{\r\n+        toast.success(\"visa Sub Stage Removed successfully\", {\r\n           position: toast.POSITION.TOP_RIGHT,\r\n           autoClose: 1000,\r\n-        }); \r\n+        });\r\n         // if (state.status !== props.employeeData.status && status !== state.status) {\r\n         //   setState({ ...state, status: status })\r\n         //   if (typeof onVisaUpdateClick === 'function') {\r\n         //     onVisaUpdateClick(\"sub\");\r\n         //   }\r\n         // }\r\n-        setApiCall(true)\r\n+        setApiCall(true);\r\n       }\r\n       /*Added sub stage response */\r\n       if (Response.message === \"created successfully\") {\r\n         toast.success(\"visa Sub Stage Added successfully\", {\r\n@@ -174,13 +182,13 @@\n         //   if (typeof onVisaUpdateClick === 'function') {\r\n         //     onVisaUpdateClick(\"sub\");\r\n         //   }\r\n         // }\r\n-        setApiCall(true)\r\n+        setApiCall(true);\r\n       }\r\n     } catch (err) {\r\n-      console.log(err)\r\n-      console.log(err)\r\n+      console.log(err);\r\n+      console.log(err);\r\n     }\r\n   };\r\n   return (\r\n     <>\r\n@@ -199,19 +207,20 @@\n           <i className=\"fas fa-times\"></i>\r\n         </button>\r\n         {/* <div className=\"modal-dialog max-width-px-540 position-relative\"> */}\r\n         <div className=\"bg-white rounded h-100 px-11 pt-7\">\r\n-          <form >\r\n+          <form>\r\n             <h5 className=\"text-center pt-2 mb-7\">Update Visa status</h5>\r\n-            <VisaTimeLine\r\n-              visa={state.status} />\r\n-              {expandedStatus &&\r\n+            <VisaTimeLine visa={state.status} />\r\n+            {expandedStatus && (\r\n               <VisaSubStageSelector\r\n-              expandedStatus={expandedStatus}\r\n-              selectedStatus={selectedStatus}\r\n-              FilterJson={FilterJson}\r\n-              handleSubStageSelection={handleSubStageSelection}\r\n-              mainstage={state.status}/>}\r\n+                expandedStatus={expandedStatus}\r\n+                selectedStatus={selectedStatus}\r\n+                FilterJson={FilterJson}\r\n+                handleSubStageSelection={handleSubStageSelection}\r\n+                mainstage={state.status}\r\n+              />\r\n+            )}\r\n             <div className=\"form-group col\">\r\n               <label\r\n                 htmlFor=\"status\"\r\n                 className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n@@ -220,10 +229,10 @@\n               </label>\r\n               <select\r\n                 name=\"status\"\r\n                 value={state.status || \"\"}\r\n-                onChange={(e)=>{\r\n-                  setState({...state , status :e.target.value})\r\n+                onChange={(e) => {\r\n+                  setState({ ...state, status: e.target.value });\r\n                   setExpandedStatus(e.target.value);\r\n                 }}\r\n                 multiple={false}\r\n                 className={\r\n@@ -234,21 +243,19 @@\n                 id=\"status\"\r\n               >\r\n                 <option value={\"\"}>Select visa status </option>\r\n                 {(FilterJson.visa_status || []).map((item, index) => {\r\n-                  isExpanded = expandedStatus === item\r\n+                  isExpanded = expandedStatus === item;\r\n                   return (\r\n-                    <option value={item} key={index}>{item}</option>\r\n-                  )\r\n+                    <option value={item} key={index}>\r\n+                      {item}\r\n+                    </option>\r\n+                  );\r\n                 })}\r\n-\r\n               </select>\r\n               {/*----ERROR MESSAGE FOR WORK PERMIT----*/}\r\n               {errors.status && (\r\n-                <span\r\n-                  key={errors.status}\r\n-                  className=\"text-danger font-size-3\"\r\n-                >\r\n+                <span key={errors.status} className=\"text-danger font-size-3\">\r\n                   {errors.status}\r\n                 </span>\r\n               )}\r\n             </div>\r\n@@ -268,9 +275,11 @@\n                 id=\"country\"\r\n               >\r\n                 <option value={\"\"}>Select visa Country </option>\r\n                 {(FilterJson.location || []).map((item, index) => (\r\n-                  <option value={item} key={index}>{item}</option>\r\n+                  <option value={item} key={index}>\r\n+                    {item}\r\n+                  </option>\r\n                 ))}\r\n               </select>\r\n             </div>\r\n             <div className=\"form-group text-center\">\r\n@@ -300,6 +309,7 @@\n           </form>\r\n           {/* </div> */}\r\n         </div>\r\n       </Modal>\r\n-    </>)\r\n+    </>\r\n+  );\r\n }\r\n"
                },
                {
                    "date": 1693807332588,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,314 @@\n+import React, { useState, useEffect } from \"react\";\r\n+import { Modal } from \"react-bootstrap\";\r\n+import useValidation from \"../../common/useValidation\";\r\n+// import { CKEditor } from \"ckeditor4-react\";\r\n+import {\r\n+  AddUpdateVisa,\r\n+  GetVisaSubStages,\r\n+  AddUpdateEmployeeVisaSubStage,\r\n+} from \"../../../api/api\";\r\n+import { toast } from \"react-toastify\";\r\n+import \"react-toastify/dist/ReactToastify.css\";\r\n+import FilterJson from \"../../json/filterjson\";\r\n+import VisaTimeLine from \"../../common/visaTimeLine\";\r\n+import VisaSubStageSelector from \"../../common/visaSubsStage\";\r\n+export default function VisaStatus(props) {\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [apiCall, setApiCall] = useState(false);\r\n+  const [selectedStatus, setSelectedStatus] = useState([]);\r\n+  const [expandedStatus, setExpandedStatus] = useState(\r\n+    props.employeeData.visa_status\r\n+  );\r\n+  // eslint-disable-next-line\r\n+  let isExpanded = false;\r\n+  // USER PERSONAL DETAIL VALIDATION\r\n+  // INITIAL STATE ASSIGNMENT\r\n+  const initialFormStateuser = {\r\n+    status: props.employeeData.visa_status,\r\n+    country: props.employeeData.visa_country,\r\n+  };\r\n+  /*Function to get Visa sub stage */\r\n+  const GetVIsaSubSTage = async () => {\r\n+    try {\r\n+      let Response = await GetVisaSubStages(props.employeeData.visa_id, \"visa\");\r\n+      setSelectedStatus(Response.data.data.data);\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  useEffect(() => {\r\n+    GetVIsaSubSTage();\r\n+    if (apiCall === true) {\r\n+      setApiCall(false);\r\n+    }\r\n+  }, [apiCall]);\r\n+\r\n+  /* Functionality to close the modal */\r\n+  const close = () => {\r\n+    setState(initialFormStateuser);\r\n+    setErrors(\"\");\r\n+    setLoading(false);\r\n+    props.close();\r\n+  };\r\n+\r\n+  // VALIDATION CONDITIONS\r\n+\r\n+  const validators = {\r\n+    status: [\r\n+      (value) => (value === \"\" || value === null ? \"Visa is required\" : null),\r\n+    ],\r\n+  };\r\n+\r\n+  // CUSTOM VALIDATIONS IMPORT\r\n+  const { state, setState, onInputChange, errors, validate, setErrors } =\r\n+    useValidation(initialFormStateuser, validators);\r\n+  // API CALL\r\n+  // const UserData = async () => {\r\n+  //   const userData = await EmployeeDetails(props.employeeId);\r\n+  //   if (userData.data.employee.length === 0) {\r\n+  //     setState([]);\r\n+  //   } else {\r\n+  //     setState(userData.data.employee[0]);\r\n+  //   }\r\n+  // };\r\n+  // useEffect(() => {\r\n+  //   if (props.employeeId === \"0\" || props.employeeId === undefined) {\r\n+  //     setState(initialFormStateuser);\r\n+  //   } else {\r\n+  //     UserData();\r\n+  //   }\r\n+  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n+  // }, [props]);\r\n+  // VISA STATUS ADD / UPDATE BUTTON\r\n+  async function onVisaUpdateClick(event) {\r\n+    // event.preventDefault();\r\n+    if (validate()) {\r\n+      setLoading(true);\r\n+      try {\r\n+        const responseData = await AddUpdateVisa(\r\n+          props.employeeData.employee_id,\r\n+          state,\r\n+          props.employeeData.visa_id\r\n+        );\r\n+        if (responseData.data.message === \"visa inserted successfully\") {\r\n+          toast.success(\"Visa created successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          props.setApiCall(true);\r\n+          setApiCall(true);\r\n+          setLoading(false);\r\n+          close();\r\n+        }\r\n+        if (responseData.data.message === \"visa updated successfully\") {\r\n+          toast.success(\"Visa status Updated successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          props.setApiCall(true);\r\n+          setApiCall(true);\r\n+          setLoading(false);\r\n+          close();\r\n+        }\r\n+      } catch (err) {\r\n+        console.log(err);\r\n+        setLoading(false);\r\n+      }\r\n+    } else {\r\n+      //   setLoading(false);\r\n+    }\r\n+  }\r\n+  /*Function to add update visa sub stages */\r\n+  const handleSubStageSelection = async (status, subStage) => {\r\n+    const isSelected = selectedStatus.some(\r\n+      (item) => item.status === status && item.substage === subStage\r\n+    );\r\n+    let data;\r\n+    /*Condition to check the selected substages */\r\n+    if (isSelected) {\r\n+      setSelectedStatus(\r\n+        selectedStatus.filter(\r\n+          (item) => !(item.status === status && item.substage === subStage)\r\n+        )\r\n+      );\r\n+      let RemoveSubStage = selectedStatus.filter(\r\n+        (item) => item.status === status && item.substage === subStage\r\n+      )[0];\r\n+      data = {\r\n+        id: RemoveSubStage.id,\r\n+        misc_id: RemoveSubStage.misc_id,\r\n+        type: \"visa\",\r\n+        status: RemoveSubStage.status,\r\n+        substage: \"false\",\r\n+      };\r\n+      console.log(\"id =>\", data);\r\n+    } else {\r\n+      setSelectedStatus([\r\n+        ...selectedStatus,\r\n+        { status: status, substage: subStage },\r\n+      ]);\r\n+      /*Employee Visa sub stages */\r\n+      data = {\r\n+        misc_id: props.employeeData.visa_id,\r\n+        type: \"visa\",\r\n+        status: status,\r\n+        substage: subStage,\r\n+      };\r\n+    }\r\n+    try {\r\n+      let Response = await AddUpdateEmployeeVisaSubStage(data);\r\n+      /*Removed sub stage response */\r\n+      if (Response.message === \"updated successfully\") {\r\n+        toast.success(\"visa Sub Stage Removed successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n+        //   setState({ ...state, status: status })\r\n+        //   if (typeof onVisaUpdateClick === 'function') {\r\n+        //     onVisaUpdateClick(\"sub\");\r\n+        //   }\r\n+        // }\r\n+        setApiCall(true);\r\n+      }\r\n+      /*Added sub stage response */\r\n+      if (Response.message === \"created successfully\") {\r\n+        toast.success(\"visa Sub Stage Added successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n+        //   setState({ ...state, status: status })\r\n+        //   if (typeof onVisaUpdateClick === 'function') {\r\n+        //     onVisaUpdateClick(\"sub\");\r\n+        //   }\r\n+        // }\r\n+        setApiCall(true);\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  return (\r\n+    <>\r\n+      <Modal\r\n+        show={props.show}\r\n+        size=\"md\"\r\n+        aria-labelledby=\"contained-modal-title-vcenter\"\r\n+        centered\r\n+      >\r\n+        <button\r\n+          type=\"button\"\r\n+          className=\"circle-32 btn-reset bg-white pos-abs-tr mt-md-n6 mr-lg-n6 focus-reset z-index-supper\"\r\n+          data-dismiss=\"modal\"\r\n+          onClick={close}\r\n+        >\r\n+          <i className=\"fas fa-times\"></i>\r\n+        </button>\r\n+        {/* <div className=\"modal-dialog max-width-px-540 position-relative\"> */}\r\n+        <div className=\"bg-white rounded h-100 px-11 pt-7\">\r\n+          <form>\r\n+            <h5 className=\"text-center pt-2 mb-7\">Update Visa status</h5>\r\n+            <VisaTimeLine visa={state.status} />\r\n+            {expandedStatus && (\r\n+              <VisaSubStageSelector\r\n+                expandedStatus={expandedStatus}\r\n+                selectedStatus={selectedStatus}\r\n+                FilterJson={FilterJson}\r\n+                handleSubStageSelection={handleSubStageSelection}\r\n+                mainstage={state.status}\r\n+              />\r\n+            )}\r\n+            <div className=\"form-group col\">\r\n+              <label\r\n+                htmlFor=\"status\"\r\n+                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n+              >\r\n+                Work Permit : <span className=\"text-danger\">*</span>\r\n+              </label>\r\n+              <select\r\n+                name=\"status\"\r\n+                value={state.status || \"\"}\r\n+                onChange={(e) => {\r\n+                  setState({ ...state, status: e.target.value });\r\n+                  setExpandedStatus(e.target.value);\r\n+                }}\r\n+                multiple={false}\r\n+                className={\r\n+                  errors.status\r\n+                    ? \"form-control text-capitalize border border-danger\"\r\n+                    : \"form-control text-capitalize\"\r\n+                }\r\n+                id=\"status\"\r\n+              >\r\n+                <option value={\"\"}>Select visa status </option>\r\n+                {(FilterJson.visa_status || []).map((item, index) => {\r\n+                  isExpanded = expandedStatus === item;\r\n+                  return (\r\n+                    <option value={item} key={index}>\r\n+                      {item}\r\n+                    </option>\r\n+                  );\r\n+                })}\r\n+              </select>\r\n+              {/*----ERROR MESSAGE FOR WORK PERMIT----*/}\r\n+              {errors.status && (\r\n+                <span key={errors.status} className=\"text-danger font-size-3\">\r\n+                  {errors.status}\r\n+                </span>\r\n+              )}\r\n+            </div>\r\n+            <div className=\"form-group col\">\r\n+              <label\r\n+                htmlFor=\"country\"\r\n+                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n+              >\r\n+                Country :\r\n+              </label>\r\n+              <select\r\n+                name=\"country\"\r\n+                value={state.country || \"\"}\r\n+                onChange={onInputChange}\r\n+                className={\"form-control text-capitalize\"}\r\n+                disabled={props.employeeData.visa_country}\r\n+                id=\"country\"\r\n+              >\r\n+                <option value={\"\"}>Select visa Country </option>\r\n+                {(FilterJson.location || []).map((item, index) => (\r\n+                  <option value={item} key={index}>\r\n+                    {item}\r\n+                  </option>\r\n+                ))}\r\n+              </select>\r\n+            </div>\r\n+            <div className=\"form-group text-center\">\r\n+              {loading === true ? (\r\n+                <button\r\n+                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n+                  type=\"button\"\r\n+                  disabled\r\n+                >\r\n+                  <span\r\n+                    className=\"spinner-border spinner-border-sm \"\r\n+                    role=\"status\"\r\n+                    aria-hidden=\"true\"\r\n+                  ></span>\r\n+                  <span className=\"sr-only\">Loading...</span>\r\n+                </button>\r\n+              ) : (\r\n+                <button\r\n+                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n+                  type=\"button\"\r\n+                  onClick={onVisaUpdateClick}\r\n+                >\r\n+                  Submit\r\n+                </button>\r\n+              )}\r\n+            </div>\r\n+          </form>\r\n+          {/* </div> */}\r\n+        </div>\r\n+      </Modal>\r\n+    </>\r\n+  );\r\n+}\r\n"
                },
                {
                    "date": 1693807407479,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,314 @@\n+import React, { useState, useEffect } from \"react\";\r\n+import { Modal } from \"react-bootstrap\";\r\n+import useValidation from \"../../common/useValidation\";\r\n+// import { CKEditor } from \"ckeditor4-react\";\r\n+import {\r\n+  AddUpdateVisa,\r\n+  GetVisaSubStages,\r\n+  AddUpdateEmployeeVisaSubStage,\r\n+} from \"../../../api/api\";\r\n+import { toast } from \"react-toastify\";\r\n+import \"react-toastify/dist/ReactToastify.css\";\r\n+import FilterJson from \"../../json/filterjson\";\r\n+import VisaTimeLine from \"../../common/visaTimeLine\";\r\n+import VisaSubStageSelector from \"../../common/visaSubsStage\";\r\n+export default function VisaStatus(props) {\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [apiCall, setApiCall] = useState(false);\r\n+  const [selectedStatus, setSelectedStatus] = useState([]);\r\n+  const [expandedStatus, setExpandedStatus] = useState(\r\n+    props.employeeData.visa_status\r\n+  );\r\n+  // eslint-disable-next-line\r\n+  let isExpanded = false;\r\n+  // USER PERSONAL DETAIL VALIDATION\r\n+  // INITIAL STATE ASSIGNMENT\r\n+  const initialFormStateuser = {\r\n+    status: props.employeeData.visa_status,\r\n+    country: props.employeeData.visa_country,\r\n+  };\r\n+  /*Function to get Visa sub stage */\r\n+  const GetVIsaSubSTage = async () => {\r\n+    try {\r\n+      let Response = await GetVisaSubStages(props.employeeData.visa_id, \"visa\");\r\n+      setSelectedStatus(Response.data.data.data);\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  useEffect(() => {\r\n+    GetVIsaSubSTage();\r\n+    if (apiCall === true) {\r\n+      setApiCall(false);\r\n+    }\r\n+  }, [apiCall]);\r\n+\r\n+  /* Functionality to close the modal */\r\n+  const close = () => {\r\n+    setState(initialFormStateuser);\r\n+    setErrors(\"\");\r\n+    setLoading(false);\r\n+    props.close();\r\n+  };\r\n+\r\n+  // VALIDATION CONDITIONS\r\n+\r\n+  const validators = {\r\n+    status: [\r\n+      (value) => (value === \"\" || value === null ? \"Visa is required\" : null),\r\n+    ],\r\n+  };\r\n+\r\n+  // CUSTOM VALIDATIONS IMPORT\r\n+  const { state, setState, onInputChange, errors, validate, setErrors } =\r\n+    useValidation(initialFormStateuser, validators);\r\n+  // API CALL\r\n+  // const UserData = async () => {\r\n+  //   const userData = await EmployeeDetails(props.employeeId);\r\n+  //   if (userData.data.employee.length === 0) {\r\n+  //     setState([]);\r\n+  //   } else {\r\n+  //     setState(userData.data.employee[0]);\r\n+  //   }\r\n+  // };\r\n+  // useEffect(() => {\r\n+  //   if (props.employeeId === \"0\" || props.employeeId === undefined) {\r\n+  //     setState(initialFormStateuser);\r\n+  //   } else {\r\n+  //     UserData();\r\n+  //   }\r\n+  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n+  // }, [props]);\r\n+  // VISA STATUS ADD / UPDATE BUTTON\r\n+  async function onVisaUpdateClick(event) {\r\n+    // event.preventDefault();\r\n+    if (validate()) {\r\n+      setLoading(true);\r\n+      try {\r\n+        const responseData = await AddUpdateVisa(\r\n+          props.employeeData.employee_id,\r\n+          state,\r\n+          props.employeeData.visa_id\r\n+        );\r\n+        if (responseData.data.message === \"visa inserted successfully\") {\r\n+          toast.success(\"Visa created successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          props.setApiCall(true);\r\n+          setApiCall(true);\r\n+          setLoading(false);\r\n+          close();\r\n+        }\r\n+        if (responseData.data.message === \"visa updated successfully\") {\r\n+          toast.success(\"Visa status Updated successfully\", {\r\n+            position: toast.POSITION.TOP_RIGHT,\r\n+            autoClose: 1000,\r\n+          });\r\n+          props.setApiCall(true);\r\n+          setApiCall(true);\r\n+          setLoading(false);\r\n+          close();\r\n+        }\r\n+      } catch (err) {\r\n+        console.log(err);\r\n+        setLoading(false);\r\n+      }\r\n+    } else {\r\n+      //   setLoading(false);\r\n+    }\r\n+  }\r\n+  /*Function to add update visa sub stages */\r\n+  const handleSubStageSelection = async (status, subStage) => {\r\n+    const isSelected = selectedStatus.some(\r\n+      (item) => item.status === status && item.substage === subStage\r\n+    );\r\n+    let data;\r\n+    /*Condition to check the selected substages */\r\n+    if (isSelected) {\r\n+      setSelectedStatus(\r\n+        selectedStatus.filter(\r\n+          (item) => !(item.status === status && item.substage === subStage)\r\n+        )\r\n+      );\r\n+      let RemoveSubStage = selectedStatus.filter(\r\n+        (item) => item.status === status && item.substage === subStage\r\n+      )[0];\r\n+      data = {\r\n+        id: RemoveSubStage.id,\r\n+        misc_id: RemoveSubStage.misc_id,\r\n+        type: \"visa\",\r\n+        status: RemoveSubStage.status,\r\n+        substage: \"false\",\r\n+      };\r\n+      console.log(\"id =>\", data);\r\n+    } else {\r\n+      setSelectedStatus([\r\n+        ...selectedStatus,\r\n+        { status: status, substage: subStage },\r\n+      ]);\r\n+      /*Employee Visa sub stages */\r\n+      data = {\r\n+        misc_id: props.employeeData.visa_id,\r\n+        type: \"visa\",\r\n+        status: status,\r\n+        substage: subStage,\r\n+      };\r\n+    }\r\n+    try {\r\n+      let Response = await AddUpdateEmployeeVisaSubStage(data);\r\n+      /*Removed sub stage response */\r\n+      if (Response.message === \"updated successfully\") {\r\n+        toast.success(\"visa Sub Stage Removed successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n+        //   setState({ ...state, status: status })\r\n+        //   if (typeof onVisaUpdateClick === 'function') {\r\n+        //     onVisaUpdateClick(\"sub\");\r\n+        //   }\r\n+        // }\r\n+        setApiCall(true);\r\n+      }\r\n+      /*Added sub stage response */\r\n+      if (Response.message === \"created successfully\") {\r\n+        toast.success(\"visa Sub Stage Added successfully\", {\r\n+          position: toast.POSITION.TOP_RIGHT,\r\n+          autoClose: 1000,\r\n+        });\r\n+        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n+        //   setState({ ...state, status: status })\r\n+        //   if (typeof onVisaUpdateClick === 'function') {\r\n+        //     onVisaUpdateClick(\"sub\");\r\n+        //   }\r\n+        // }\r\n+        setApiCall(true);\r\n+      }\r\n+    } catch (err) {\r\n+      console.log(err);\r\n+    }\r\n+  };\r\n+  return (\r\n+    <>\r\n+      <Modal\r\n+        show={props.show}\r\n+        size=\"lg\"\r\n+        aria-labelledby=\"contained-modal-title-vcenter\"\r\n+        centered\r\n+      >\r\n+        <button\r\n+          type=\"button\"\r\n+          className=\"circle-32 btn-reset bg-white pos-abs-tr mt-md-n6 mr-lg-n6 focus-reset z-index-supper\"\r\n+          data-dismiss=\"modal\"\r\n+          onClick={close}\r\n+        >\r\n+          <i className=\"fas fa-times\"></i>\r\n+        </button>\r\n+        {/* <div className=\"modal-dialog max-width-px-540 position-relative\"> */}\r\n+        <div className=\"bg-white rounded h-100 px-11 pt-7\">\r\n+          <form>\r\n+            <h5 className=\"text-center pt-2 mb-7\">Update Visa status</h5>\r\n+            <VisaTimeLine visa={state.status} />\r\n+            {expandedStatus && (\r\n+              <VisaSubStageSelector\r\n+                expandedStatus={expandedStatus}\r\n+                selectedStatus={selectedStatus}\r\n+                FilterJson={FilterJson}\r\n+                handleSubStageSelection={handleSubStageSelection}\r\n+                mainstage={state.status}\r\n+              />\r\n+            )}\r\n+            <div className=\"form-group col\">\r\n+              <label\r\n+                htmlFor=\"status\"\r\n+                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n+              >\r\n+                Work Permit : <span className=\"text-danger\">*</span>\r\n+              </label>\r\n+              <select\r\n+                name=\"status\"\r\n+                value={state.status || \"\"}\r\n+                onChange={(e) => {\r\n+                  setState({ ...state, status: e.target.value });\r\n+                  setExpandedStatus(e.target.value);\r\n+                }}\r\n+                multiple={false}\r\n+                className={\r\n+                  errors.status\r\n+                    ? \"form-control text-capitalize border border-danger\"\r\n+                    : \"form-control text-capitalize\"\r\n+                }\r\n+                id=\"status\"\r\n+              >\r\n+                <option value={\"\"}>Select visa status </option>\r\n+                {(FilterJson.visa_status || []).map((item, index) => {\r\n+                  isExpanded = expandedStatus === item;\r\n+                  return (\r\n+                    <option value={item} key={index}>\r\n+                      {item}\r\n+                    </option>\r\n+                  );\r\n+                })}\r\n+              </select>\r\n+              {/*----ERROR MESSAGE FOR WORK PERMIT----*/}\r\n+              {errors.status && (\r\n+                <span key={errors.status} className=\"text-danger font-size-3\">\r\n+                  {errors.status}\r\n+                </span>\r\n+              )}\r\n+            </div>\r\n+            <div className=\"form-group col\">\r\n+              <label\r\n+                htmlFor=\"country\"\r\n+                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n+              >\r\n+                Country :\r\n+              </label>\r\n+              <select\r\n+                name=\"country\"\r\n+                value={state.country || \"\"}\r\n+                onChange={onInputChange}\r\n+                className={\"form-control text-capitalize\"}\r\n+                disabled={props.employeeData.visa_country}\r\n+                id=\"country\"\r\n+              >\r\n+                <option value={\"\"}>Select visa Country </option>\r\n+                {(FilterJson.location || []).map((item, index) => (\r\n+                  <option value={item} key={index}>\r\n+                    {item}\r\n+                  </option>\r\n+                ))}\r\n+              </select>\r\n+            </div>\r\n+            <div className=\"form-group text-center\">\r\n+              {loading === true ? (\r\n+                <button\r\n+                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n+                  type=\"button\"\r\n+                  disabled\r\n+                >\r\n+                  <span\r\n+                    className=\"spinner-border spinner-border-sm \"\r\n+                    role=\"status\"\r\n+                    aria-hidden=\"true\"\r\n+                  ></span>\r\n+                  <span className=\"sr-only\">Loading...</span>\r\n+                </button>\r\n+              ) : (\r\n+                <button\r\n+                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n+                  type=\"button\"\r\n+                  onClick={onVisaUpdateClick}\r\n+                >\r\n+                  Submit\r\n+                </button>\r\n+              )}\r\n+            </div>\r\n+          </form>\r\n+          {/* </div> */}\r\n+        </div>\r\n+      </Modal>\r\n+    </>\r\n+  );\r\n+}\r\n"
                }
            ],
            "date": 1693213247311,
            "name": "Commit-0",
            "content": "import React, { useState ,useEffect} from \"react\";\r\nimport { Modal } from \"react-bootstrap\";\r\nimport useValidation from \"../../common/useValidation\";\r\n// import { CKEditor } from \"ckeditor4-react\";\r\nimport { AddUpdateVisa ,GetVisaSubStages ,AddUpdateEmployeeVisaSubStage} from \"../../../api/api\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport FilterJson from \"../../json/filterjson\";\r\nimport VisaTimeLine from \"../../common/visaTimeLine\";\r\nimport VisaSubStageSelector from \"../../common/visaSubsStage\";\r\nexport default function VisaStatus(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [apiCall, setApiCall] = useState(false);\r\n  const [selectedStatus, setSelectedStatus] = useState([]);\r\n  const [expandedStatus, setExpandedStatus] = useState(props.employeeData.visa_status);\r\n  // eslint-disable-next-line\r\n  let isExpanded = false;\r\n  // USER PERSONAL DETAIL VALIDATION\r\n  // INITIAL STATE ASSIGNMENT\r\n  const initialFormStateuser = {\r\n    status: props.employeeData.visa_status,\r\n    country: props.employeeData.visa_country,\r\n  };\r\n   /*Function to get Visa sub stage */\r\n   const GetVIsaSubSTage = async () => {\r\n    try {\r\n      let \r\n        Response = await GetVisaSubStages(props.employeeData.visa_id,\"visa\")\r\n      setSelectedStatus(Response.data.data.data)\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    GetVIsaSubSTage()\r\n    if(apiCall === true){\r\n      setApiCall(false)\r\n    }\r\n  }, [apiCall])\r\n  \r\n  /* Functionality to close the modal */\r\n    const close = () => {\r\n    setState(initialFormStateuser);\r\n    setErrors(\"\");\r\n    setLoading(false);\r\n    props.close();\r\n  };\r\n\r\n  // VALIDATION CONDITIONS\r\n\r\n  const validators = {\r\n    status: [\r\n      (value) =>\r\n        value === \"\" || value === null ? \"Visa is required\" : null,\r\n    ],\r\n  };\r\n\r\n  // CUSTOM VALIDATIONS IMPORT\r\n  const { state, setState, onInputChange, errors, validate, setErrors } =\r\n    useValidation(initialFormStateuser, validators);\r\n  // API CALL\r\n  // const UserData = async () => {\r\n  //   const userData = await EmployeeDetails(props.employeeId);\r\n  //   if (userData.data.employee.length === 0) {\r\n  //     setState([]);\r\n  //   } else {\r\n  //     setState(userData.data.employee[0]);\r\n  //   }\r\n  // };\r\n  // useEffect(() => {\r\n  //   if (props.employeeId === \"0\" || props.employeeId === undefined) {\r\n  //     setState(initialFormStateuser);\r\n  //   } else {\r\n  //     UserData();\r\n  //   }\r\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  // }, [props]);\r\n  // VISA STATUS ADD / UPDATE BUTTON\r\n  async function onVisaUpdateClick(event) {\r\n    // event.preventDefault();\r\n    if (validate()) {\r\n      setLoading(true);\r\n      try {\r\n        const responseData = await AddUpdateVisa(props.employeeData.employee_id, state, props.employeeData.visa_id);\r\n        if (responseData.data.message === \"visa inserted successfully\") {\r\n          toast.success(\"Visa created successfully\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 1000,\r\n          });\r\n          props.setApiCall(true);\r\n          setApiCall(true)\r\n          setLoading(false)\r\n            close()\r\n        }\r\n        if (responseData.data.message === \"updated successfully\") {\r\n          toast.success(\"Visa status Updated successfully\", {\r\n            position: toast.POSITION.TOP_RIGHT,\r\n            autoClose: 1000,\r\n          });\r\n          props.setApiCall(true);\r\n          setApiCall(true)\r\n          setLoading(false)\r\n            close()\r\n        }\r\n      } catch (err) {\r\n        toast.error(\"Something went wrong\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        setLoading(false)\r\n      }\r\n    } else {\r\n      //   setLoading(false);\r\n    }\r\n  }\r\n  /*Function to add update visa sub stages */\r\n  const handleSubStageSelection = async (status, subStage) => {\r\n    const isSelected = selectedStatus.some(\r\n      (item) => item.status === status && item.substage === subStage\r\n    );\r\n    let data;\r\n    /*Condition to check the selected substages */\r\n    if (isSelected) {\r\n      setSelectedStatus(\r\n        selectedStatus.filter(\r\n          (item) => !(item.status === status && item.substage === subStage)\r\n        )\r\n      );\r\n      let RemoveSubStage = selectedStatus.filter(\r\n        (item) => (item.status === status && item.substage === subStage)\r\n      )[0]\r\n      data = {\r\n        id:RemoveSubStage.id,\r\n        misc_id:RemoveSubStage.misc_id,\r\n        type:\"visa\",\r\n        status:RemoveSubStage.status,\r\n        substage:\"false\"\r\n      }\r\n      console.log(\"id =>\",data)\r\n    } else {\r\n      setSelectedStatus([\r\n        ...selectedStatus,\r\n        { status: status, substage: subStage },\r\n      ]);\r\n        /*Employee Visa sub stages */\r\n        data = {\r\n          misc_id:props.employeeData.visa_id,\r\n          type:\"visa\",\r\n          status:status,\r\n          substage:subStage\r\n        }\r\n    }\r\n    try {\r\n      let Response = await AddUpdateEmployeeVisaSubStage(data)\r\n      /*Removed sub stage response */\r\n      if (Response.message === \"updated successfully\") {\r\n        toast.success(\"visa Sub Stage Removed successfully\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n        //   setState({ ...state, status: status })\r\n        //   if (typeof onVisaUpdateClick === 'function') {\r\n        //     onVisaUpdateClick(\"sub\");\r\n        //   }\r\n        // }\r\n        setApiCall(true)\r\n      }\r\n      /*Added sub stage response */\r\n      if (Response.message === \"created successfully\") {\r\n        toast.success(\"visa Sub Stage Added successfully\", {\r\n          position: toast.POSITION.TOP_RIGHT,\r\n          autoClose: 1000,\r\n        });\r\n        // if (state.status !== props.employeeData.status && status !== state.status) {\r\n        //   setState({ ...state, status: status })\r\n        //   if (typeof onVisaUpdateClick === 'function') {\r\n        //     onVisaUpdateClick(\"sub\");\r\n        //   }\r\n        // }\r\n        setApiCall(true)\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n      console.log(err)\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <Modal\r\n        show={props.show}\r\n        size=\"md\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          className=\"circle-32 btn-reset bg-white pos-abs-tr mt-md-n6 mr-lg-n6 focus-reset z-index-supper\"\r\n          data-dismiss=\"modal\"\r\n          onClick={close}\r\n        >\r\n          <i className=\"fas fa-times\"></i>\r\n        </button>\r\n        {/* <div className=\"modal-dialog max-width-px-540 position-relative\"> */}\r\n        <div className=\"bg-white rounded h-100 px-11 pt-7\">\r\n          <form >\r\n            <h5 className=\"text-center pt-2 mb-7\">Update Visa status</h5>\r\n            <VisaTimeLine\r\n              visa={state.status} />\r\n              {expandedStatus &&\r\n              <VisaSubStageSelector\r\n              expandedStatus={expandedStatus}\r\n              selectedStatus={selectedStatus}\r\n              FilterJson={FilterJson}\r\n              handleSubStageSelection={handleSubStageSelection}/>}\r\n            <div className=\"form-group col\">\r\n              <label\r\n                htmlFor=\"status\"\r\n                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n              >\r\n                Work Permit : <span className=\"text-danger\">*</span>\r\n              </label>\r\n              <select\r\n                name=\"status\"\r\n                value={state.status || \"\"}\r\n                onChange={(e)=>{\r\n                  setState({...state , status :e.target.value})\r\n                  setExpandedStatus(e.target.value);\r\n                }}\r\n                multiple={false}\r\n                className={\r\n                  errors.status\r\n                    ? \"form-control text-capitalize border border-danger\"\r\n                    : \"form-control text-capitalize\"\r\n                }\r\n                id=\"status\"\r\n              >\r\n                <option value={\"\"}>Select visa status </option>\r\n                {(FilterJson.visa_status || []).map((item, index) => {\r\n                  isExpanded = expandedStatus === item\r\n                  return (\r\n                    <option value={item} key={index}>{item}</option>\r\n                  )\r\n                })}\r\n\r\n              </select>\r\n              {/*----ERROR MESSAGE FOR WORK PERMIT----*/}\r\n              {errors.status && (\r\n                <span\r\n                  key={errors.status}\r\n                  className=\"text-danger font-size-3\"\r\n                >\r\n                  {errors.status}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <div className=\"form-group col\">\r\n              <label\r\n                htmlFor=\"country\"\r\n                className=\"font-size-4 text-black-2 font-weight-semibold line-height-reset\"\r\n              >\r\n                Country :\r\n              </label>\r\n              <select\r\n                name=\"country\"\r\n                value={state.country || \"\"}\r\n                onChange={onInputChange}\r\n                className={\"form-control text-capitalize\"}\r\n                disabled={props.employeeData.visa_country}\r\n                id=\"country\"\r\n              >\r\n                <option value={\"\"}>Select visa Country </option>\r\n                {(FilterJson.location || []).map((item, index) => (\r\n                  <option value={item} key={index}>{item}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"form-group text-center\">\r\n              {loading === true ? (\r\n                <button\r\n                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n                  type=\"button\"\r\n                  disabled\r\n                >\r\n                  <span\r\n                    className=\"spinner-border spinner-border-sm \"\r\n                    role=\"status\"\r\n                    aria-hidden=\"true\"\r\n                  ></span>\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  className=\"btn btn-primary btn-small w-25 rounded-5 text-uppercase\"\r\n                  type=\"button\"\r\n                  onClick={onVisaUpdateClick}\r\n                >\r\n                  Submit\r\n                </button>\r\n              )}\r\n            </div>\r\n          </form>\r\n          {/* </div> */}\r\n        </div>\r\n      </Modal>\r\n    </>)\r\n}\r\n"
        }
    ]
}
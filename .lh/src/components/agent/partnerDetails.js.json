{
    "sourceFile": "src/components/agent/partnerDetails.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1713876818773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1713876825001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,8 +88,9 @@\n   };\r\n   /*Render function to get the Chart Data*/\r\n   useEffect(() => {\r\n     GetChartData();\r\n+    // eslint-disable-next-line\r\n   }, [agent_id]);\r\n   return (\r\n     <div>\r\n       {user_type === \"admin\" || user_type === \"agent\" ? (\r\n"
                }
            ],
            "date": 1713876818773,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from \"react\";\r\nimport EmployeeHeader from \"../common/header\";\r\nimport CustomButton from \"../common/button\";\r\nimport { GetAgent, GetAllChartData } from \"../../api/api\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport Loader from \"../common/loader\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { PiPencilDuotone } from \"react-icons/pi\";\r\nimport AdminHeader from \"../admin/header\";\r\nimport AdminSidebar from \"../admin/sidebar\";\r\nimport { BsEnvelope } from \"react-icons/bs\";\r\nimport { BiPhoneCall } from \"react-icons/bi\";\r\nimport ContactPage from \"../common/contactPage\";\r\nimport AgentsEmployee from \"../common/AgentEmployee\";\r\nimport AddAgent from \"../forms/admin/addAgent\";\r\nimport AgentConversation from \"../common/AgentConversation\";\r\nimport DataChart from \"../common/DataChart\";\r\nimport ActivityTable from \"../common/activity_table\";\r\nimport PayentForm from \"../forms/admin/payentForm\";\r\nimport Addfollowup from \"../forms/admin/addfollowup\";\r\nexport default function PartnerDetails() {\r\n  const user_type = localStorage.getItem(\"userType\");\r\n  const agent_id = localStorage.getItem(\"agent_id\");\r\n  let Pid = agent_id;\r\n  const location = useLocation();\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const partnerChat = searchParams.get(\"partner\");\r\n  let navigate = useNavigate();\r\n  /*Show modal and data state */\r\n  // const [lima, setLmia] = useState(false);\r\n  let [apiCall, setApiCall] = useState(false);\r\n  let [isLoading, setIsLoading] = useState(true);\r\n  // const [lmiaStatusRejectComment, setLmiaStatusRejectComment] = useState([]);\r\n  const [showPartnerInfoModal, setShowPartnerInfoModal] = useState(false);\r\n  useState(false);\r\n  const [TabActive, setTabActive] = useState(partnerChat ? \"support\" : \"profile\");\r\n  const [data, setData] = useState(\"\");\r\n  const [chartData, setChartData] = useState([]);\r\n\r\n  /*Function to get Partner data */\r\n  const PartnerData = async () => {\r\n    try {\r\n      let userData = await GetAgent(Pid);\r\n      if (\r\n        userData === undefined ||\r\n        !userData ||\r\n        userData.data.data.length === 0\r\n      ) {\r\n        setData(\"\");\r\n        setIsLoading(false);\r\n      } else {\r\n        setData(userData.data.data[0]);\r\n        setIsLoading(false);\r\n        if (user_type === \"agent\") {\r\n          localStorage.setItem(\"profile_photo\", userData.data.data[0].logo);\r\n          localStorage.setItem(\"name\", userData.data.data[0].company_name);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const params = new URLSearchParams(window.location.search);\r\n  const transactionId = params.get(\"payment_intent\");\r\n  /*Render method to get Partner data */\r\n  useEffect(() => {\r\n    PartnerData();\r\n    if (apiCall === true) {\r\n      setApiCall(false);\r\n    }\r\n    if (transactionId) {\r\n      //   setPayment();\r\n      setTabActive(\"payment\");\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [apiCall, agent_id]);\r\n  const GetChartData = async () => {\r\n    try {\r\n      let res = await GetAllChartData(agent_id, \"agent\");\r\n      if (res.status === 1) {\r\n        setChartData(res.data);\r\n      } else {\r\n        setChartData([]);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  /*Render function to get the Chart Data*/\r\n  useEffect(() => {\r\n    GetChartData();\r\n  }, [agent_id]);\r\n  return (\r\n    <div>\r\n      {user_type === \"admin\" || user_type === \"agent\" ? (\r\n        <>\r\n          <AdminHeader\r\n            heading={\r\n              <Link\r\n                className=\"d-flex align-items-center \"\r\n                onClick={() => navigate(-1)}\r\n              >\r\n                <i className=\"icon icon-small-left bg-white circle-30 mr-5 font-size-7 text-black font-weight-bold shadow-8\"></i>\r\n                <span className=\"text-uppercase font-size-3 font-weight-bold text-gray\">\r\n                  <h3 className=\"font-size-6 mb-0 text-capitalize\">\r\n                    Partner's Profile\r\n                  </h3>\r\n                </span>\r\n              </Link>\r\n            }\r\n          />\r\n          <AdminSidebar heading={\"Partner Dashboard\"} />\r\n        </>\r\n      ) : null}\r\n      <ToastContainer />\r\n      {user_type === \"admin\" || user_type === \"agent\" ? null : (\r\n        <EmployeeHeader />\r\n      )}\r\n      <div\r\n        className={\r\n          user_type === \"admin\" || user_type === \"agent\"\r\n            ? \"dashboard-main-container bg-light mt-12 mt-lg-12\"\r\n            : \"bg-default-2 pt-30 pt-lg-22 pb-lg-27\"\r\n        }\r\n      >\r\n        <div\r\n          className={`container${user_type === \"admin\" || user_type === \"agent\" ? \"-fluid\" : \"\"\r\n            }`}\r\n        >\r\n          <div className=\"row text-left mt-5 pt-0\">\r\n            <div className=\"col-12 order-2 order-xl-1\">\r\n              <div className=\"bg-white\">\r\n                {/*----Profile Header----*/}\r\n                <ul\r\n                  className=\"nav border-top border-bottom border-mercury user_profile_tab\"\r\n                  id=\"myTab\"\r\n                  role=\"tablist\"\r\n                >\r\n                  <li className=\"tab-menu-items nav-item\">\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"profile\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10\"\r\n                      }\r\n                      id=\"home-tab\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"home\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"profile\")}\r\n                    >\r\n                      Profile\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"tab-menu-items nav-item\">\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"applicants\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10\"\r\n                      }\r\n                      id=\"applicants\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"applicants\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"applicants\")}\r\n                    >\r\n                      Applicants\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"tab-menu-items nav-item\">\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"support\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10\"\r\n                      }\r\n                      id=\"support\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"support\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"support\")}\r\n                    >\r\n                      Support\r\n                    </Link>\r\n                  </li>\r\n                  <li\r\n                    className={\r\n                      // user_type === \"company\"\r\n                      //   ? \"d-none\"\r\n                      //   :\r\n                      user_type === \"admin\" ? \"tab-menu-items nav-item\" : \" d-none\"\r\n                    }\r\n                  >\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"notes\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-8 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-8\"\r\n                      }\r\n                      id=\"notesTab\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"notesTab\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"notes\")}\r\n                    >\r\n                      Notes\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"tab-menu-items nav-item\">\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"activity\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10\"\r\n                      }\r\n                      id=\"activity\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"activity\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"activity\")}\r\n                    >\r\n                      Activity\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"tab-menu-items nav-item\">\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"payment\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10\"\r\n                      }\r\n                      id=\"payment\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"payment\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"payment\")}\r\n                    >\r\n                      Payment\r\n                    </Link>\r\n                  </li>\r\n                  <li\r\n                    className={\r\n                      user_type === \"admin\" || user_type === \"agent\"\r\n                        ? \"tab-menu-items nav-item\"\r\n                        : \"d-none\"\r\n                    }\r\n                  >\r\n                    {/*Take off \"d-none\" when you use the activity log API or when you're told to remove it*/}\r\n                    <Link\r\n                      className={\r\n                        TabActive === \"contact\"\r\n                          ? \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10 active\"\r\n                          : \"text-uppercase font-size-3 font-weight-bold text-default-color py-4 mb-0 px-10\"\r\n                      }\r\n                      id=\"activityTab\"\r\n                      data-toggle=\"tab\"\r\n                      role=\"tab\"\r\n                      aria-controls=\"activityTab\"\r\n                      aria-selected=\"true\"\r\n                      onClick={() => setTabActive(\"contact\")}\r\n                    >\r\n                      Contact Us\r\n                    </Link>\r\n                  </li>\r\n                </ul>\r\n                {/*---Profile Details----*/}\r\n                <div\r\n                  className={TabActive === \"profile\" ? \"tab-content\" : \"d-none\"}\r\n                  id=\"myTabContent\"\r\n                >\r\n                  <div\r\n                    className=\"tab-pane fade show active\"\r\n                    id=\"home\"\r\n                    role=\"tabpanel\"\r\n                    aria-labelledby=\"home-tab\"\r\n                  >\r\n                    {/*----About Employee----*/}\r\n                    {isLoading ? (\r\n                      <div className=\"table-responsive main_table_div\">\r\n                        <Loader />\r\n                      </div>\r\n                    ) : (\r\n                      <div\r\n                        className={\r\n                          user_type === \"admin\" || user_type === \"agent\"\r\n                            ? \"row m-0\"\r\n                            : \"row m-0\"\r\n                        }\r\n                      >\r\n                        {/* <!-- Company Profile --> */}\r\n\r\n                        <div className=\"company_detail_box w-100 row m-0 p-8\">\r\n                          <div className=\"bg-white row m-0 w-100 \">\r\n                            <div className=\"col-md-6 col-sm-6 p-0 media align-items-top company_box media bg-light rounded p-8\">\r\n                              <div className=\"text_box text-left\">\r\n                                <img\r\n                                  className=\"company_logo\"\r\n                                  src={\r\n                                    data.profile_image === null ||\r\n                                      !data.profile_image ||\r\n                                      data.profile_image === undefined\r\n                                      ? \"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__340.png\"\r\n                                      : data.profile_image\r\n                                  }\r\n                                  alt=\"\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"text_box text-left w-100\">\r\n                                <h3 className=\"mb-0 font-size-6 heading-dark-color d-flex align-items-center text-break text-capitalize\">\r\n                                  <span>\r\n                                    <b title=\"Partner Name\">\r\n                                      {data.name\r\n                                        ? data.name\r\n                                        : \"Unknown Partner\"}\r\n                                    </b>\r\n                                  </span>\r\n                                </h3>\r\n                                <CustomButton\r\n                                  className={\r\n                                    user_type === \"user\"\r\n                                      ? \"d-none\"\r\n                                      : \"font-size-3 rounded-3 btn-primary border-0 ml-2 absolute_top_right\"\r\n                                  }\r\n                                  onClick={() => setShowPartnerInfoModal(true)}\r\n                                >\r\n                                  <PiPencilDuotone />\r\n                                </CustomButton>\r\n                                <p className=\"font-size-3 text-default-color line-height-2 m-0 text-break\">\r\n                                  <span className=\"mr-3\" title=\"Unique Id\">\r\n                                    {data.u_id}\r\n                                  </span>\r\n                                </p>\r\n\r\n                                <hr className=\"my-3\" />\r\n                                <div className=\"position-relative\">\r\n                                  {data.country && (\r\n                                    <span\r\n                                      className=\"font-size-3 text-smoke  mr-7 text-capitalize\"\r\n                                      title=\"Currently Located Country\"\r\n                                    >\r\n                                      <img\r\n                                        className=\"mr-1\"\r\n                                        height={\"16px\"}\r\n                                        src=\"image/icons/address-book.svg\"\r\n                                        alt=\"Address\"\r\n                                      />\r\n                                      {data.country}\r\n                                    </span>\r\n                                  )}\r\n                                  {(data.address ||\r\n                                    data.city ||\r\n                                    data.state) && (\r\n                                      <span\r\n                                        className=\"font-size-3 text-smoke  mr-7 text-capitalize\"\r\n                                        title=\"Current Location\"\r\n                                      >\r\n                                        <img\r\n                                          className=\"mr-1\"\r\n                                          height={\"16px\"}\r\n                                          src=\"image/icons/marker.svg\"\r\n                                          alt=\"Location\"\r\n                                        />\r\n                                        {`${data.address} ${data.city ? \" , \" + data.city : \"\"\r\n                                          } ${data.state ? \" , \" + data.state : \"\"\r\n                                          }`}\r\n                                      </span>\r\n                                    )}\r\n                                </div>\r\n                                <hr className=\"my-3\" />\r\n                                {!data.email || user_type === \"user\" ? (\r\n                                  \"\"\r\n                                ) : (\r\n                                  <div\r\n                                    className=\"d-flex\"\r\n                                    style={{ gap: \"10px\" }}\r\n                                  >\r\n                                    {data.contact_no &&\r\n                                      data.contact_no !== (0 || \"0\") && (\r\n                                        <Link\r\n                                          className=\"font-size-3 text-break btn btn-outline-secondary btn-rounded px-4\"\r\n                                          to={`tel:${data.contact_no}`}\r\n                                        >\r\n                                          <BiPhoneCall className=\"text-secondary font-size-5 mr-2\" />\r\n                                          {data.contact_no}\r\n                                        </Link>\r\n                                      )}\r\n                                    {data.email && (\r\n                                      <Link\r\n                                        className=\"font-size-3 text-break btn btn-outline-secondary btn-rounded px-4\"\r\n                                        to={`mailto:${data.email}`}\r\n                                      >\r\n                                        <BsEnvelope className=\"font-size-3 mr-4\" />\r\n                                        {data.email}\r\n                                      </Link>\r\n                                    )}\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"col-md-5 col-sm-6 p-0 media align-items-center company_box media  rounded p-8\">\r\n                              <DataChart data={chartData} dataType={\"status\"} />\r\n                            </div>\r\n\r\n                            {/* <div className=\"col-md-2 col-sm-6 d-flex justify-content-between\">           \r\n                              <CustomButton\r\n                                className=\" font-size-4 rounded-3 btn-primary border-0\"\r\n                                onClick={() => setShowDoc(true)}\r\n                              >\r\n                                Add Document\r\n                              </CustomButton>\r\n                            </div> */}\r\n                          </div>\r\n                          {/* <div className=\"col-md-12 col-lg-12 p-8 mt-5 bg-light rounded\">\r\n                                                        <div>\r\n                                                            <h4 className=\"text-black-2 mb-0 font-size-5 d-flex align-items-center justify-content-space-between text-break\">\r\n                                                                <span>About {data.company_name}</span>\r\n                                                             \r\n                                                            </h4>\r\n                                                            <div className=\"pt-5 text-left\">\r\n                                                                {data.about ? (\r\n                                                                    // <p className=\"font-size-4 mb-8\">\r\n                                                                    //   {data.about}\r\n                                                                    // </p>\r\n                                                                    <div className=\"w-100 card p-5 shadow-8 border-0 m-0 text-break\">\r\n                                                                        <div\r\n                                                                            dangerouslySetInnerHTML={{\r\n                                                                                __html: data.about,\r\n                                                                            }}\r\n                                                                        />\r\n                                                                    </div>\r\n                                                                ) : (\r\n                                                                    <p className=\"font-size-4 mb-8 text-center\">\r\n                                                                        No data Found\r\n                                                                    </p>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div> */}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {/* <!-- Sidebar End --> */}\r\n                <div\r\n                  className={\r\n                    TabActive === \"applicants\"\r\n                      ? \"row m-0  justify-content-center\"\r\n                      : \"d-none\"\r\n                  }\r\n                  id=\"applicants\"\r\n                  role=\"tabpanel\"\r\n                  aria-labelledby=\"applicants\"\r\n                >\r\n                  <div className=\"response_main_div w-100 py-3 px-5\">\r\n                    <AgentsEmployee\r\n                      Agentid={Pid}\r\n                      apiCall={apiCall}\r\n                      setApiCall={setApiCall}\r\n                      heading={\"Dashboard\"}\r\n                      user_of_page={\"agentAssigned\"}\r\n                      userType={user_type}\r\n                    />\r\n                  </div>\r\n                  {/* <!-- Top Start --> */}\r\n                </div>\r\n                <div\r\n                  className={\r\n                    TabActive === \"contact\"\r\n                      ? \"justify-content-center \"\r\n                      : \"d-none\"\r\n                  }\r\n                >\r\n                  {TabActive === \"contact\" ? (\r\n                    <ContactPage email={data.email} />\r\n                  ) : null}\r\n                </div>\r\n                <div\r\n                  className={\r\n                    TabActive === \"support\"\r\n                      ? \"justify-content-center \"\r\n                      : \"d-none\"\r\n                  }\r\n                >\r\n                  {TabActive === \"support\" ? (\r\n                    <AgentConversation\r\n                      userId={Pid}\r\n                      userEmail={data.email}\r\n                      userName={data.name}\r\n                      assignusertype={\"agent\"}\r\n                      type={\"partnerChat\"}\r\n                      assigned_by_id={data.assigned_by}\r\n                      partnerChatNav={partnerChat}\r\n                      reffer_by={Pid}\r\n                      page={\"agentProfile\"}\r\n                    />\r\n                  ) : null}\r\n                </div>\r\n                <div\r\n                  className={\r\n                    TabActive === \"activity\"\r\n                      ? \"justify-content-center \"\r\n                      : \"d-none\"\r\n                  }\r\n                >\r\n                  {TabActive === \"activity\" ? (\r\n                    <div className=\"w-100 p-5\">\r\n                      <ActivityTable\r\n                        user_id={agent_id}\r\n                        user_type={\"agent\"}\r\n                        hide={true}\r\n                      />\r\n                    </div>\r\n                  ) : null}\r\n                </div>\r\n                <div\r\n                  className={\r\n                    TabActive === \"payment\"\r\n                      ? \"justify-content-center \"\r\n                      : \"d-none\"\r\n                  }\r\n                >\r\n                  {TabActive === \"payment\" ? (\r\n                    <div className=\"p-10 activity_container\">\r\n                      <PayentForm\r\n                        data={data}\r\n                        user_id={Pid}\r\n                        user_type={\"agent\"}\r\n                      />\r\n                    </div>) : null}\r\n\r\n                </div>\r\n                <div\r\n                  className={\r\n                    TabActive === \"notes\"\r\n                      ? \"justify-content-center \"\r\n                      : \"d-none\"\r\n                  }\r\n                >\r\n                  {TabActive === \"notes\" ? (\r\n                    <Addfollowup \r\n                    userId={Pid}\r\n                      userType={\"agent\"}\r\n                      assigned_by_id={data.assigned_by}\r\n                      setApiCall={setApiCall}\r\n                      \r\n                      />\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {showPartnerInfoModal ? (\r\n        <AddAgent\r\n          show={showPartnerInfoModal}\r\n          agentId={Pid}\r\n          apiCall={apiCall}\r\n          setApiCall={setApiCall}\r\n          close={() => setShowPartnerInfoModal(false)}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}
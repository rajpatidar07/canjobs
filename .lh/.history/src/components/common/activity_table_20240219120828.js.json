{
    "sourceFile": ".history/src/components/common/activity_table_20240219120828.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1710503309474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1710503309474,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Pagination from \"../common/pagination\";\nimport Loader from \"../common/loader\";\nimport { GetAgent, getActivityLog } from \"../../api/api\";\nimport { Link } from \"react-router-dom\";\nimport moment from \"moment\";\nexport default function ActivityTable(props) {\n  /*Show modal states */\n  let [apiCall, setApiCall] = useState(false);\n  let [isLoading, setIsLoading] = useState(true);\n  const [hide, sethide] = useState(props.hide || false);\n  const [user_id, setuser_id] = useState(props.user_id);\n  const [user_type, setuser_type] = useState(props.user_type);\n  const [action_id, setaction_id] = useState(props.action_id);\n  const [action_type, setaction_type] = useState(props.action_type);\n  const [activityData, setactivityData] = useState([]);\n  /*Pagination states */\n  // const [status, setStatus] = useState(props.self === \"yes\" ? -1 : 4);\n  const [page, setpage] = useState(1);\n  const [totalData, setTotalData] = useState(\"\");\n  const [recordsPerPage] = useState(10);\n  /*Pagination Calculation */\n  const nPages = Math.ceil(totalData / recordsPerPage);\n\n  let activity_json = {\n    1: \"Employee updated\",\n    2: \"Employee inserted\",\n    3: \"Employee skill inserted\",\n    4: \"Employee education details inserted\",\n    5: \"Employee education details updated\",\n    6: \"Employee career details inserted\",\n    7: \"Employee career details updated\",\n    8: \"Employee document inserted\",\n    9: \"Employee document updated\",\n    10: \"Employee visa inserted\",\n    11: \"Employee visa updated\",\n    12: \"Employer details updated\",\n    13: \"Employer details inserted\",\n    14: \"Employer contact details updated\",\n    15: \"Employer kyc details inserted\",\n    16: \"Employer kyc details updated\",\n    17: \"Job details updated\",\n    18: \"Job details inserted\",\n    19: \"Job switch\",\n    20: \"Apply on job\",\n    21: \"Interview schedule\",\n    22: \"Lmia updated\",\n    23: \"Lmia inserted\",\n    24: \"Employer document inserted\",\n    25: \"Employer document updated\",\n    26: \"Employee lmia substage added\",\n    27: \"Employee lmia substage updated\",\n    28: \"Job lmia substage inserted\",\n    29: \"Job lmia substage updated\",\n    30: \"Category inserted\",\n    31: \"Category updated\",\n    32: \"Category type inserted\",\n    33: \"Category type updated\",\n  };\n  //   let activityData;\n  /* Function to get Activity data*/\n  const ActivityLog = async () => {\n    // const params = useParams();\n    setIsLoading(true);\n    try {\n      let adata = await getActivityLog(\n        page, // Page no.\n        user_id,\n        user_type,\n        action_id,\n        action_type,\n        recordsPerPage //data  per page\n      );\n      setactivityData(adata.data.data);\n      setTotalData(adata.data.total_rows);\n      setIsLoading(false);\n    } catch (err) {\n      console.log(err);\n      setIsLoading(false);\n    }\n  };\n  //   const SetHtml = async (htmll) => {\n  //     const markup = { __html: htmll };\n  //     return { markup };\n  //   };\n  /*Render function to get the employer*/\n  useEffect(() => {\n    ActivityLog();\n  }, []);\n  console.log(\"DATATATA\" + activity_json[\"1\"]);\n  return (\n    <>\n      <div className=\"table-responsive main_table_div\">\n        {isLoading ? (\n          <Loader />\n        ) : (\n          <table className=\"table table-striped main_data_table\">\n            <thead>\n              <tr className=\"\">\n                {hide ? null : <th>User ID</th>}\n                {hide ? null : <th>User Type</th>}\n                {hide ? null : <th>User Name</th>}\n                <th>Log</th>\n                <th>Date Time</th>\n              </tr>\n            </thead>\n            <tbody>\n              {(activityData || []).map((data) => (\n                <tr key={data.id} className=\"font-size-3\">\n                  {hide ? null : <td>{data.user_id}</td>}\n                  {hide ? null : <td>{data.user_type}</td>}\n                  {hide ? null : <td>{data.created_by}</td>}\n                  <td>\n                    {/* {data.msg} */}\n                    {activity_json[`${data.status}`]}\n                    {\" for \"}\n                    <Link to={\"/\" + data.action_id}>\n                      {data.employee_name === (\"\" || undefined || null)\n                        ? \"Candidate\"\n                        : data.employee_name}\n                    </Link>\n                    {\" by \"}\n                    {data.user_type + \" \" + data.created_by}\n                  </td>\n                  <td>{moment(data.created_at).format(\"lll\")}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n      <div className=\"pt-2\">\n        <Pagination\n          nPages={nPages}\n          currentPage={props.pageNo}\n          setCurrentPage={props.setpageNo}\n          total={totalData}\n          count={activityData.length}\n        />\n      </div>\n    </>\n  );\n}\n"
        }
    ]
}